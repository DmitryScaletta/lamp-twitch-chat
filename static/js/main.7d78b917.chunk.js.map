{"version":3,"sources":["../../twitch-simple-irc/dist/twitch-simple-irc.cjs.production.min.js","utils/isAuthRedirect.js","utils/constants.js","utils/fetchRequest.js","utils/api.js","reducers/auth/auth.js","reducers/badges/badges.js","reducers/chat/chat.js","reducers/emotes/twitch.js","reducers/emotes/bttv.js","reducers/emotes/ffz.js","reducers/emotes/index.js","utils/normalizeHref.js","utils/formatMessage.js","reducers/badges/selectors.js","utils/createBadges.js","reducers/chat/selectors.js","reducers/emotes/selectors.js","utils/normalizeRecentMessages.js","reducers/messages/messages.js","reducers/options/options.js","reducers/index.js","store/index.js","reducers/auth/selectors.js","reducers/messages/selectors.js","hooks/useFetchChatData.js","hooks/useLocationHash.js","hooks/useCurrentChannel.js","hooks/usePrevious.js","utils/createOwnMessage.js","hooks/useTwitchClient.js","utils/replaceEmojis.js","hooks/useSetState.js","reducers/options/selectors.js","utils/getUserSuggestions.js","utils/getEmoteSuggestions.js","icons/close.svg","components/IconButton.jsx","components/ChatModal.jsx","components/Scrollbar.jsx","components/EmotePicker.jsx","icons/smiley-face.svg","components/ChatInput.jsx","icons/gears.svg","icons/twitch.svg","components/Switch.jsx","components/Options.jsx","components/ChatControls.jsx","components/ChatMessage/types.js","components/ChatMessage/Message.jsx","components/ChatMessage/Notice.jsx","components/ChatMessage/UserNotice.jsx","components/ChatMessage/ChatMessage.jsx","components/Messages.jsx","components/Chat.jsx","components/Home.jsx","utils/getAuthUrl.js","components/Auth.jsx","components/Logout.jsx","components/AuthCallback.jsx","styles/common.js","styles/colors.js","styles/vars.js","styles/index.js","App.tsx","index.tsx","../../twitch-simple-irc/dist/index.js"],"names":["e","t","default","r","n","s","a","Object","assign","arguments","length","prototype","hasOwnProperty","call","apply","this","i","o","Math","floor","random","toString","padStart","m","startsWith","endsWith","c","slice","u","middle","d","process","versions","node","g","l","p","h","f","split","reduce","v","entries","includes","map","start","Number","parseInt","end","replace","S","tags","raw","channel","w","message","trailing","exports","Commands","REPLY001","PING","PONG","JOIN","PART","PRIVMSG","NOTICE","USERNOTICE","GLOBALUSERSTATE","USERSTATE","ROOMSTATE","CLEARCHAT","CLEARMSG","HOSTTARGET","WHISPER","R","P","socket","globalUserState","channels","_connected","_connecting","_registered","options","secure","create","constructor","__proto__","connect","_connectInNode","_connectInBrowser","Promise","resolve","then","_register","reject","disconnect","destroy","close","emit","receiveRaw","trim","forEach","_handleMessage","sendRaw","write","send","say","format","command","sendCommand","Array","isArray","join","part","parse","name","_updateUserState","_updateRoomState","_updateGlobalUserState","user","prefix","b","C","T","y","isAction","Socket","on","WebSocket","onopen","onmessage","data","onerror","onclose","wasClean","code","reason","Error","auth","off","setTimeout","userState","roomState","key","get","enumerable","configurable","writable","defineProperty","EventEmitter","UserNoticeType","sub","resub","subgift","anonsubgift","submysterygift","giftpaidupgrade","rewardgift","anongiftpaidupgrade","raid","unraid","ritual","bitsbadgetier","Client","getChannelFromMessage","getIsAction","getRandomUsername","isNode","normalizeActionMessage","parseMessageTags","isAuthRedirect","hash","MESSAGE_TYPES","SUGGESTION_TYPES","users","limit","regex","emotes","STORE_FLAGS","DEFAULT","isLoading","isLoaded","isError","error","REQUEST","SUCCESS","FAILURE","NOTICE_MESSAGE_TAGS","fetchRequest","url","fetchOptions","timeout","controller","AbortController","signal","abort","fetch","response","json","body","ok","statusText","apiRequest","apiRequestKraken","headers","Accept","Authorization","localStorage","accessToken","fetchUser","id","fetchTwitchEmotesBySets","userId","fetchBttvChannelEmotes","channelId","fetchFfzChannelEmotes","fetchRecentMessages","fetchGlobalBadges","language","fetchChannelBadges","fetchBlockedUsers","defaultState","isAuthReady","isAuth","login","displayName","setAuth","createAction","fetchUserRequest","fetchUserSuccess","fetchUserFailure","handleFetchUser","state","payload","reducer","handleActions","global","items","createActions","fetchGlobalBadgesRequest","fetchGlobalBadgesSuccess","fetchGlobalBadgesFailure","fetchChannelBadgesRequest","fetchChannelBadgesSuccess","fetchChannelBadgesFailure","parseBadges","handleFetchGlobalBadges","handleFetchChannelBadges","currentChannel","isConnected","globalState","blockedUsers","setCurrentChannel","setIsConnected","updateGlobalUserState","updateUserState","updateRoomState","removeChannel","fetchBlockedUsersRequest","fetchBlockedUsersSuccess","fetchBlockedUsersFailure","parseBlockedUsers","handleFetchBlockUsers","fetchTwitchEmotesRequest","fetchTwitchEmotesSuccess","fetchTwitchEmotesFailure","handleFetchTwitchEmotes","fetchBttvGlobalEmotesRequest","fetchBttvGlobalEmotesSuccess","fetchBttvGlobalEmotesFailure","fetchBttvChannelEmotesRequest","fetchBttvChannelEmotesSuccess","fetchBttvChannelEmotesFailure","parseBttvChannelEmotes","channelEmotes","sharedEmotes","handleFetchBttvGlobalEmotes","handleFetchBttvChannelEmotes","fetchFfzGlobalEmotesRequest","fetchFfzGlobalEmotesSuccess","fetchFfzGlobalEmotesFailure","fetchFfzChannelEmotesRequest","fetchFfzChannelEmotesSuccess","fetchFfzChannelEmotesFailure","parseFfzGlobalEmotes","defaultSets","default_sets","sets","parseFfzChannelEmotes","handleFetchFfzGlobalEmotes","handleFetchFfzChannelEmotes","combineReducers","twitch","bttv","ffz","isStartsWithProtocolRegex","normalizeHref","href","test","TWITCH_EMOTES_CDN","mentionRegex","linkRegex","urlRegex","strict","normalizeEmotesFromTags","value","getFfzSrcSet","dpi","createTwitchEmote","type","alt","src","srcSet","createBttvEmote","createFfzEmote","urls","createMention","text","target","twitchEmoteType","pt","shape","oneOf","isRequired","string","bttvEmoteType","ffzEmoteType","emojiType","mentionType","linkType","regexMap","4","9","findTwitchEmote","RegExp","findTwitchEmoteInSets","values","set","result","findBttvEmote","findFfzEmote","findEntity","word","parseTwitch","twitchGlobal","twitchUser","bttvGlobal","bttvChannel","ffzGlobal","ffzChannel","twitchEmote","bttvEmote","ffzEmote","char","emojiMatch","twemojiParser","assetType","emoji","emojilib","mentionMatch","match","toLowerCase","linkMatch","formatMessage","embeddedEmotes","isOwnMessage","undefined","hasEmbeddedEmotes","keys","normalizedEmbeddedEmotes","offset","arrayOffset","spaceIndex","indexOf","startIndex","endIndex","substring","entity","embeddedEmote","textBefore","push","entityObject","difference","textAfter","globalBadgesSelector","badges","channelBadgesSelector","currentChannelSelector","isBadgesLoadedSelector","isGlobalBadgesLoadedSelector","isChannelBadgesLoadedSelector","createBadges","globalBadges","channelBadges","version","badge","title","description","imageUrl1x","image_url_1x","imageUrl2x","image_url_2x","imageUrl4x","image_url_4x","label","createBadge","Boolean","currentChannelIdSelector","isConnectedSelector","chat","isBlockedUsersLoadedSelector","blockedUsersSelector","userColorSelector","userBadgesImagesSelector","createSelector","userBadges","createIsEmotesLoadedSelector","globalLoaded","channelLoaded","isBttvEmotesLoadedSelector","isFfzEmotesLoadedSelector","isTwitchEmotesLoadedSelector","twitchEmotesSelector","twitchGlobalEmotesSelector","twitchUserEmotesSelector","createGlobalEmotesSelector","createChannelEmotesSelector","bttvGlobalEmotesSelector","bttvChannelEmotesSelector","ffzGlobalEmotesSelector","ffzChannelEmotesSelector","emotesSelector","isEmotesLoaded","regexEmotesMap","createGlobalTwitchEmote","emoteCategoriesSelector","filter","normalizeRecentMessages","messages","params","normalizedMessage","parsedTags","messageArray","isHistory","addMessages","fetchRecentMessagesRequest","fetchRecentMessagesSuccess","fetchRecentMessagesFailure","clearChat","addMessage","dispatch","getState","historyAddedPatch","history","isAdded","handleFetchRecentMessages","prevItems","newItems","slicedMessages","diff","sliceMessages","isSliced","isEven","prev","addedItemsCount","getIsEven","sliceUsers","targetUserId","isDeleted","getOptionsFromLocalStorage","JSON","showTimestamps","splitChat","blacklistKeywords","highlightKeywords","fixedWidth","changeOption","option","setItem","stringify","enhancer","applyMiddleware","thunk","store","createStore","rootReducer","isAuthReadySelector","isAuthSelector","userLoginSelector","userIdSelector","userDisplayNameSelector","messagesSelector","usersSelector","isHistoryLoadedSelector","isHistoryAddedSelector","isEvenSelector","useFetchChatData","useDispatch","useSelector","currentChannelId","isTwitchEmotesLoaded","isBttvEmotesLoaded","isFfzEmotesLoaded","isBadgesLoaded","isHistoryLoaded","isBlockedUsersLoaded","isHistoryAdded","isReadyToAddHistory","useEffect","apiFetchGlobalBadges","apiFetchRecentMessages","emoticon_sets","fetchTwitchEmotes","apiFetchBlockedUsers","apiFetchBttvChannelEmotes","apiFetchFfzChannelEmotes","apiFetchChannelBadges","useLocationHash","useState","window","location","setHash","handleHashChange","addEventListener","removeEventListener","useCurrentChannel","document","usePrevious","ref","useRef","current","createOwnMessage","uuid","tmiSentTs","Date","getTime","emptyFunc","useTwitchClient","userLogin","prevChannel","clientRef","registerEvents","useCallback","client","useMemo","handleUserState","removeListeners","handleNotice","msgId","replaceEmojis","useSetState","initialState","patch","prevState","Function","optionsSelector","isShowTimestampsSelector","isSplitChatSelector","isFixedWidthSelector","getUserSuggestions","beginText","userDisplayName","beginTextLower","userDisplayNameLower","nameLower","checkTwitch","emote","checkBttv","checkFfz","getEmoteSuggestions","_extends","source","_objectWithoutProperties","excluded","sourceKeys","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","createElement","fill","_ref","svgRef","props","viewBox","ForwardRef","forwardRef","sizes","small","css","medium","IconButton","styled","button","attrs","size","defaultProps","propTypes","ChatModalRoot","div","CloseButton","CloseIcon","CloseIconSvg","ChatModal","children","onClose","onClick","Scrollbar","CustomScrollbar","disableTracksWidthCompensation","EmotePickerRoot","Categories","Category","CategoryHeader","CategoryItems","Emote","img","EmotePicker","emoteCategories","onEmoteClick","renderCategory","fillRule","clipRule","ChatInputRoot","ChatInputInner","Suggestions","SuggestionItem","isActive","SuggestionImage","TextareaInput","TextareaWrapper","isSuggestions","EmotesModal","Textarea","textarea","EmotesButton","SmileyFaceIcon","SmileyFaceIconSvg","ChatInput","React","textareaRef","suggestions","isDisabled","onChange","onKeyUp","onKeyDown","onBlur","chatInputRef","isEmotesModalVisible","setIsEmotesModalVisible","handleCloseEmotesModal","useOnClickOutside","activeIndex","index","renderSuggestions","placeholder","maxLength","disabled","memo","SwitchRoot","Label","Input","input","Switch","checked","readOnly","htmlFor","OptionsRoot","Header","h2","Option","OptionText","span","Profile","UserName","color","LogOutButton","Badge","Options","userColor","userBadgesImages","renderOption","renderOptionsCategory","aria-label","as","Link","to","ChatControlsRoot","Controls","OptionsModal","Button","OptionsButton","GearsIcon","GearsIconSvg","TwitchIcon","TwitchIconSvg","ChatControls","onSendMessage","isOptionsModalVisible","setIsOptionsModalVisible","optionsModalRef","handleCloseOptionsModal","arrayOf","oneOfType","badgeInfo","subscriber","flags","mod","bool","roomId","tmiSentId","number","systemMsg","msgParamCumulativeMonths","msgParamDisplayName","msgParamLogin","msgParamMonths","msgParamPromoGiftTotal","msgParamPromoName","msgParamRecipientDisplayName","msgParamRecipientId","msgParamRecipientUserName","msgParamSenderLogin","msgParamSenderName","msgParamShouldShareStreak","msgParamStreakMonths","msgParamSubPlan","msgParamSubPlanName","msgParamViewerCount","msgParamRitualName","msgParamThreshold","MessageRoot","isMention","Name","Emoji","Mention","Timestamp","Message","isShowTimestamps","onNameRightClick","isVisible","setIsVisible","renderBadges","onContextMenu","preventDefault","item","rel","renderMessageArray","NoticeRoot","Notice","UserNoticeRoot","ChatMessage","onNameClick","MessagesRoot","StyledScrollbar","MoreMessagesButton","visible","Messages","isSplitChat","isMoreMessagesButtonVisible","setIsMoreMessagesButtonVisible","scrollbarRef","handleScrollToBottom","scrollToBottom","onUpdate","clientHeight","contentScrollHeight","scrollTop","ChatRoot","ChatWrapper","isFixedWidth","suggestionsInitialState","setSuggestionsIndexUp","rest","setSuggestionsIndexDown","Chat","setText","setSuggestions","textRef","usersRef","emotesRef","suggestionsRef","handleNameRightClick","trimLeft","focus","handleEmoteClick","emoteName","handleSendMessage","handleBlur","handleChange","selectionStart","spaceIndexBefore","lastIndexOf","spaceIndexAfter","usersMatch","exec","emotesMatch","handleKeyUp","handleKeyDown","currentItem","insertedText","testAfter","replaceSuggestionText","Home","idToken","jwt","decode","apiFetchUser","display_name","authParams","client_id","redirect_uri","response_type","scope","claims","id_token","email_verified","picture","preferred_username","getAuthUrl","search","Auth","Logout","useHistory","removeItem","pathname","lastChannel","AuthCallback","URLSearchParams","createGlobalStyle","colors","vars","common","getHomeComponent","App","exact","path","render","component","ReactGA","initialize","page","pageview","ReactDOM","getElementById","module"],"mappings":"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","file":"static/js/main.7d78b917.chunk.js","sourcesContent":["\"use strict\";\n\nvar e,\n    t = (e = require(\"tls\")) && \"object\" == typeof e && \"default\" in e ? e.default : e,\n    r = require(\"net\"),\n    n = require(\"events\"),\n    s = require(\"tekko\");\n\nfunction a() {\n  return (a = Object.assign || function (e) {\n    for (var t = 1; t < arguments.length; t++) {\n      var r = arguments[t];\n\n      for (var n in r) {\n        Object.prototype.hasOwnProperty.call(r, n) && (e[n] = r[n]);\n      }\n    }\n\n    return e;\n  }).apply(this, arguments);\n}\n\nvar i,\n    o = function o() {\n  return \"justinfan\" + Math.floor(1e5 * Math.random()).toString().padStart(5, \"0\");\n},\n    m = function m(e) {\n  return e.startsWith(\"\u0001ACTION \") && e.endsWith(\"\u0001\");\n},\n    c = function c(e) {\n  return e.slice(8, -1);\n},\n    u = function u(e) {\n  return e.middle[0].slice(1);\n},\n    d = !(\"undefined\" == typeof process || !process.versions || !process.versions.node),\n    g = [\"mod\", \"emote-only\", \"r9k\", \"rituals\", \"subs-only\", \"msg-param-should-share-streak\"],\n    l = [\"tmi-sent-ts\", \"bits\", \"ban-duration\", \"msg-param-cumulative-months\", \"msg-param-months\", \"msg-param-promo-gift-total\", \"msg-param-streak-months\", \"msg-param-viewerCount\", \"msg-param-threshold\"],\n    p = {\n  \"badge-info\": \"badgeInfo\",\n  \"display-name\": \"displayName\",\n  \"emote-sets\": \"emoteSets\",\n  \"room-id\": \"roomId\",\n  \"tmi-sent-ts\": \"tmiSentTs\",\n  \"user-id\": \"userId\",\n  \"target-msg-id\": \"targetMsgId\",\n  \"msg-id\": \"msgId\",\n  \"system-msg\": \"systemMsg\",\n  \"emote-only\": \"emoteOnly\",\n  \"followers-only\": \"followersOnly\",\n  \"subs-only\": \"subsOnly\",\n  \"ban-duration\": \"banDuration\",\n  \"message-id\": \"messageId\",\n  \"thread-id\": \"threadId\",\n  \"msg-param-cumulative-months\": \"msgParamCumulativeMonths\",\n  \"msg-param-displayName\": \"msgParamDisplayName\",\n  \"msg-param-login\": \"msgParamLogin\",\n  \"msg-param-months\": \"msgParamMonths\",\n  \"msg-param-promo-gift-total\": \"msgParamPromoGiftTotal\",\n  \"msg-param-promo-name\": \"msgParamPromoName\",\n  \"msg-param-recipient-display-name\": \"msgParamRecipientDisplayName\",\n  \"msg-param-recipient-id\": \"msgParamRecipientId\",\n  \"msg-param-recipient-user-name\": \"msgParamRecipientUserName\",\n  \"msg-param-sender-login\": \"msgParamSenderLogin\",\n  \"msg-param-sender-name\": \"msgParamSenderName\",\n  \"msg-param-should-share-streak\": \"msgParamShouldShareStreak\",\n  \"msg-param-streak-months\": \"msgParamStreakMonths\",\n  \"msg-param-sub-plan\": \"msgParamSubPlan\",\n  \"msg-param-sub-plan-name\": \"msgParamSubPlanName\",\n  \"msg-param-viewerCount\": \"msgParamViewerCount\",\n  \"msg-param-ritual-name\": \"msgParamRitualName\",\n  \"msg-param-threshold\": \"msgParamThreshold\"\n},\n    h = [\"subscriber\", \"turbo\", \"user-type\"],\n    f = function f(e) {\n  return void 0 === e && (e = \"\"), e ? e.split(\",\").reduce(function (e, t) {\n    var r,\n        n = t.split(\"/\");\n    return a({}, e, ((r = {})[n[0]] = n[1], r));\n  }, {}) : {};\n},\n    v = function v(e) {\n  return e ? Object.entries(e).reduce(function (e, t) {\n    var r,\n        n = t[0],\n        s = t[1];\n    return h.includes(n) ? e : a({}, e, ((r = {})[p[n] || n] = function (e, t) {\n      if (\"emotes\" === e) return void 0 === (r = t) && (r = \"\"), r ? r.split(\"/\").reduce(function (e, t) {\n        var r,\n            n = t.split(\":\");\n        return a({}, e, ((r = {})[n[0]] = n[1].split(\",\").map(function (e) {\n          var t = e.split(\"-\"),\n              r = t[1];\n          return {\n            start: Number.parseInt(t[0], 10),\n            end: Number.parseInt(r, 10)\n          };\n        }), r));\n      }, {}) : {};\n      var r;\n      if (\"badges\" === e) return f(t);\n      if (\"badge-info\" === e) return f(t);\n\n      if (\"followers-only\" === e) {\n        var n = !1;\n        return \"-1\" === t ? n = !1 : \"0\" === t ? n = !0 : \"string\" == typeof t && (n = parseInt(t, 10)), n;\n      }\n\n      if (\"slow\" === e) {\n        var s = !1;\n        return \"0\" === t ? s = !1 : \"string\" == typeof t && (s = parseInt(t, 10)), s;\n      }\n\n      return g.includes(e) ? \"1\" === t : l.includes(e) ? parseInt(t, 10) : \"string\" == typeof t ? t.replace(\"\\\\s\", \" \") : t;\n    }(n, s), r));\n  }, {}) : {};\n},\n    S = function S(e) {\n  var t = e.tags;\n  return {\n    raw: e.raw,\n    channel: u(e),\n\n    get tags() {\n      return v(t);\n    }\n\n  };\n},\n    w = function w(e) {\n  var t = e.tags;\n  return {\n    raw: e.raw,\n    message: e.trailing,\n    channel: u(e),\n\n    get tags() {\n      return v(t);\n    }\n\n  };\n};\n\n(i = exports.Commands || (exports.Commands = {})).REPLY001 = \"001\", i.PING = \"PING\", i.PONG = \"PONG\", i.JOIN = \"JOIN\", i.PART = \"PART\", i.PRIVMSG = \"PRIVMSG\", i.NOTICE = \"NOTICE\", i.USERNOTICE = \"USERNOTICE\", i.GLOBALUSERSTATE = \"GLOBALUSERSTATE\", i.USERSTATE = \"USERSTATE\", i.ROOMSTATE = \"ROOMSTATE\", i.CLEARCHAT = \"CLEARCHAT\", i.CLEARMSG = \"CLEARMSG\", i.HOSTTARGET = \"HOSTTARGET\", i.WHISPER = \"WHISPER\";\n\nvar R,\n    P = function (e) {\n  var n, i;\n\n  function g(t) {\n    var r;\n    return void 0 === t && (t = {}), (r = e.call(this) || this).socket = null, r.globalUserState = null, r.channels = {}, r._connected = !1, r._connecting = !1, r._registered = !1, r.options = a({\n      secure: !0\n    }, t), r;\n  }\n\n  i = e, (n = g).prototype = Object.create(i.prototype), n.prototype.constructor = n, n.__proto__ = i;\n  var l,\n      p = g.prototype;\n  return p.connect = function () {\n    try {\n      var e = this,\n          t = d ? e._connectInNode() : e._connectInBrowser();\n      return Promise.resolve(t).then(function () {\n        return e._register();\n      });\n    } catch (e) {\n      return Promise.reject(e);\n    }\n  }, p.disconnect = function () {\n    this._connected && (d ? this.socket.destroy() : this.socket.close(), this.socket = null, this._connected = !1, this._connecting = !1, this._registered = !1, this.emit(\"disconnect\"));\n  }, p.receiveRaw = function (e) {\n    var t = this;\n    e.trim().split(\"\\r\\n\").forEach(function (e) {\n      return t._handleMessage(e);\n    });\n  }, p.sendRaw = function (e) {\n    return !(null === this.socket || !e || (d ? this.socket.write(e) : this.socket.send(e), 0));\n  }, p.say = function (e, t) {\n    var r = s.format({\n      command: exports.Commands.PRIVMSG,\n      middle: [\"#\" + e],\n      trailing: t\n    });\n    return this.sendRaw(r);\n  }, p.sendCommand = function (e, t, r) {\n    void 0 === r && (r = \"\");\n    var n = Array.isArray(r) ? r.join(\" \") : r,\n        a = s.format({\n      command: exports.Commands.PRIVMSG,\n      middle: [\"#\" + e],\n      trailing: \"/\" + t + \" \" + n\n    });\n    return this.sendRaw(a);\n  }, p.join = function (e) {\n    if (!this._registered) return !1;\n    var t = s.format({\n      command: exports.Commands.JOIN,\n      middle: [\"#\" + e]\n    });\n    return this.sendRaw(t);\n  }, p.part = function (e) {\n    if (!this._registered) return !1;\n    var t = s.format({\n      command: exports.Commands.PART,\n      middle: [\"#\" + e]\n    });\n    return this.sendRaw(t);\n  }, p._handleMessage = function (e) {\n    var t = s.parse(e);\n    t.raw = e;\n    var r = t.command;\n    if (r === exports.Commands.PING) return this.sendRaw(exports.Commands.PONG + \" :tmi.twitch.tv\"), void this.emit(\"ping\", {\n      raw: e\n    });\n    if (r === exports.Commands.REPLY001) return this.options.name = t.middle[0], this._registered = !0, void this.emit(\"register\");\n\n    if (r !== exports.Commands.PRIVMSG) {\n      if (r === exports.Commands.USERSTATE) {\n        var n = u(t),\n            a = S(t);\n        return this._updateUserState(n, a.tags), void this.emit(\"userstate\", a);\n      }\n\n      if (r !== exports.Commands.JOIN) {\n        if (r !== exports.Commands.PART) {\n          if (r === exports.Commands.ROOMSTATE) {\n            var i = u(t),\n                o = S(t);\n            return this._updateRoomState(i, o.tags), void this.emit(\"roomstate\", o);\n          }\n\n          if (r !== exports.Commands.NOTICE) {\n            if (r !== exports.Commands.USERNOTICE) {\n              if (r !== exports.Commands.CLEARCHAT) {\n                if (r !== exports.Commands.CLEARMSG) {\n                  if (r !== exports.Commands.HOSTTARGET) {\n                    if (r !== exports.Commands.WHISPER) {\n                      var d, g;\n\n                      if (r === exports.Commands.GLOBALUSERSTATE) {\n                        var l = function (e) {\n                          var t = e.tags;\n                          return {\n                            raw: e.raw,\n\n                            get tags() {\n                              return v(t);\n                            }\n\n                          };\n                        }(t);\n\n                        return this._updateGlobalUserState(l.tags), void this.emit(\"globaluserstate\", l);\n                      }\n                    } else {\n                      var p = (g = (d = t).tags, {\n                        raw: d.raw,\n                        message: d.trailing,\n                        channel: d.middle[0],\n                        user: d.prefix.name,\n\n                        get tags() {\n                          return v(g);\n                        }\n\n                      });\n                      this.emit(\"whisper\", p);\n                    }\n                  } else {\n                    var h = w(t);\n                    this.emit(\"hosttarget\", h);\n                  }\n                } else {\n                  var f = w(t);\n                  this.emit(\"clearmessage\", f);\n                }\n              } else {\n                var R = w(t);\n                this.emit(\"clearchat\", R);\n              }\n            } else {\n              var P = w(t);\n              this.emit(\"usernotice\", P);\n            }\n          } else {\n            var b = w(t);\n            this.emit(\"notice\", b);\n          }\n        } else {\n          var C = u(t);\n          this.emit(\"part\", {\n            channel: C\n          });\n        }\n      } else {\n        var T = u(t);\n        this.emit(\"join\", {\n          channel: T\n        });\n      }\n    } else {\n      var y = function (e) {\n        var t = e.raw,\n            r = e.trailing,\n            n = e.tags,\n            s = e.prefix.name,\n            a = m(r);\n        return {\n          raw: t,\n          message: a ? c(r) : r,\n          channel: u(e),\n          user: s,\n\n          get tags() {\n            return v(n);\n          },\n\n          isAction: a\n        };\n      }(t);\n\n      this.emit(\"message\", y);\n    }\n  }, p._connectInNode = function () {\n    var e = this,\n        n = \"irc.chat.twitch.tv\",\n        s = this.options.secure ? 6697 : 6667;\n    return new Promise(function (a, i) {\n      e._connecting = !0;\n\n      var o = function o() {\n        e._connecting = !1, e._connected = !0, e.emit(\"connect\"), a();\n      };\n\n      e.options.secure ? e.socket = t.connect(s, n, {}, o) : (e.socket = new r.Socket(), e.socket.connect(s, n, o)), e.socket.on(\"error\", function (t) {\n        e._connected = !1, e._connecting = !1, e.emit(\"disconnect\", t), i(t);\n      }), e.socket.on(\"data\", function (t) {\n        e.receiveRaw(t.toString());\n      }), e.socket.on(\"close\", function () {\n        e._connected = !1, e._connecting = !1, e._registered = !1, e.emit(\"disconnect\");\n      });\n    });\n  }, p._connectInBrowser = function () {\n    var e = this,\n        t = this.options.secure ? \"wss://irc-ws.chat.twitch.tv:443\" : \"ws://irc-ws.chat.twitch.tv:80\";\n    return new Promise(function (r, n) {\n      e._connecting = !0, e.socket = new WebSocket(t), e.socket.onopen = function () {\n        e._connected = !0, e._connecting = !1, e.emit(\"connect\"), r();\n      }, e.socket.onmessage = function (t) {\n        return e.receiveRaw(t.data);\n      }, e.socket.onerror = function () {}, e.socket.onclose = function (t) {\n        var r = t.wasClean,\n            s = t.code,\n            a = t.reason;\n        if (e.socket = null, e._connected = !1, e._connecting = !1, e._registered = !1, r) e.emit(\"disconnect\");else {\n          var i = new Error(\"[\" + s + \"] \" + a);\n          e.emit(\"disconnect\", i), n(i);\n        }\n      };\n    });\n  }, p._register = function () {\n    var e = this;\n    if (!this._connected) return Promise.reject();\n    if (this._registered) return Promise.resolve();\n    var t = this.options,\n        r = t.auth,\n        n = t.name || o(),\n        s = r ? \"oauth:\" + r : \"SCHMOOPIIE\";\n    return this.sendRaw(\"CAP REQ :twitch.tv/tags twitch.tv/commands\"), this.sendRaw(\"PASS \" + s), this.sendRaw(\"NICK \" + n), new Promise(function (t, r) {\n      var n = function r() {\n        t(), e.off(\"register\", r);\n      };\n\n      e.on(\"register\", n), setTimeout(function () {\n        r(), e.off(\"register\", n);\n      }, 1e4);\n    });\n  }, p._updateGlobalUserState = function (e) {\n    this.globalUserState = a({}, this.globalUserState, {}, e);\n  }, p._updateUserState = function (e, t) {\n    var r;\n    this.channels = a({}, this.channels, ((r = {})[e] = a({}, this.channels[e], {\n      userState: t\n    }), r));\n  }, p._updateRoomState = function (e, t) {\n    var r;\n    this.channels = a({}, this.channels, ((r = {})[e] = a({}, this.channels[e], {\n      roomState: t\n    }), r));\n  }, (l = [{\n    key: \"connected\",\n    get: function get() {\n      return this._connected;\n    }\n  }, {\n    key: \"connecting\",\n    get: function get() {\n      return this._connecting;\n    }\n  }, {\n    key: \"registered\",\n    get: function get() {\n      return this._registered;\n    }\n  }]) && function (e, t) {\n    for (var r = 0; r < t.length; r++) {\n      var n = t[r];\n      n.enumerable = n.enumerable || !1, n.configurable = !0, \"value\" in n && (n.writable = !0), Object.defineProperty(e, n.key, n);\n    }\n  }(g.prototype, l), g;\n}(n.EventEmitter);\n\n(R = exports.UserNoticeType || (exports.UserNoticeType = {})).sub = \"sub\", R.resub = \"resub\", R.subgift = \"subgift\", R.anonsubgift = \"anonsubgift\", R.submysterygift = \"submysterygift\", R.giftpaidupgrade = \"giftpaidupgrade\", R.rewardgift = \"rewardgift\", R.anongiftpaidupgrade = \"anongiftpaidupgrade\", R.raid = \"raid\", R.unraid = \"unraid\", R.ritual = \"ritual\", R.bitsbadgetier = \"bitsbadgetier\", exports.Client = P, exports.getChannelFromMessage = u, exports.getIsAction = m, exports.getRandomUsername = o, exports.isNode = d, exports.normalizeActionMessage = c, exports.parseMessageTags = v;","const isAuthRedirect = (hash) => hash.startsWith('#access_token=');\n\nexport default isAuthRedirect;\n","export const TWITCH_API_AUTH_BASE = 'https://id.twitch.tv/oauth2/authorize';\n\nexport const TWITCH_API_CLIENT_ID = process.env.REACT_APP_TWITCH_API_CLIENT_ID;\nexport const TWITCH_API_REDIRECT_URI =\n  process.env.REACT_APP_TWITCH_API_REDIRECT_URI;\n\nexport const CHANNEL_MESSAGES_LIMIT = 500;\nexport const STORE_USERS_LIMIT = 500;\n\nexport const API_REQUESTS_TIMEOUT = 10000;\n\nexport const MESSAGE_TYPES = {\n  MESSAGE: 'MESSAGE',\n  NOTICE_MESSAGE: 'NOTICE_MESSAGE',\n  USER_NOTICE_MESSAGE: 'USER_NOTICE_MESSAGE',\n};\n\nexport const SUGGESTION_TYPES = {\n  users: {\n    name: 'users',\n    limit: 5,\n    regex: /^@([\\w\\d_]*)$/,\n  },\n  emotes: {\n    name: 'emotes',\n    limit: 10,\n    regex: /^:([\\w\\d_]{2,})$/,\n  },\n};\n\nexport const STORE_FLAGS = {\n  DEFAULT: {\n    isLoading: false,\n    isLoaded: false,\n    isError: false,\n    error: null,\n  },\n  REQUEST: {\n    isLoading: true,\n    isLoaded: false,\n    isError: false,\n    error: null,\n  },\n  SUCCESS: {\n    isLoading: false,\n    isLoaded: true,\n    isError: false,\n    error: null,\n  },\n  FAILURE: {\n    isLoading: false,\n    isLoaded: false,\n    isError: true,\n  },\n};\n\nexport const NOTICE_MESSAGE_TAGS = [\n  'msg_banned',\n  'msg_bad_characters',\n  'msg_channel_blocked',\n  'msg_channel_suspended',\n  'msg_duplicate',\n  'msg_emoteonly',\n  'msg_facebook',\n  'msg_followersonly',\n  'msg_followersonly_followed',\n  'msg_followersonly_zero',\n  'msg_r9k',\n  'msg_ratelimit',\n  'msg_rejected',\n  'msg_rejected_mandatory',\n  'msg_room_not_found',\n  'msg_slowmode',\n  'msg_subsonly',\n  'msg_suspended',\n  'msg_timedout',\n  'msg_verified_email',\n];\n","const fetchRequest = async (url, options = {}) => {\n  let fetchOptions = { ...options };\n\n  if (options.timeout) {\n    const controller = new AbortController();\n    delete fetchOptions.timeout;\n    fetchOptions = { ...fetchOptions, signal: controller.signal };\n    setTimeout(() => controller.abort(), options.timeout);\n  }\n\n  const response = await fetch(url, fetchOptions);\n\n  const body = await response.json();\n\n  if (!response.ok) {\n    const error = Error(response.statusText);\n    error.data = body;\n    throw error;\n  }\n\n  return body;\n};\n\nexport default fetchRequest;\n","import fetchRequest from 'utils/fetchRequest';\nimport { API_REQUESTS_TIMEOUT } from 'utils/constants';\n\nconst TWITCH_API_HELIX = 'https://api.twitch.tv/helix';\nconst TWITCH_API_KRAKEN = 'https://api.twitch.tv/kraken';\n\nconst getHelixHeaders = () => ({\n  Authorization: `Bearer ${localStorage.accessToken}`,\n});\n\nconst getKrakenHeaders = () => ({\n  Accept: 'application/vnd.twitchtv.v5+json',\n  'Client-ID': process.env.REACT_APP_TWITCH_API_CLIENT_ID,\n  Authorization: `OAuth ${localStorage.accessToken}`,\n});\n\nconst apiRequest = (url, options) =>\n  fetchRequest(url, { ...options, timeout: API_REQUESTS_TIMEOUT });\n\nconst apiRequestHelix = (url, options) =>\n  apiRequest(`${TWITCH_API_HELIX}${url}`, {\n    ...options,\n    headers: getHelixHeaders(),\n  });\n\nconst apiRequestKraken = (url, options) =>\n  apiRequest(`${TWITCH_API_KRAKEN}${url}`, {\n    ...options,\n    headers: getKrakenHeaders(),\n  });\n\nexport const fetchUser = (id) => apiRequestHelix(`/users?id=${id}`);\n\nexport const fetchTwitchEmotesBySets = (userId) =>\n  apiRequestKraken(`/users/${userId}/emotes`);\n\nexport const fetchBttvGlobalEmotes = () =>\n  apiRequest('https://api.betterttv.net/3/cached/emotes/global');\nexport const fetchBttvChannelEmotes = (channelId) =>\n  apiRequest(`https://api.betterttv.net/3/cached/users/twitch/${channelId}`);\n\nexport const fetchFfzGlobalEmotes = () =>\n  apiRequest('https://api.frankerfacez.com/v1/set/global');\nexport const fetchFfzChannelEmotes = (channelId) =>\n  apiRequest(`https://api.frankerfacez.com/v1/room/id/${channelId}`);\n\nexport const fetchRecentMessages = (channel) =>\n  apiRequest(\n    `https://recent-messages.robotty.de/api/v2/recent-messages/${channel}?clearchatToNotice=true`,\n  );\n\nexport const fetchGlobalBadges = (language = 'en') =>\n  apiRequest(\n    `https://badges.twitch.tv/v1/badges/global/display?language=${language}`,\n  );\nexport const fetchChannelBadges = (channelId, language = 'en') =>\n  apiRequest(\n    `https://badges.twitch.tv/v1/badges/channels/${channelId}/display?language=${language}`,\n  );\n\nexport const fetchBlockedUsers = (userId) =>\n  apiRequestKraken(`/users/${userId}/blocks`);\n","import { createAction, handleActions } from 'redux-actions';\nimport * as R from 'ramda';\n\nimport { STORE_FLAGS } from 'utils/constants';\nimport { fetchUser as apiFetchUser } from 'utils/api';\n\nconst defaultState = {\n  isAuthReady: false,\n  isAuth: false,\n  user: {\n    ...STORE_FLAGS.default,\n    id: null,\n    login: null,\n    displayName: null,\n  },\n};\n\nexport const setAuth = createAction('SET_AUTH');\nconst fetchUserRequest = createAction('FETCH_USER_REQUEST');\nconst fetchUserSuccess = createAction('FETCH_USER_SUCCESS');\nconst fetchUserFailure = createAction('FETCH_USER_FAILURE');\n\nexport const fetchUser = (id) => async (dispatch) => {\n  dispatch(fetchUserRequest());\n\n  try {\n    const response = await apiFetchUser(id);\n    const { login, display_name: displayName } = response.data[0];\n    const user = { id, login, displayName };\n    localStorage.setItem('user', JSON.stringify(user));\n\n    dispatch(fetchUserSuccess(user));\n  } catch (e) {\n    dispatch(fetchUserFailure({ error: e.message }));\n  }\n};\n\nconst handleSetAuth = (state, { payload }) => R.mergeDeepRight(state, payload);\n\nconst handleFetchUser = {\n  [fetchUserRequest]: (state) =>\n    R.mergeDeepRight(state, {\n      isAuthReady: false,\n      isAuth: false,\n      user: { ...STORE_FLAGS.REQUEST },\n    }),\n  [fetchUserSuccess]: (state, { payload }) =>\n    R.mergeDeepRight(state, {\n      isAuthReady: true,\n      isAuth: true,\n      user: {\n        ...STORE_FLAGS.SUCCESS,\n        ...payload,\n      },\n    }),\n  [fetchUserFailure]: (state, { payload }) =>\n    R.mergeDeepRight(state, {\n      isAuthReady: true,\n      isAuth: false,\n      user: {\n        ...STORE_FLAGS.FAILURE,\n        error: payload.error,\n      },\n    }),\n};\n\nconst reducer = handleActions(\n  {\n    [setAuth]: handleSetAuth,\n    ...handleFetchUser,\n  },\n  defaultState,\n);\n\nexport default reducer;\n","import { createActions, handleActions } from 'redux-actions';\nimport * as R from 'ramda';\n\nimport {\n  fetchGlobalBadges as apiFetchGlobalBadges,\n  fetchChannelBadges as apiFetchChannelBadges,\n} from 'utils/api';\nimport { STORE_FLAGS } from 'utils/constants';\n\nconst defaultState = {\n  global: {\n    ...STORE_FLAGS.DEFAULT,\n    items: {},\n  },\n  channels: {\n    // [channel]: {\n    //   isLoading: false,\n    //   isLoaded: false,\n    //   isError: false,\n    //   error: null,\n    //   items: {},\n    // },\n  },\n};\n\nconst {\n  fetchGlobalBadgesRequest,\n  fetchGlobalBadgesSuccess,\n  fetchGlobalBadgesFailure,\n  fetchChannelBadgesRequest,\n  fetchChannelBadgesSuccess,\n  fetchChannelBadgesFailure,\n} = createActions(\n  'FETCH_GLOBAL_BADGES_REQUEST',\n  'FETCH_GLOBAL_BADGES_SUCCESS',\n  'FETCH_GLOBAL_BADGES_FAILURE',\n  'FETCH_CHANNEL_BADGES_REQUEST',\n  'FETCH_CHANNEL_BADGES_SUCCESS',\n  'FETCH_CHANNEL_BADGES_FAILURE',\n);\n\nconst parseBadges = R.pathOr({}, ['badge_sets']);\n\nexport const fetchGlobalBadges = () => async (dispatch) => {\n  dispatch(fetchGlobalBadgesRequest());\n\n  try {\n    const response = await apiFetchGlobalBadges();\n    const data = { items: parseBadges(response) };\n\n    dispatch(fetchGlobalBadgesSuccess(data));\n  } catch (e) {\n    dispatch(fetchGlobalBadgesFailure({ error: e.message }));\n  }\n};\n\nexport const fetchChannelBadges = (channelId, channel) => async (dispatch) => {\n  dispatch(fetchChannelBadgesRequest({ channel }));\n\n  try {\n    const response = await apiFetchChannelBadges(channelId);\n    const data = {\n      channel,\n      items: parseBadges(response),\n    };\n\n    dispatch(fetchChannelBadgesSuccess(data));\n  } catch (e) {\n    dispatch(fetchChannelBadgesFailure({ channel, error: e.message }));\n  }\n};\n\nconst handleFetchGlobalBadges = {\n  [fetchGlobalBadgesRequest]: (state) =>\n    R.mergeDeepRight(state, {\n      global: { ...STORE_FLAGS.REQUEST },\n    }),\n  [fetchGlobalBadgesSuccess]: (state, { payload }) =>\n    R.mergeDeepRight(state, {\n      global: { ...STORE_FLAGS.SUCCESS, items: payload.items },\n    }),\n  [fetchGlobalBadgesFailure]: (state, { payload }) =>\n    R.mergeDeepRight(state, {\n      global: { ...STORE_FLAGS.FAILURE, error: payload.error },\n    }),\n};\n\nconst handleFetchChannelBadges = {\n  [fetchChannelBadgesRequest]: (state, { payload }) =>\n    R.mergeDeepRight(state, {\n      channels: {\n        [payload.channel]: { ...STORE_FLAGS.REQUEST },\n      },\n    }),\n  [fetchChannelBadgesSuccess]: (state, { payload }) =>\n    R.mergeDeepRight(state, {\n      channels: {\n        [payload.channel]: { ...STORE_FLAGS.SUCCESS, items: payload.items },\n      },\n    }),\n  [fetchChannelBadgesFailure]: (state, { payload }) =>\n    R.mergeDeepRight(state, {\n      channels: {\n        [payload.channel]: { ...STORE_FLAGS.FAILURE, error: payload.error },\n      },\n    }),\n};\n\nconst reducer = handleActions(\n  {\n    ...handleFetchGlobalBadges,\n    ...handleFetchChannelBadges,\n  },\n  defaultState,\n);\n\nexport default reducer;\n","import { createActions, handleActions } from 'redux-actions';\nimport * as R from 'ramda';\n\nimport { fetchBlockedUsers as apiFetchBlockedUsers } from 'utils/api';\nimport { STORE_FLAGS } from 'utils/constants';\n\nconst defaultState = {\n  currentChannel: null,\n  isConnected: false,\n  globalState: {},\n  channels: {\n    // [channel]: {\n    //   userState: {},\n    //   roomState: {},\n    // }\n  },\n  blockedUsers: {\n    ...STORE_FLAGS.DEFAULT,\n    items: [],\n  },\n};\n\nexport const {\n  setCurrentChannel,\n  setIsConnected,\n  updateGlobalUserState,\n  updateUserState,\n  updateRoomState,\n  removeChannel,\n} = createActions(\n  'SET_CURRENT_CHANNEL',\n  'SET_IS_CONNECTED',\n  'UPDATE_GLOBAL_USER_STATE',\n  'UPDATE_USER_STATE',\n  'UPDATE_ROOM_STATE',\n  'REMOVE_CHANNEL',\n);\n\nconst {\n  fetchBlockedUsersRequest,\n  fetchBlockedUsersSuccess,\n  fetchBlockedUsersFailure,\n} = createActions(\n  'FETCH_BLOCKED_USERS_REQUEST',\n  'FETCH_BLOCKED_USERS_SUCCESS',\n  'FETCH_BLOCKED_USERS_FAILURE',\n);\n\nconst parseBlockedUsers = R.pipe(\n  R.prop('blocks'),\n  R.map(R.path(['user', 'name'])),\n);\n\nexport const fetchBlockedUsers = (userId) => async (dispatch) => {\n  dispatch(fetchBlockedUsersRequest());\n  try {\n    const response = await apiFetchBlockedUsers(userId);\n\n    dispatch(fetchBlockedUsersSuccess({ items: parseBlockedUsers(response) }));\n  } catch (e) {\n    dispatch(fetchBlockedUsersFailure({ error: e.message }));\n  }\n};\n\nconst handleSetCurrentChannel = (state, { payload }) => ({\n  ...state,\n  currentChannel: payload,\n});\nconst handleSetIsConnected = (state, { payload }) => ({\n  ...state,\n  isConnected: payload,\n});\nconst handleUpdateGlobalUserState = (state, { payload: { tags } }) => ({\n  ...state,\n  globalState: { ...state.globalState, ...tags },\n});\nconst handleUpdateUserState = (state, { payload: { channel, tags } }) =>\n  R.mergeDeepRight(state, {\n    channels: {\n      [channel]: { userState: tags },\n    },\n  });\nconst handleUpdateRoomState = (state, { payload: { channel, tags } }) =>\n  R.mergeDeepRight(state, {\n    channels: {\n      [channel]: { roomState: tags },\n    },\n  });\nconst handleRemoveChannel = (state, { payload: channel }) => ({\n  ...state,\n  channels: R.omit([channel], state.channels),\n});\nconst handleFetchBlockUsers = {\n  [fetchBlockedUsersRequest]: (state) =>\n    R.mergeDeepRight(state, {\n      blockedUsers: { ...STORE_FLAGS.REQUEST },\n    }),\n  [fetchBlockedUsersSuccess]: (state, { payload }) =>\n    R.mergeDeepRight(state, {\n      blockedUsers: { ...STORE_FLAGS.SUCCESS, items: payload.items },\n    }),\n  [fetchBlockedUsersFailure]: (state, { payload }) =>\n    R.mergeDeepRight(state, {\n      blockedUsers: { ...STORE_FLAGS.FAILURE, error: payload.error },\n    }),\n};\n\nconst reducer = handleActions(\n  {\n    [setCurrentChannel]: handleSetCurrentChannel,\n    [setIsConnected]: handleSetIsConnected,\n    [updateGlobalUserState]: handleUpdateGlobalUserState,\n    [updateUserState]: handleUpdateUserState,\n    [updateRoomState]: handleUpdateRoomState,\n    [removeChannel]: handleRemoveChannel,\n    ...handleFetchBlockUsers,\n  },\n  defaultState,\n);\n\nexport default reducer;\n","import { createActions, handleActions } from 'redux-actions';\n\nimport { STORE_FLAGS } from 'utils/constants';\nimport { fetchTwitchEmotesBySets } from 'utils/api';\n\nconst defaultState = {\n  ...STORE_FLAGS.DEFAULT,\n  items: {\n    // [setId]: [\n    //   {\n    //     code: \"PartyPoro\",\n    //     id: 300949540,\n    //   },\n    // ],\n  },\n};\n\nconst {\n  fetchTwitchEmotesRequest,\n  fetchTwitchEmotesSuccess,\n  fetchTwitchEmotesFailure,\n} = createActions(\n  'FETCH_TWITCH_EMOTES_REQUEST',\n  'FETCH_TWITCH_EMOTES_SUCCESS',\n  'FETCH_TWITCH_EMOTES_FAILURE',\n);\n\nexport const fetchTwitchEmotes = (userId) => async (dispatch) => {\n  dispatch(fetchTwitchEmotesRequest);\n\n  try {\n    const response = await fetchTwitchEmotesBySets(userId);\n    const data = { items: response.emoticon_sets };\n\n    dispatch(fetchTwitchEmotesSuccess(data));\n  } catch (e) {\n    dispatch(fetchTwitchEmotesFailure({ error: e.message }));\n  }\n};\n\nconst handleFetchTwitchEmotes = {\n  [fetchTwitchEmotesRequest]: (state) => ({\n    ...state,\n    ...STORE_FLAGS.REQUEST,\n  }),\n  [fetchTwitchEmotesSuccess]: (state, { payload }) => ({\n    ...state,\n    ...STORE_FLAGS.SUCCESS,\n    items: payload.items,\n  }),\n  [fetchTwitchEmotesFailure]: (state, { payload }) => ({\n    ...state,\n    ...STORE_FLAGS.FAILURE,\n    error: payload.error,\n  }),\n};\n\nconst reducer = handleActions(handleFetchTwitchEmotes, defaultState);\n\nexport default reducer;\n","import { createActions, handleActions } from 'redux-actions';\nimport * as R from 'ramda';\n\nimport {\n  fetchBttvGlobalEmotes as apiFetchBttvGlobalEmotes,\n  fetchBttvChannelEmotes as apiFetchBttvChannelEmotes,\n} from 'utils/api';\nimport { STORE_FLAGS } from 'utils/constants';\n\nconst defaultState = {\n  global: {\n    isLoading: false,\n    isLoaded: false,\n    isError: false,\n    error: null,\n    items: [],\n  },\n  channels: {\n    // [channel]: {\n    //   isLoading: false,\n    //   isLoaded: false,\n    //   isError: false,\n    //   error: null,\n    //   items: [],\n    // },\n  },\n};\n\nconst {\n  fetchBttvGlobalEmotesRequest,\n  fetchBttvGlobalEmotesSuccess,\n  fetchBttvGlobalEmotesFailure,\n  fetchBttvChannelEmotesRequest,\n  fetchBttvChannelEmotesSuccess,\n  fetchBttvChannelEmotesFailure,\n} = createActions(\n  'FETCH_BTTV_GLOBAL_EMOTES_REQUEST',\n  'FETCH_BTTV_GLOBAL_EMOTES_SUCCESS',\n  'FETCH_BTTV_GLOBAL_EMOTES_FAILURE',\n  'FETCH_BTTV_CHANNEL_EMOTES_REQUEST',\n  'FETCH_BTTV_CHANNEL_EMOTES_SUCCESS',\n  'FETCH_BTTV_CHANNEL_EMOTES_FAILURE',\n);\n\nconst parseBttvChannelEmotes = ({ channelEmotes, sharedEmotes }) => [\n  ...channelEmotes,\n  ...sharedEmotes,\n];\n\nexport const fetchBttvGlobalEmotes = () => async (dispatch) => {\n  dispatch(fetchBttvGlobalEmotesRequest());\n\n  try {\n    const items = await apiFetchBttvGlobalEmotes();\n    const data = { items };\n\n    dispatch(fetchBttvGlobalEmotesSuccess(data));\n  } catch (e) {\n    dispatch(fetchBttvGlobalEmotesFailure({ error: e.message }));\n  }\n};\n\nexport const fetchBttvChannelEmotes = (channelId, channel) => async (\n  dispatch,\n) => {\n  dispatch(fetchBttvChannelEmotesRequest({ channel }));\n\n  try {\n    const response = await apiFetchBttvChannelEmotes(channelId);\n    const data = {\n      channel,\n      items: parseBttvChannelEmotes(response),\n    };\n\n    dispatch(fetchBttvChannelEmotesSuccess(data));\n  } catch (e) {\n    dispatch(fetchBttvChannelEmotesFailure({ channel, error: e.message }));\n  }\n};\n\nconst handleFetchBttvGlobalEmotes = {\n  [fetchBttvGlobalEmotesRequest]: (state) =>\n    R.mergeDeepRight(state, {\n      global: { ...STORE_FLAGS.REQUEST },\n    }),\n  [fetchBttvGlobalEmotesSuccess]: (state, { payload }) =>\n    R.mergeDeepRight(state, {\n      global: { ...STORE_FLAGS.SUCCESS, items: payload.items },\n    }),\n  [fetchBttvGlobalEmotesFailure]: (state, { payload }) =>\n    R.mergeDeepRight(state, {\n      global: { ...STORE_FLAGS.FAILURE, error: payload.error },\n    }),\n};\n\nconst handleFetchBttvChannelEmotes = {\n  [fetchBttvChannelEmotesRequest]: (state, { payload }) =>\n    R.mergeDeepRight(state, {\n      channels: {\n        [payload.channel]: { ...STORE_FLAGS.REQUEST },\n      },\n    }),\n  [fetchBttvChannelEmotesSuccess]: (state, { payload }) =>\n    R.mergeDeepRight(state, {\n      channels: {\n        [payload.channel]: { ...STORE_FLAGS.SUCCESS, items: payload.items },\n      },\n    }),\n  [fetchBttvChannelEmotesFailure]: (state, { payload }) =>\n    R.mergeDeepRight(state, {\n      channels: {\n        [payload.channel]: { ...STORE_FLAGS.FAILURE, error: payload.error },\n      },\n    }),\n};\n\nconst reducer = handleActions(\n  {\n    ...handleFetchBttvGlobalEmotes,\n    ...handleFetchBttvChannelEmotes,\n  },\n  defaultState,\n);\n\nexport default reducer;\n","import { createActions, handleActions } from 'redux-actions';\nimport * as R from 'ramda';\n\nimport {\n  fetchFfzGlobalEmotes as apiFetchFfzGlobalEmotes,\n  fetchFfzChannelEmotes as apiFetchFfzChannelEmotes,\n} from 'utils/api';\nimport { STORE_FLAGS } from 'utils/constants';\n\nconst defaultState = {\n  global: {\n    isLoading: false,\n    isLoaded: false,\n    isError: false,\n    error: null,\n    items: [],\n  },\n  channels: {\n    // [channel]: {\n    //   isLoading: false,\n    //   isLoaded: false,\n    //   isError: false,\n    //   error: null,\n    //   items: [],\n    // },\n  },\n};\n\nconst {\n  fetchFfzGlobalEmotesRequest,\n  fetchFfzGlobalEmotesSuccess,\n  fetchFfzGlobalEmotesFailure,\n  fetchFfzChannelEmotesRequest,\n  fetchFfzChannelEmotesSuccess,\n  fetchFfzChannelEmotesFailure,\n} = createActions(\n  'FETCH_FFZ_GLOBAL_EMOTES_REQUEST',\n  'FETCH_FFZ_GLOBAL_EMOTES_SUCCESS',\n  'FETCH_FFZ_GLOBAL_EMOTES_FAILURE',\n  'FETCH_FFZ_CHANNEL_EMOTES_REQUEST',\n  'FETCH_FFZ_CHANNEL_EMOTES_SUCCESS',\n  'FETCH_FFZ_CHANNEL_EMOTES_FAILURE',\n);\n\nconst parseFfzGlobalEmotes = ({ default_sets: defaultSets, sets }) =>\n  R.pipe(\n    R.pick(defaultSets),\n    R.values,\n    R.map(R.propOr([], 'emoticons')),\n    R.flatten,\n  )(sets);\n\nconst parseFfzChannelEmotes = R.pipe(\n  R.pathOr({}, ['sets']),\n  R.values,\n  R.map(R.pathOr([], ['emoticons'])),\n  R.flatten,\n);\n\nexport const fetchFfzGlobalEmotes = () => async (dispatch) => {\n  dispatch(fetchFfzGlobalEmotesRequest());\n\n  try {\n    const response = await apiFetchFfzGlobalEmotes();\n    const data = { items: parseFfzGlobalEmotes(response) };\n\n    dispatch(fetchFfzGlobalEmotesSuccess(data));\n  } catch (e) {\n    dispatch(fetchFfzGlobalEmotesFailure({ error: e.message }));\n  }\n};\n\nexport const fetchFfzChannelEmotes = (channelId, channel) => async (\n  dispatch,\n) => {\n  dispatch(fetchFfzChannelEmotesRequest({ channel }));\n\n  try {\n    const response = await apiFetchFfzChannelEmotes(channelId);\n    const data = {\n      channel,\n      items: parseFfzChannelEmotes(response),\n    };\n\n    dispatch(fetchFfzChannelEmotesSuccess(data));\n  } catch (e) {\n    dispatch(fetchFfzChannelEmotesFailure({ channel, error: e.message }));\n  }\n};\n\nconst handleFetchFfzGlobalEmotes = {\n  [fetchFfzGlobalEmotesRequest]: (state) =>\n    R.mergeDeepRight(state, {\n      global: { ...STORE_FLAGS.REQUEST },\n    }),\n  [fetchFfzGlobalEmotesSuccess]: (state, { payload }) =>\n    R.mergeDeepRight(state, {\n      global: { ...STORE_FLAGS.SUCCESS, items: payload.items },\n    }),\n  [fetchFfzGlobalEmotesFailure]: (state, { payload }) =>\n    R.mergeDeepRight(state, {\n      global: { ...STORE_FLAGS.FAILURE, error: payload.error },\n    }),\n};\n\nconst handleFetchFfzChannelEmotes = {\n  [fetchFfzChannelEmotesRequest]: (state, { payload }) =>\n    R.mergeDeepRight(state, {\n      channels: {\n        [payload.channel]: { ...STORE_FLAGS.REQUEST },\n      },\n    }),\n  [fetchFfzChannelEmotesSuccess]: (state, { payload }) =>\n    R.mergeDeepRight(state, {\n      channels: {\n        [payload.channel]: { ...STORE_FLAGS.SUCCESS, items: payload.items },\n      },\n    }),\n  [fetchFfzChannelEmotesFailure]: (state, { payload }) =>\n    R.mergeDeepRight(state, {\n      channels: {\n        [payload.channel]: { ...STORE_FLAGS.FAILURE, error: payload.error },\n      },\n    }),\n};\n\nconst reducer = handleActions(\n  {\n    ...handleFetchFfzGlobalEmotes,\n    ...handleFetchFfzChannelEmotes,\n  },\n  defaultState,\n);\n\nexport default reducer;\n","import { combineReducers } from 'redux';\n\nimport twitch from './twitch';\nimport bttv from './bttv';\nimport ffz from './ffz';\n\nexport default combineReducers({\n  twitch,\n  bttv,\n  ffz,\n});\n","// https://regex101.com/r/cpaNXh/1\nconst isStartsWithProtocolRegex = /^(?:(?:[a-z]+:)?\\/\\/)/;\n\nconst normalizeHref = (href) =>\n  isStartsWithProtocolRegex.test(href) ? href : `//${href}`;\n\nexport default normalizeHref;\n","import pt from 'prop-types';\nimport { parse as twemojiParser } from 'twemoji-parser';\nimport emojilib from 'emojilib/emojis';\nimport urlRegex from 'url-regex';\nimport * as R from 'ramda';\n\nimport normalizeHref from 'utils/normalizeHref';\n\nconst TWITCH_EMOTES_CDN = '//static-cdn.jtvnw.net/emoticons/v1';\nconst BTTV_EMOTES_CDN = '//cdn.betterttv.net/emote';\n\nconst mentionRegex = /^@([\\p{Letter}\\p{Number}_]+)/u;\nconst linkRegex = urlRegex({ strict: false });\n\nconst normalizeEmotesFromTags = R.pipe(\n  R.toPairs,\n  R.map(([id, value]) => R.map((v) => ({ id, ...v }), value)),\n  R.flatten,\n);\n\nconst getFfzSrcSet = R.pipe(\n  R.toPairs,\n  R.map(([dpi, url]) => `${url} ${dpi}x`),\n  R.join(', '),\n);\n\nexport const createTwitchEmote = ({ id, code }) => ({\n  type: 'twitch-emote',\n  alt: code,\n  src: `${TWITCH_EMOTES_CDN}/${id}/1.0`,\n  srcSet: `${TWITCH_EMOTES_CDN}/${id}/1.0 1x, ${TWITCH_EMOTES_CDN}/${id}/2.0 2x, ${TWITCH_EMOTES_CDN}/${id}/3.0 4x`,\n});\nexport const createBttvEmote = ({ id, code }) => ({\n  type: 'bttv-emote',\n  alt: code,\n  src: `${BTTV_EMOTES_CDN}/${id}/1x`,\n  srcSet: `${BTTV_EMOTES_CDN}/${id}/2x 2x, ${BTTV_EMOTES_CDN}/${id}/3x 4x`,\n});\nexport const createFfzEmote = ({ name, urls }) => ({\n  type: 'ffz-emote',\n  alt: name,\n  src: urls[1],\n  srcSet: getFfzSrcSet(urls),\n});\nexport const createEmoji = (alt, src) => ({\n  type: 'emoji',\n  alt: `:${alt}:`,\n  src,\n  srcSet: null,\n});\nexport const createMention = (text, target) => ({\n  type: 'mention',\n  text,\n  target,\n});\nexport const createLink = (href) => ({\n  type: 'link',\n  text: href,\n  href: normalizeHref(href),\n});\n\nexport const twitchEmoteType = pt.shape({\n  type: pt.oneOf(['twitch-emote']).isRequired,\n  alt: pt.string.isRequired,\n  src: pt.string.isRequired,\n  srcSet: pt.string.isRequired,\n});\nexport const bttvEmoteType = pt.shape({\n  type: pt.oneOf(['bttv-emote']).isRequired,\n  alt: pt.string.isRequired,\n  src: pt.string.isRequired,\n  srcSet: pt.string.isRequired,\n});\nexport const ffzEmoteType = pt.shape({\n  type: pt.oneOf(['ffz-emote']).isRequired,\n  alt: pt.string.isRequired,\n  src: pt.string.isRequired,\n  srcSet: pt.string.isRequired,\n});\nexport const emojiType = pt.shape({\n  type: pt.oneOf(['emoji']).isRequired,\n  alt: pt.string.isRequired,\n  src: pt.string.isRequired,\n  srcSet: pt.string,\n});\nexport const mentionType = pt.shape({\n  type: pt.oneOf(['mention']).isRequired,\n  text: pt.string.isRequired,\n  target: pt.string.isRequired,\n});\nexport const linkType = pt.shape({\n  type: pt.oneOf(['link']).isRequired,\n  text: pt.string.isRequired,\n  href: pt.string.isRequired,\n});\n\nconst regexMap = {\n  4: '>\\\\(', // '\\\\&gt\\\\;\\\\('\n  9: '<3', // '\\\\&lt\\\\;3'\n};\n\nconst findTwitchEmote = (name, items) =>\n  R.find(({ id, code }) => {\n    // 1-14 - match by regex\n    if (id >= 1 && id <= 14) {\n      const regexString = regexMap[id] || code;\n      return RegExp(`^${regexString}$`).test(name);\n    }\n\n    return name === code;\n  }, items);\nconst findTwitchEmoteInSets = (name, sets) => {\n  // eslint-disable-next-line no-restricted-syntax\n  for (const set of Object.values(sets)) {\n    const result = findTwitchEmote(name, set);\n\n    if (result) return result;\n  }\n\n  return null;\n};\n\nconst findBttvEmote = (name, items) => R.find(R.propEq('code', name), items);\nconst findFfzEmote = (name, items) => R.find(R.propEq('name', name), items);\nconst findEmoji = (char) =>\n  R.pipe(R.filter(R.propEq('char', char)), R.keys, R.head)(emojilib);\n\nconst findEntity = (word, emotes, { parseTwitch = false }) => {\n  if (!emotes) return null;\n\n  const {\n    twitchGlobal,\n    twitchUser,\n    bttvGlobal,\n    bttvChannel,\n    ffzGlobal,\n    ffzChannel,\n  } = emotes;\n\n  if (parseTwitch) {\n    const twitchEmote =\n      findTwitchEmoteInSets(word, twitchGlobal) ||\n      findTwitchEmoteInSets(word, twitchUser);\n\n    if (twitchEmote) {\n      return createTwitchEmote({ id: twitchEmote.id, code: word });\n    }\n  }\n\n  const bttvEmote =\n    findBttvEmote(word, bttvGlobal) || findBttvEmote(word, bttvChannel);\n\n  if (bttvEmote) {\n    return createBttvEmote(bttvEmote);\n  }\n\n  const ffzEmote =\n    findFfzEmote(word, ffzGlobal) || findFfzEmote(word, ffzChannel);\n\n  if (ffzEmote) {\n    return createFfzEmote(ffzEmote);\n  }\n\n  // Don't parse two or more emotes without spaces between\n  // Don't parse emote if it's not in the emojilib package\n  const emojiMatch = twemojiParser(word, { assetType: 'png' });\n\n  if (\n    emojiMatch &&\n    emojiMatch.length === 1 &&\n    emojiMatch[0].text.length === word.length\n  ) {\n    const emoji = findEmoji(word);\n\n    if (emoji) {\n      const [{ url }] = emojiMatch;\n\n      return createEmoji(emoji, url);\n    }\n  }\n\n  const mentionMatch = word.match(mentionRegex);\n\n  if (mentionMatch) {\n    const [text, target] = mentionMatch;\n\n    return [\n      createMention(text, target.toLowerCase()),\n      word.length - text.length,\n    ];\n  }\n\n  const linkMatch = word.match(linkRegex);\n\n  if (linkMatch && linkMatch[0].length === word.length) {\n    return createLink(word);\n  }\n\n  return null;\n};\n\nconst formatMessage = (message, embeddedEmotes, emotes) => {\n  // If the message was sent by the current user, there is no embedded emotes\n  // So we need to parse twitch emotes manually\n\n  const isOwnMessage = embeddedEmotes === undefined || embeddedEmotes === null;\n  const hasEmbeddedEmotes =\n    embeddedEmotes && Object.keys(embeddedEmotes).length > 0;\n  const normalizedEmbeddedEmotes = normalizeEmotesFromTags(embeddedEmotes);\n\n  const result = [];\n  let offset = 0;\n  // Before that offset all content was added to the result array\n  let arrayOffset = 0;\n\n  // Check every word. From offset to the next space index\n  do {\n    const spaceIndex = message.indexOf(' ', offset + 1);\n\n    const isStart = offset === 0;\n    const isEnd = spaceIndex === -1;\n\n    const startIndex = isStart ? offset : offset + 1;\n    const endIndex = isEnd ? message.length : spaceIndex;\n\n    const word = message.substring(startIndex, endIndex);\n\n    if (word) {\n      let entity = null;\n\n      // Check embedded twitch emotes\n      if (hasEmbeddedEmotes) {\n        const embeddedEmote = R.find(\n          R.propEq('start', startIndex),\n          normalizedEmbeddedEmotes,\n        );\n\n        if (embeddedEmote) {\n          entity = createTwitchEmote({ id: embeddedEmote.id, code: word });\n        }\n      }\n\n      // Check other entities\n      if (!entity) {\n        entity = findEntity(word, emotes, { parseTwitch: isOwnMessage });\n      }\n\n      if (entity) {\n        // Push all text before this entity\n        if (arrayOffset !== startIndex) {\n          const textBefore = message.substring(arrayOffset, startIndex);\n          result.push(textBefore);\n        }\n\n        // If entity it's an array it means entity may be not full word\n        // The second element is the difference between word length and entity length\n        if (Array.isArray(entity)) {\n          const [entityObject, difference] = entity;\n          result.push(entityObject);\n          arrayOffset = endIndex - difference;\n        } else {\n          result.push(entity);\n          arrayOffset = endIndex;\n        }\n      }\n    }\n\n    // If it's the last word and it wasn't added to the result add it now\n    if (spaceIndex === -1 && arrayOffset !== endIndex) {\n      const textAfter = message.substring(arrayOffset, endIndex);\n      result.push(textAfter);\n    }\n\n    offset = spaceIndex;\n  } while (offset !== -1);\n\n  return result;\n};\n\nexport default formatMessage;\n","import * as R from 'ramda';\n\nimport { currentChannelSelector } from 'reducers/chat/selectors';\n\nexport const globalBadgesSelector = (state) => state.badges.global.items;\nexport const channelBadgesSelector = (state) =>\n  R.pathOr(\n    {},\n    ['badges', 'channels', currentChannelSelector(state), 'items'],\n    state,\n  );\n\nexport const isGlobalBadgesLoadedSelector = (state) =>\n  state.badges.global.isLoaded || state.badges.global.isError;\n\nexport const isChannelBadgesLoadedSelector = (state) => {\n  const channel = currentChannelSelector(state);\n  return (\n    R.pathOr(false, ['badges', 'channels', channel, 'isLoaded'], state) ||\n    R.pathOr(false, ['badges', 'channels', channel, 'isError'], state)\n  );\n};\n\nexport const isBadgesLoadedSelector = (state) =>\n  isGlobalBadgesLoadedSelector(state) && isChannelBadgesLoadedSelector(state);\n","import * as R from 'ramda';\n\nconst createBadge = ({\n  title,\n  description,\n  image_url_1x: imageUrl1x,\n  image_url_2x: imageUrl2x,\n  image_url_4x: imageUrl4x,\n}) => ({\n  alt: title,\n  label: description,\n  src: imageUrl1x,\n  srcSet: `${imageUrl1x} 1x, ${imageUrl2x} 2x, ${imageUrl4x} 4x`,\n});\n\nconst createBadges = (badges, globalBadges, channelBadges) => {\n  const mapBadges = ([name, version]) => {\n    const badge =\n      R.pathOr(false, [name, 'versions', version], channelBadges) ||\n      R.pathOr(false, [name, 'versions', version], globalBadges);\n\n    return badge ? createBadge(badge) : false;\n  };\n\n  return R.pipe(R.toPairs, R.map(mapBadges), R.filter(Boolean))(badges);\n};\n\nexport default createBadges;\n","import * as R from 'ramda';\nimport { createSelector } from 'reselect';\n\nimport {\n  globalBadgesSelector,\n  channelBadgesSelector,\n} from 'reducers/badges/selectors';\nimport createBadges from 'utils/createBadges';\n\nexport const currentChannelSelector = R.pathOr('', ['chat', 'currentChannel']);\n\nexport const currentChannelIdSelector = (state) =>\n  R.pathOr(\n    null,\n    ['chat', 'channels', currentChannelSelector(state), 'roomState', 'roomId'],\n    state,\n  );\n\nexport const isConnectedSelector = (state) => state.chat.isConnected;\n\nexport const isBlockedUsersLoadedSelector = (state) =>\n  state.chat.blockedUsers.isLoaded || state.chat.blockedUsers.isError;\n\nexport const blockedUsersSelector = (state) => state.chat.blockedUsers.items;\n\nexport const userColorSelector = (state) =>\n  R.pathOr(\n    '',\n    ['chat', 'channels', currentChannelSelector(state), 'userState', 'color'],\n    state,\n  );\n\nexport const userBadgesSelector = (state) =>\n  R.pathOr(\n    {},\n    ['chat', 'channels', currentChannelSelector(state), 'userState', 'badges'],\n    state,\n  );\n\nexport const userBadgesImagesSelector = createSelector(\n  userBadgesSelector,\n  globalBadgesSelector,\n  channelBadgesSelector,\n  (userBadges, globalBadges, channelBadges) =>\n    createBadges(userBadges, globalBadges, channelBadges),\n);\n","import { createSelector } from 'reselect';\nimport * as R from 'ramda';\n\nimport {\n  createTwitchEmote,\n  createBttvEmote,\n  createFfzEmote,\n} from 'utils/formatMessage';\nimport { currentChannelSelector } from 'reducers/chat/selectors';\n\nconst createIsEmotesLoadedSelector = (type) => (state) => {\n  const channel = currentChannelSelector(state);\n  const globalLoaded =\n    state.emotes[type].global.isLoaded || state.emotes[type].global.isError;\n  const channelLoaded =\n    R.path(['emotes', type, 'channels', channel, 'isLoaded'], state) ||\n    R.path(['emotes', type, 'channels', channel, 'isError'], state);\n  return globalLoaded && channelLoaded;\n};\n\nexport const isBttvEmotesLoadedSelector = createIsEmotesLoadedSelector('bttv');\nexport const isFfzEmotesLoadedSelector = createIsEmotesLoadedSelector('ffz');\nexport const isTwitchEmotesLoadedSelector = (state) =>\n  state.emotes.twitch.isLoaded || state.emotes.twitch.isError;\n\nexport const isEmotesLoadedSelector = (state) =>\n  isTwitchEmotesLoadedSelector(state) &&\n  isBttvEmotesLoadedSelector(state) &&\n  isFfzEmotesLoadedSelector(state);\n\nconst twitchEmotesSelector = R.pathOr([], ['emotes', 'twitch', 'items']);\nconst twitchGlobalEmotesSelector = createSelector(\n  twitchEmotesSelector,\n  R.pick(['0']),\n);\nconst twitchUserEmotesSelector = createSelector(\n  twitchEmotesSelector,\n  R.omit(['0']),\n);\n\nconst createGlobalEmotesSelector = (type) =>\n  R.pathOr([], ['emotes', type, 'global', 'items']);\n\nconst createChannelEmotesSelector = (type) => (state) =>\n  R.pathOr(\n    [],\n    ['emotes', type, 'channels', currentChannelSelector(state), 'items'],\n    state,\n  );\n\nconst bttvGlobalEmotesSelector = createGlobalEmotesSelector('bttv');\nconst bttvChannelEmotesSelector = createChannelEmotesSelector('bttv');\n\nconst ffzGlobalEmotesSelector = createGlobalEmotesSelector('ffz');\nconst ffzChannelEmotesSelector = createChannelEmotesSelector('ffz');\n\nexport const emotesSelector = createSelector(\n  isEmotesLoadedSelector,\n  twitchGlobalEmotesSelector,\n  twitchUserEmotesSelector,\n  bttvGlobalEmotesSelector,\n  bttvChannelEmotesSelector,\n  ffzGlobalEmotesSelector,\n  ffzChannelEmotesSelector,\n  (\n    isEmotesLoaded,\n    twitchGlobal,\n    twitchUser,\n    bttvGlobal,\n    bttvChannel,\n    ffzGlobal,\n    ffzChannel,\n  ) => {\n    if (!isEmotesLoaded) return null;\n\n    return {\n      twitchGlobal,\n      twitchUser,\n      bttvGlobal,\n      bttvChannel,\n      ffzGlobal,\n      ffzChannel,\n    };\n  },\n);\n\n// prettier-ignore\nconst regexEmotesMap = {\n  '[oO](_|\\\\.)[oO]': 'O_o',\n  '\\\\&gt\\\\;\\\\(':     '>(',\n  '\\\\&lt\\\\;3':       '<3',\n  '\\\\:-?(o|O)':      ':O',\n  '\\\\:-?(p|P)':      ':P',\n  '\\\\:-?[\\\\\\\\/]':    ':/',\n  '\\\\:-?[z|Z|\\\\|]':  ':Z',\n  '\\\\:-?\\\\(':        ':(',\n  '\\\\:-?\\\\)':        ':)',\n  '\\\\:-?D':          ':D',\n  '\\\\;-?(p|P)':      ';P',\n  '\\\\;-?\\\\)':        ';)',\n  'R-?\\\\)':          'R)',\n  'B-?\\\\)':          'B)',\n};\n\nconst createGlobalTwitchEmote = ({ id, code }) =>\n  createTwitchEmote({ id, code: regexEmotesMap[code] || code });\n\nexport const emoteCategoriesSelector = createSelector(\n  emotesSelector,\n  (emotes) => {\n    if (!emotes) return [];\n\n    const {\n      twitchGlobal,\n      twitchUser,\n      bttvGlobal,\n      bttvChannel,\n      ffzGlobal,\n      ffzChannel,\n    } = emotes;\n\n    return [\n      {\n        title: 'BetterTTV Channel Emotes',\n        items: bttvChannel.map(createBttvEmote),\n      },\n      {\n        title: 'FrankerFaceZ Channel Emotes',\n        items: ffzChannel.map(createFfzEmote),\n      },\n      ...R.pipe(\n        R.values,\n        R.map((items) => ({ items: R.map(createTwitchEmote, items) })),\n      )(twitchUser),\n      {\n        title: 'Twitch',\n        items: R.map(createGlobalTwitchEmote, R.propOr([], '0', twitchGlobal)),\n      },\n      {\n        title: 'BetterTTV',\n        items: bttvGlobal.map(createBttvEmote),\n      },\n      {\n        title: 'FrankerFaceZ',\n        items: ffzGlobal.map(createFfzEmote),\n      },\n    ].filter(({ items }) => items.length > 0);\n  },\n);\n","import { parse } from 'tekko';\n\nimport {\n  globalBadgesSelector,\n  channelBadgesSelector,\n} from 'reducers/badges/selectors';\nimport { emotesSelector } from 'reducers/emotes/selectors';\nimport { blockedUsersSelector } from 'reducers/chat/selectors';\nimport { MESSAGE_TYPES } from 'utils/constants';\nimport {\n  getIsAction,\n  normalizeActionMessage,\n  parseMessageTags,\n} from 'twitch-simple-irc';\nimport formatMessage from 'utils/formatMessage';\nimport createBadges from 'utils/createBadges';\n\nconst normalizeRecentMessages = (state, messages) => {\n  const globalBadges = globalBadgesSelector(state);\n  const channelBadges = channelBadgesSelector(state);\n  const emotes = emotesSelector(state);\n  const blockedUsers = blockedUsersSelector(state);\n\n  const filterMessages = ({ command, prefix: { user } }) =>\n    command === 'PRIVMSG' && !blockedUsers.includes(user);\n\n  const normalizeMessages = ({\n    tags,\n    params: [channel, message],\n    prefix: { user },\n  }) => {\n    const isAction = getIsAction(message);\n    const normalizedMessage = isAction\n      ? normalizeActionMessage(message)\n      : message;\n    const parsedTags = parseMessageTags(tags);\n\n    return {\n      type: MESSAGE_TYPES.MESSAGE,\n      message: normalizedMessage,\n      messageArray: formatMessage(normalizedMessage, parsedTags.emotes, emotes),\n      tags: parsedTags,\n      badges: createBadges(parsedTags.badges, globalBadges, channelBadges),\n      user,\n      channel: channel.slice(1),\n      isAction,\n      isHistory: true,\n    };\n  };\n\n  return messages\n    .map((m) => parse(m))\n    .filter(filterMessages)\n    .map(normalizeMessages);\n};\n\nexport default normalizeRecentMessages;\n","import { createAction, createActions, handleActions } from 'redux-actions';\nimport * as R from 'ramda';\n\nimport { emotesSelector } from 'reducers/emotes/selectors';\nimport {\n  globalBadgesSelector,\n  channelBadgesSelector,\n} from 'reducers/badges/selectors';\nimport { blockedUsersSelector } from 'reducers/chat/selectors';\nimport { fetchRecentMessages as apiFetchRecentMessages } from 'utils/api';\nimport {\n  CHANNEL_MESSAGES_LIMIT,\n  STORE_USERS_LIMIT,\n  MESSAGE_TYPES,\n  STORE_FLAGS,\n} from 'utils/constants';\nimport formatMessage from 'utils/formatMessage';\nimport createBadges from 'utils/createBadges';\nimport normalizeRecentMessages from 'utils/normalizeRecentMessages';\n\nconst defaultState = {\n  // [channel]: {\n  //   history: {\n  //     isLoading: true,\n  //     isLoaded: false,\n  //     isError: false,\n  //     error: null,\n  //   },\n  //   isEven: false,\n  //   items: [],\n  //   users: [],\n  // },\n};\n\nconst {\n  addMessages,\n  fetchRecentMessagesRequest,\n  fetchRecentMessagesSuccess,\n  fetchRecentMessagesFailure,\n} = createActions(\n  'ADD_MESSAGES',\n  'FETCH_RECENT_MESSAGES_REQUEST',\n  'FETCH_RECENT_MESSAGES_SUCCESS',\n  'FETCH_RECENT_MESSAGES_FAILURE',\n);\n\nexport const clearChat = createAction('CLEAR_CHAT');\n\nconst sliceMessages = (items) => {\n  const diff = items.length - CHANNEL_MESSAGES_LIMIT;\n  return diff > 0 ? items.slice(diff) : items;\n};\n\nconst sliceUsers = (users) => {\n  const diff = users.length - STORE_USERS_LIMIT;\n  return diff > 0 ? users.slice(diff) : users;\n};\n\nconst getIsEven = (prev, addedItemsCount, isSliced) => {\n  if (isSliced) {\n    return addedItemsCount % 2 ? !prev : prev;\n  }\n  return prev;\n};\n\nexport const addRecentMessages = (channel) => (dispatch, getState) => {\n  const state = getState();\n  const messages = R.pathOr(\n    [],\n    ['messages', channel, 'history', 'items'],\n    state,\n  );\n  const data = {\n    items: normalizeRecentMessages(state, messages),\n    isHistory: true,\n  };\n\n  dispatch(addMessages(data));\n};\n\nexport const fetchRecentMessages = (channel) => async (dispatch) => {\n  dispatch(fetchRecentMessagesRequest({ channel }));\n  try {\n    const response = await apiFetchRecentMessages(channel);\n    const data = { channel, items: response.messages };\n\n    dispatch(fetchRecentMessagesSuccess(data));\n  } catch (e) {\n    dispatch(fetchRecentMessagesFailure({ channel, error: e.message }));\n  }\n};\n\nexport const addMessage = (payload) => (dispatch, getState) => {\n  const { message, tags, user } = payload;\n  const state = getState();\n  const blockedUsers = blockedUsersSelector(state);\n\n  if (blockedUsers.includes(user)) return;\n\n  const globalBadges = globalBadgesSelector(state);\n  const channelBadges = channelBadgesSelector(state);\n  const emotes = emotesSelector(state);\n\n  const normalizedMessage = {\n    ...payload,\n    type: MESSAGE_TYPES.MESSAGE,\n    messageArray: formatMessage(message, tags.emotes, emotes),\n    badges: createBadges(tags.badges, globalBadges, channelBadges),\n  };\n\n  dispatch(addMessages({ items: [normalizedMessage] }));\n};\n\nexport const addNoticeMessage = (message) => (dispatch) => {\n  const normalizedMessage = {\n    ...message,\n    type: MESSAGE_TYPES.NOTICE_MESSAGE,\n  };\n\n  dispatch(addMessages({ items: [normalizedMessage] }));\n};\n\nexport const addUserNoticeMessage = (message) => (dispatch) => {\n  const normalizedMessage = {\n    ...message,\n    type: MESSAGE_TYPES.USER_NOTICE_MESSAGE,\n  };\n\n  dispatch(addMessages({ items: [normalizedMessage] }));\n};\n\nconst historyAddedPatch = {\n  history: { isAdded: true, items: [] },\n};\n\nconst handleAddMessages = (state, { payload }) => {\n  const { items, isHistory } = payload;\n  const channel = R.path([0, 'channel'], items);\n  const prevItems = R.pathOr([], [channel, 'items'], state);\n  const newItems = isHistory\n    ? [...items, ...prevItems]\n    : [...prevItems, ...items];\n  const slicedMessages = sliceMessages(newItems);\n\n  const isSliced = newItems.length > slicedMessages.length;\n  const prevIsEven = R.pathOr(false, [channel, 'isEven'], state);\n  const isEven = getIsEven(prevIsEven, items.length, isSliced);\n\n  let users = R.pathOr([], [channel, 'users'], state);\n  items.forEach((message) => {\n    const displayName = R.path(['tags', 'displayName'], message);\n    if (displayName && !users.includes(displayName)) {\n      users = [...users, displayName];\n    }\n  });\n  users = sliceUsers(users);\n\n  return R.mergeDeepRight(state, {\n    [channel]: {\n      ...(isHistory ? historyAddedPatch : {}),\n      items: slicedMessages,\n      users,\n      isEven,\n    },\n  });\n};\n\nconst handleClearChat = (state, { payload }) => {\n  const {\n    channel,\n    tags: { targetUserId },\n  } = payload;\n\n  const newItems = state[channel].items.map((message) =>\n    message.tags.userId === targetUserId && !message.isHistory\n      ? { ...message, isDeleted: true }\n      : message,\n  );\n\n  return {\n    ...state,\n    [channel]: {\n      ...state[channel],\n      items: newItems,\n    },\n  };\n};\n\nconst handleFetchRecentMessages = {\n  [fetchRecentMessagesRequest]: (state, { payload }) =>\n    R.mergeDeepRight(state, {\n      [payload.channel]: {\n        history: { ...STORE_FLAGS.REQUEST },\n      },\n    }),\n  [fetchRecentMessagesSuccess]: (state, { payload }) =>\n    R.mergeDeepRight(state, {\n      [payload.channel]: {\n        history: { ...STORE_FLAGS.SUCCESS, items: payload.items },\n      },\n    }),\n  [fetchRecentMessagesFailure]: (state, { payload }) =>\n    R.mergeDeepRight(state, {\n      [payload.channel]: {\n        history: { ...STORE_FLAGS.FAILURE, error: payload.error },\n      },\n    }),\n};\n\nconst reducer = handleActions(\n  {\n    [addMessages]: handleAddMessages,\n    [clearChat]: handleClearChat,\n    ...handleFetchRecentMessages,\n  },\n  defaultState,\n);\n\nexport default reducer;\n","import { createAction, handleActions } from 'redux-actions';\n\nconst getOptionsFromLocalStorage = () => {\n  try {\n    return JSON.parse(localStorage.options);\n  } catch {\n    return {};\n  }\n};\n\nconst defaultState = {\n  showTimestamps: false,\n  splitChat: true,\n  blacklistKeywords: '',\n  highlightKeywords: '',\n  fixedWidth: false,\n  ...getOptionsFromLocalStorage(),\n};\n\nexport const changeOption = createAction('CHANGE_OPTION', (option, value) => {\n  localStorage.setItem(\n    'options',\n    JSON.stringify({\n      ...getOptionsFromLocalStorage(),\n      [option]: value,\n    }),\n  );\n\n  return {\n    option,\n    value,\n  };\n});\nconst handleChangeOption = (state, { payload: { option, value } }) => ({\n  ...state,\n  [option]: value,\n});\n\nconst reducer = handleActions(\n  {\n    [changeOption]: handleChangeOption,\n  },\n  defaultState,\n);\n\nexport default reducer;\n","import { combineReducers } from 'redux';\n\nimport auth from './auth';\nimport badges from './badges';\nimport chat from './chat';\nimport emotes from './emotes/index';\nimport messages from './messages';\nimport options from './options';\n\nexport default combineReducers({\n  auth,\n  badges,\n  chat,\n  emotes,\n  messages,\n  options,\n});\n","/* eslint-disable no-underscore-dangle */\nimport { createStore, compose, applyMiddleware } from 'redux';\nimport thunk from 'redux-thunk';\n\nimport rootReducer from 'reducers';\n\nconst enhancer =\n  process.env.NODE_ENV === 'production'\n    ? applyMiddleware(thunk)\n    : compose(\n        applyMiddleware(thunk),\n        window.__REDUX_DEVTOOLS_EXTENSION__\n          ? window.__REDUX_DEVTOOLS_EXTENSION__()\n          : (noop) => noop,\n      );\n\nconst store = createStore(rootReducer, {}, enhancer);\n\nexport default store;\n","export const isAuthReadySelector = (state) => state.auth.isAuthReady;\nexport const isAuthSelector = (state) => state.auth.isAuth;\nexport const userLoginSelector = (state) => state.auth.user.login;\nexport const userIdSelector = (state) => state.auth.user.id;\nexport const userDisplayNameSelector = (state) => state.auth.user.displayName;\n","import * as R from 'ramda';\n\nimport { currentChannelSelector } from 'reducers/chat/selectors';\n\nexport const messagesSelector = (state) =>\n  R.pathOr([], ['messages', currentChannelSelector(state), 'items'], state);\n\nexport const usersSelector = (state) =>\n  R.pathOr([], ['messages', currentChannelSelector(state), 'users'], state);\n\nexport const isHistoryLoadingSelector = (state) =>\n  R.pathOr(false, [\n    'messages',\n    currentChannelSelector(state),\n    'history',\n    'isLoading',\n  ])(state);\n\nexport const isHistoryLoadedSelector = (state) =>\n  R.pathOr(false, [\n    'messages',\n    currentChannelSelector(state),\n    'history',\n    'isLoaded',\n  ])(state);\n\nexport const isHistoryAddedSelector = (state) =>\n  R.pathOr(false, [\n    'messages',\n    currentChannelSelector(state),\n    'history',\n    'isAdded',\n  ])(state);\n\nexport const isEvenSelector = (state) =>\n  R.pathOr(false, ['messages', currentChannelSelector(state), 'isEven'], state);\n","import { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport {\n  isAuthReadySelector,\n  isAuthSelector,\n  userIdSelector,\n} from 'reducers/auth/selectors';\nimport { fetchTwitchEmotes } from 'reducers/emotes/twitch';\nimport {\n  fetchBttvGlobalEmotes,\n  fetchBttvChannelEmotes,\n} from 'reducers/emotes/bttv';\nimport {\n  fetchFfzGlobalEmotes,\n  fetchFfzChannelEmotes,\n} from 'reducers/emotes/ffz';\nimport {\n  isTwitchEmotesLoadedSelector,\n  isBttvEmotesLoadedSelector,\n  isFfzEmotesLoadedSelector,\n} from 'reducers/emotes/selectors';\nimport { fetchRecentMessages, addRecentMessages } from 'reducers/messages';\nimport {\n  isHistoryLoadedSelector,\n  isHistoryAddedSelector,\n} from 'reducers/messages/selectors';\nimport { fetchBlockedUsers } from 'reducers/chat';\nimport {\n  currentChannelSelector,\n  currentChannelIdSelector,\n  isBlockedUsersLoadedSelector,\n} from 'reducers/chat/selectors';\nimport { fetchGlobalBadges, fetchChannelBadges } from 'reducers/badges';\nimport { isBadgesLoadedSelector } from 'reducers/badges/selectors';\n\nconst useFetchChatData = () => {\n  const dispatch = useDispatch();\n\n  const isAuthReady = useSelector(isAuthReadySelector);\n  const isAuth = useSelector(isAuthSelector);\n  const userId = useSelector(userIdSelector);\n  const currentChannel = useSelector(currentChannelSelector);\n  const currentChannelId = useSelector(currentChannelIdSelector);\n\n  const isTwitchEmotesLoaded = useSelector(isTwitchEmotesLoadedSelector);\n  const isBttvEmotesLoaded = useSelector(isBttvEmotesLoadedSelector);\n  const isFfzEmotesLoaded = useSelector(isFfzEmotesLoadedSelector);\n  const isBadgesLoaded = useSelector(isBadgesLoadedSelector);\n  const isHistoryLoaded = useSelector(isHistoryLoadedSelector);\n  const isBlockedUsersLoaded = useSelector(isBlockedUsersLoadedSelector);\n  const isHistoryAdded = useSelector(isHistoryAddedSelector);\n\n  const isReadyToAddHistory =\n    isAuthReady &&\n    currentChannel &&\n    !isHistoryAdded &&\n    (isAuth ? isTwitchEmotesLoaded : true) &&\n    (isAuth ? isBlockedUsersLoaded : true) &&\n    isBttvEmotesLoaded &&\n    isFfzEmotesLoaded &&\n    isBadgesLoaded &&\n    isHistoryLoaded;\n\n  // TODO: check if emotes and badges is already in the store\n\n  useEffect(() => {\n    dispatch(fetchBttvGlobalEmotes());\n    dispatch(fetchFfzGlobalEmotes());\n    dispatch(fetchGlobalBadges());\n  }, [dispatch]);\n\n  useEffect(() => {\n    if (!isHistoryAdded && currentChannel) {\n      dispatch(fetchRecentMessages(currentChannel));\n    }\n  }, [dispatch, currentChannel, isHistoryAdded]);\n\n  useEffect(() => {\n    if (isReadyToAddHistory) {\n      dispatch(addRecentMessages(currentChannel));\n    }\n  }, [dispatch, currentChannel, isReadyToAddHistory]);\n\n  useEffect(() => {\n    if (isAuthReady && isAuth && userId) {\n      dispatch(fetchTwitchEmotes(userId));\n      dispatch(fetchBlockedUsers(userId));\n    }\n  }, [dispatch, isAuthReady, isAuth, userId]);\n\n  useEffect(() => {\n    if (currentChannel && currentChannelId) {\n      dispatch(fetchBttvChannelEmotes(currentChannelId, currentChannel));\n      dispatch(fetchFfzChannelEmotes(currentChannelId, currentChannel));\n      dispatch(fetchChannelBadges(currentChannelId, currentChannel));\n    }\n  }, [dispatch, currentChannel, currentChannelId]);\n};\n\nexport default useFetchChatData;\n","import { useState, useEffect } from 'react';\n\nconst useLocationHash = () => {\n  const [hash, setHash] = useState(window.location.hash);\n\n  useEffect(() => {\n    const handleHashChange = () => setHash(window.location.hash);\n\n    window.addEventListener('hashchange', handleHashChange);\n\n    return () => window.removeEventListener('hashchange', handleHashChange);\n  }, []);\n\n  return hash;\n};\n\nexport default useLocationHash;\n","import { useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\n\nimport useLocationHash from 'hooks/useLocationHash';\nimport { setCurrentChannel } from 'reducers/chat';\n\nconst useCurrentChannel = () => {\n  const dispatch = useDispatch();\n  const hash = useLocationHash();\n\n  useEffect(() => {\n    if (hash && hash.length > 1) {\n      const channel = hash.slice(1);\n\n      dispatch(setCurrentChannel(channel));\n\n      localStorage.setItem('lastChannel', channel);\n\n      document.title = channel\n        ? `#${channel} - ${process.env.REACT_APP_NAME} `\n        : process.env.REACT_APP_NAME;\n    }\n  }, [dispatch, hash]);\n};\n\nexport default useCurrentChannel;\n","import { useRef, useEffect } from 'react';\n\nfunction usePrevious(value) {\n  const ref = useRef();\n\n  useEffect(() => {\n    ref.current = value;\n  }, [value]);\n\n  return ref.current;\n}\n\nexport default usePrevious;\n","import uuid from 'uuid/v4';\n\nconst createOwnMessage = (message, tags, channel, user, userId) => {\n  if (typeof message !== 'string') return {};\n\n  const isAction = message.startsWith('/me ');\n\n  return {\n    message: isAction ? message.slice(4) : message,\n    tags: {\n      ...tags,\n      id: uuid(),\n      tmiSentTs: new Date().getTime(),\n      userId,\n    },\n    user,\n    channel,\n    isAction,\n  };\n};\n\nexport default createOwnMessage;\n","import { useEffect, useRef, useMemo, useCallback } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport uuid from 'uuid/v4';\nimport { Client } from 'twitch-simple-irc';\n\nimport usePrevious from 'hooks/usePrevious';\nimport {\n  addMessage,\n  addNoticeMessage,\n  addUserNoticeMessage,\n  clearChat,\n} from 'reducers/messages';\nimport {\n  setIsConnected,\n  updateGlobalUserState,\n  updateUserState,\n  updateRoomState,\n} from 'reducers/chat';\nimport {\n  currentChannelSelector,\n  isConnectedSelector,\n} from 'reducers/chat/selectors';\nimport {\n  isAuthSelector,\n  userIdSelector,\n  isAuthReadySelector,\n  userLoginSelector,\n} from 'reducers/auth/selectors';\nimport { setAuth } from 'reducers/auth';\nimport { NOTICE_MESSAGE_TAGS } from 'utils/constants';\nimport createOwnMessage from 'utils/createOwnMessage';\n\nconst emptyFunc = () => {};\n\nconst useTwitchClient = () => {\n  const dispatch = useDispatch();\n\n  const isAuthReady = useSelector(isAuthReadySelector);\n  const isAuth = useSelector(isAuthSelector);\n  const userLogin = useSelector(userLoginSelector);\n  const userId = useSelector(userIdSelector);\n  const isConnected = useSelector(isConnectedSelector);\n  const currentChannel = useSelector(currentChannelSelector);\n  const prevChannel = usePrevious(currentChannel);\n  const clientRef = useRef(null);\n\n  const registerEvents = useCallback(\n    (client) => {\n      const handleRegister = () => dispatch(setIsConnected(true));\n      const handleDisconnect = () => dispatch(setIsConnected(false));\n      const handleGlobalUserState = (data) =>\n        dispatch(updateGlobalUserState(data));\n      const handleUserState = (data) => dispatch(updateUserState(data));\n      const handleRoomState = (data) => dispatch(updateRoomState(data));\n      const handleMessage = (data) => dispatch(addMessage(data));\n      const handleNotice = (data) => {\n        if (data.message === 'Login authentication failed') {\n          dispatch(setAuth({ isAuth: false }));\n          client.current.disconnect();\n          // eslint-disable-next-line no-param-reassign\n          client.current = null;\n          return;\n        }\n\n        const normalizedMessage = {\n          ...data,\n          tags: { ...data.tags, id: uuid() },\n        };\n\n        dispatch(addNoticeMessage(normalizedMessage));\n      };\n      const handleUserNotice = (data) => dispatch(addUserNoticeMessage(data));\n      const handleClearChat = (data) => {\n        if (!data.tags.targetUserId) return;\n        dispatch(clearChat(data));\n      };\n\n      client.current.on('register', handleRegister);\n      client.current.on('disconnect', handleDisconnect);\n      client.current.on('globaluserstate', handleGlobalUserState);\n      client.current.on('userstate', handleUserState);\n      client.current.on('roomstate', handleRoomState);\n      client.current.on('message', handleMessage);\n      client.current.on('notice', handleNotice);\n      client.current.on('usernotice', handleUserNotice);\n      client.current.on('clearchat', handleClearChat);\n    },\n    [dispatch],\n  );\n\n  useEffect(() => {\n    return () => {\n      if (clientRef.current) {\n        clientRef.current.disconnect();\n        clientRef.current = null;\n      }\n    };\n  }, [clientRef]);\n\n  useEffect(() => {\n    if (!currentChannel || !isAuthReady) return emptyFunc;\n\n    if (!clientRef.current) {\n      const options = isAuth\n        ? { name: userLogin, auth: localStorage.accessToken }\n        : {};\n\n      (async () => {\n        clientRef.current = new Client(options);\n\n        registerEvents(clientRef);\n\n        await clientRef.current.connect();\n\n        clientRef.current.join(currentChannel);\n      })();\n\n      return emptyFunc;\n    }\n\n    if (prevChannel !== currentChannel) {\n      clientRef.current.part(prevChannel);\n      clientRef.current.join(currentChannel);\n    }\n\n    return emptyFunc;\n  }, [\n    dispatch,\n    registerEvents,\n    isAuth,\n    isAuthReady,\n    isConnected,\n    userLogin,\n    currentChannel,\n    prevChannel,\n  ]);\n\n  const client = () => ({\n    say(channel, message) {\n      if (!clientRef.current) return;\n\n      clientRef.current.say(channel, message);\n\n      function handleUserState(data) {\n        if (data.channel === channel) {\n          const m = createOwnMessage(\n            message,\n            data.tags,\n            channel,\n            userLogin,\n            userId,\n          );\n          dispatch(addMessage(m));\n          // eslint-disable-next-line no-use-before-define\n          removeListeners();\n        }\n      }\n\n      function handleNotice(data) {\n        if (\n          data.channel === channel &&\n          NOTICE_MESSAGE_TAGS.includes(data.tags.msgId)\n        ) {\n          // eslint-disable-next-line no-use-before-define\n          removeListeners();\n        }\n      }\n\n      function removeListeners() {\n        clientRef.current.off('notice', handleNotice);\n        clientRef.current.off('userstate', handleUserState);\n      }\n\n      clientRef.current.on('notice', handleNotice);\n      clientRef.current.on('userstate', handleUserState);\n\n      setTimeout(() => removeListeners(), 10000);\n    },\n  });\n\n  return useMemo(client, [clientRef, dispatch, userLogin, userId]);\n};\n\nexport default useTwitchClient;\n","import emojilib from 'emojilib/emojis';\n\nconst replaceEmojis = (text) =>\n  text\n    .split(' ')\n    .map((word) => {\n      if (word[0] !== ':' || word[word.length - 1] !== ':') {\n        return word;\n      }\n\n      const name = word.slice(1, -1);\n      const emoji = emojilib[name];\n\n      return emoji && emoji.char ? emoji.char : word;\n    })\n    .join(' ');\n\nexport default replaceEmojis;\n","import { useCallback, useState } from 'react';\n\nconst useSetState = (initialState) => {\n  const [state, set] = useState(initialState);\n  const setState = useCallback(\n    (patch) => {\n      set((prevState) => ({\n        ...prevState,\n        ...(patch instanceof Function ? patch(prevState) : patch),\n      }));\n    },\n    [set],\n  );\n\n  return [state, setState];\n};\n\nexport default useSetState;\n","export const optionsSelector = (state) => [\n  {\n    title: 'My preferences',\n    items: [\n      {\n        type: 'SWITCH',\n        id: 'show-timestamps',\n        name: 'showTimestamps',\n        title: 'Show Timestamps',\n        description: '',\n        value: state.options.showTimestamps,\n      },\n      {\n        type: 'SWITCH',\n        id: 'split-chat',\n        name: 'splitChat',\n        title: 'Split Chat',\n        description: '',\n        value: state.options.splitChat,\n      },\n      {\n        type: 'SWITCH',\n        id: 'fixed-width',\n        name: 'fixedWidth',\n        title: 'Fixed Width',\n        description: '',\n        value: state.options.fixedWidth,\n      },\n      // {\n      //   type: 'INPUT',\n      //   id: 'blacklist-keywords',\n      //   name: 'blacklistKeywords',\n      //   title: 'Set Blacklist Keywords',\n      //   description: '',\n      //   value: state.options.blacklistKeywords,\n      // },\n      // {\n      //   type: 'INPUT',\n      //   id: 'highlight-keywords',\n      //   name: 'highlightKeywords',\n      //   title: 'Set Highlight Keywords',\n      //   description: '',\n      //   value: state.options.highlightKeywords,\n      // },\n    ],\n  },\n];\n\nexport const isShowTimestampsSelector = (state) => state.options.showTimestamps;\nexport const isSplitChatSelector = (state) => state.options.splitChat;\nexport const isFixedWidthSelector = (state) => state.options.fixedWidth;\n","const getUserSuggestions = (beginText, users, userDisplayName, limit = 5) => {\n  const result = [];\n  const beginTextLower = beginText.toLowerCase();\n  const userDisplayNameLower = userDisplayName.toLowerCase();\n\n  if (userDisplayNameLower.startsWith(beginTextLower)) {\n    result.push(userDisplayName);\n  }\n\n  // eslint-disable-next-line no-restricted-syntax\n  for (const name of users) {\n    if (result.length === limit) return result;\n\n    const nameLower = name.toLowerCase();\n\n    // eslint-disable-next-line no-continue\n    if (nameLower === userDisplayNameLower) continue;\n\n    if (beginTextLower === '' || nameLower.startsWith(beginTextLower)) {\n      result.push(name);\n    }\n  }\n\n  return result;\n};\n\nexport default getUserSuggestions;\n","/* eslint-disable no-restricted-syntax */\nimport {\n  createTwitchEmote,\n  createBttvEmote,\n  createFfzEmote,\n} from 'utils/formatMessage';\n\nconst checkTwitch = (result, sets, beginText, limit) => {\n  for (const items of Object.values(sets)) {\n    for (const emote of items) {\n      if (result.length === limit) return true;\n\n      if (emote.code.toLowerCase().includes(beginText)) {\n        result.push(createTwitchEmote(emote));\n      }\n    }\n  }\n\n  return false;\n};\n\nconst checkBttv = (result, items, beginText, limit) => {\n  for (const emote of items) {\n    if (result.length === limit) return true;\n\n    if (emote.code.toLowerCase().includes(beginText)) {\n      result.push(createBttvEmote(emote));\n    }\n  }\n\n  return false;\n};\n\nconst checkFfz = (result, items, beginText, limit) => {\n  for (const emote of items) {\n    if (result.length === limit) return true;\n\n    if (emote.name.toLowerCase().includes(beginText)) {\n      result.push(createFfzEmote(emote));\n    }\n  }\n\n  return false;\n};\n\nconst getEmoteSuggestions = (beginText, emotes, limit = 10) => {\n  if (!emotes) return [];\n\n  const result = [];\n  const {\n    twitchGlobal,\n    twitchUser,\n    bttvGlobal,\n    bttvChannel,\n    ffzGlobal,\n    ffzChannel,\n  } = emotes;\n\n  const beginTextLower = beginText.toLowerCase();\n\n  // eslint-disable-next-line no-unused-vars\n  const isOver =\n    checkBttv(result, bttvChannel, beginTextLower, limit) ||\n    checkFfz(result, ffzChannel, beginTextLower, limit) ||\n    checkTwitch(result, twitchUser, beginTextLower, limit) ||\n    checkTwitch(result, twitchGlobal, beginTextLower, limit) ||\n    checkBttv(result, bttvGlobal, beginTextLower, limit) ||\n    checkFfz(result, ffzGlobal, beginTextLower, limit);\n\n  return result;\n};\n\nexport default getEmoteSuggestions;\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"currentColor\",\n  d: \"M8.5 10L4 5.5 5.5 4 10 8.5 14.5 4 16 5.5 11.5 10l4.5 4.5-1.5 1.5-4.5-4.5L5.5 16 4 14.5 8.5 10z\"\n});\n\nvar SvgClose = function SvgClose(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 20 20\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgClose, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/close.992b249e.svg\";\nexport { ForwardRef as ReactComponent };","import pt from 'prop-types';\nimport styled, { css } from 'styled-components';\n\nconst sizes = {\n  small: css`\n    width: 24px;\n    height: 24px;\n  `,\n  medium: css`\n    width: 30px;\n    height: 30px;\n  `,\n  // large: css``,\n};\n\nconst IconButton = styled.button.attrs({ type: 'button' })`\n  margin: 0;\n  padding: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: none;\n  border: none;\n  outline: none;\n  color: #fff;\n  border-radius: 4px;\n  cursor: pointer;\n\n  ${(p) => sizes[p.size]};\n\n  &:hover,\n  &:focus {\n    background-color: rgba(255, 255, 255, 0.15);\n  }\n\n  &:active {\n    background-color: rgba(255, 255, 255, 0.2);\n  }\n\n  &:focus {\n    box-shadow: 0 0 6px 0 #772ce8;\n  }\n`;\n\nIconButton.defaultProps = {\n  size: 'medium',\n};\n\nIconButton.propTypes = {\n  size: pt.oneOf(Object.keys(sizes)),\n};\n\nexport default IconButton;\n","import React from 'react';\nimport pt from 'prop-types';\nimport styled from 'styled-components';\n\nimport { ReactComponent as CloseIconSvg } from 'icons/close.svg';\nimport IconButton from 'components/IconButton';\n\nconst ChatModalRoot = styled.div`\n  height: 100%;\n  box-shadow: rgba(0, 0, 0, 0.4) 0px 4px 8px 0px,\n    rgba(0, 0, 0, 0.4) 0px 0px 4px 0px;\n  background-color: #18181b;\n  white-space: normal;\n  color: #fff;\n  border-radius: 4px;\n`;\nconst CloseButton = styled(IconButton).attrs({ size: 'small' })`\n  position: absolute;\n  top: 5px;\n  right: 5px;\n`;\nconst CloseIcon = styled(CloseIconSvg)`\n  display: block;\n  width: 20px;\n  height: 20px;\n`;\n\nconst ChatModal = ({ children, onClose }) => (\n  <ChatModalRoot>\n    <CloseButton onClick={onClose}>\n      <CloseIcon />\n    </CloseButton>\n    {children}\n  </ChatModalRoot>\n);\n\nChatModal.defaultProps = {};\n\nChatModal.propTypes = {\n  children: pt.node.isRequired,\n  onClose: pt.func.isRequired,\n};\n\nexport default ChatModal;\n","import CustomScrollbar from 'react-scrollbars-custom';\nimport styled from 'styled-components';\n\nconst Scrollbar = styled(CustomScrollbar).attrs({\n  disableTracksWidthCompensation: true,\n})`\n  overflow-y: auto;\n\n  .ScrollbarsCustom-TrackY {\n    background: none !important;\n  }\n\n  .ScrollbarsCustom-ThumbY {\n    margin-left: auto;\n    margin-right: auto;\n    width: 6px !important;\n  }\n`;\n\nexport default Scrollbar;\n","import React, { useCallback } from 'react';\nimport pt from 'prop-types';\nimport styled from 'styled-components';\n\nimport Scrollbar from 'components/Scrollbar';\n\nconst EmotePickerRoot = styled.div`\n  padding-top: 32px;\n  padding-bottom: 16px;\n  height: 100%;\n`;\nconst Categories = styled.div`\n  height: 100%;\n`;\nconst Category = styled.div`\n  padding-top: 10px;\n  padding-right: 16px;\n  padding-left: 16px;\n\n  &:not(:last-child) {\n    padding-bottom: 10px;\n    border-bottom: 1px solid rgba(255, 255, 255, 0.15);\n  }\n`;\nconst CategoryHeader = styled.div`\n  padding-bottom: 10px;\n  font-size: 12px;\n  font-weight: bold;\n  color: rgba(255, 255, 255, 0.8);\n`;\nconst CategoryItems = styled.div``;\nconst Emote = styled.img`\n  padding: 2px;\n  width: 32px;\n  height: 32px;\n  object-fit: contain;\n\n  &:hover {\n    background-color: rgba(119, 44, 232, 0.2);\n    cursor: pointer;\n  }\n`;\n\nconst EmotePicker = ({ emoteCategories, onEmoteClick }) => {\n  const renderCategory = useCallback(\n    ({ title, items }, key) => (\n      <Category key={key}>\n        {!!title && <CategoryHeader>{title}</CategoryHeader>}\n        <CategoryItems>\n          {items.map(({ alt, src, srcSet }) => (\n            <Emote\n              key={alt}\n              alt={alt}\n              src={src}\n              srcSet={srcSet}\n              onClick={() => onEmoteClick(alt)}\n            />\n          ))}\n        </CategoryItems>\n      </Category>\n    ),\n    [onEmoteClick],\n  );\n\n  return (\n    <EmotePickerRoot>\n      <Categories>\n        <Scrollbar>{emoteCategories.map(renderCategory)}</Scrollbar>\n      </Categories>\n    </EmotePickerRoot>\n  );\n};\n\nEmotePicker.defaultProps = {\n  emoteCategories: [],\n};\n\nEmotePicker.propTypes = {\n  onEmoteClick: pt.func.isRequired,\n  emoteCategories: pt.arrayOf(pt.shape({})),\n};\n\nexport default EmotePicker;\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  fill: \"currentColor\"\n}, React.createElement(\"path\", {\n  d: \"M7 11a1 1 0 100-2 1 1 0 000 2zm7-1a1 1 0 11-2 0 1 1 0 012 0zm-4 4a2 2 0 002-2H8a2 2 0 002 2z\"\n}), React.createElement(\"path\", {\n  fillRule: \"evenodd\",\n  d: \"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-2 0a6 6 0 11-12 0 6 6 0 0112 0z\",\n  clipRule: \"evenodd\"\n}));\n\nvar SvgSmileyFace = function SvgSmileyFace(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 20 20\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgSmileyFace, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/smiley-face.1cc055ed.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useState, useRef } from 'react';\nimport pt from 'prop-types';\nimport styled, { css } from 'styled-components';\nimport useOnClickOutside from 'use-onclickoutside';\n\nimport {\n  twitchEmoteType,\n  bttvEmoteType,\n  ffzEmoteType,\n} from 'utils/formatMessage';\nimport ChatModal from 'components/ChatModal';\nimport IconButton from 'components/IconButton';\nimport EmotePicker from 'components/EmotePicker';\nimport { ReactComponent as SmileyFaceIconSvg } from 'icons/smiley-face.svg';\n\nconst ChatInputRoot = styled.div`\n  padding-left: 10px;\n  padding-right: 10px;\n  padding-bottom: 10px;\n  background-color: #18181b;\n\n  & > :not(:last-child) {\n    margin-bottom: 10px;\n  }\n`;\nconst ChatInputInner = styled.div`\n  position: relative;\n`;\nconst Suggestions = styled.div`\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: 100%;\n  margin-left: -5px;\n  margin-bottom: -5px;\n  margin-right: -5px;\n  margin-bottom: 0;\n  padding-top: 10px;\n  padding-bottom: 5px;\n  padding-left: 10px;\n  padding-right: 10px;\n  border: 1px solid rgba(255, 255, 255, 0.15);\n  border-bottom: none;\n  background-color: #18181b;\n  color: #fff;\n  border-top-left-radius: 6px;\n  border-top-right-radius: 6px;\n  /* box-shadow: 0 1px 2px rgba(0, 0, 0, 0.15), 0 0px 2px rgba(0, 0, 0, 0.1); */\n`;\nconst SuggestionItem = styled.div`\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  padding-left: 10px;\n  padding-right: 10px;\n  border-radius: 2px;\n  background-color: ${(p) =>\n    p.isActive ? 'rgba(255, 255, 255, 0.15)' : 'transparent'};\n  cursor: pointer;\n`;\nconst SuggestionImage = styled.img`\n  margin-right: 8px;\n  width: 28px;\n  height: 28px;\n  object-fit: contain;\n`;\nconst TextareaInput = styled.div`\n  position: relative;\n`;\nconst TextareaWrapper = styled.div`\n  ${(p) =>\n    p.isSuggestions &&\n    css`\n      margin-left: -5px;\n      margin-bottom: -5px;\n      margin-right: -5px;\n      padding: 5px;\n      border: 1px solid rgba(255, 255, 255, 0.15);\n      border-top: none;\n      border-bottom-left-radius: 6px;\n      border-bottom-right-radius: 6px;\n      /* box-shadow: 0 2px 3px -1px rgba(0, 0, 0, 0.1),\n        0 2px 2px -2px rgba(0, 0, 0, 0.02); */\n\n      & > ${TextareaInput} {\n        margin-left: -1px;\n        margin-bottom: -1px;\n        margin-right: -1px;\n      }\n    `};\n`;\nconst EmotesModal = styled.div`\n  position: absolute;\n  top: auto;\n  right: 0;\n  bottom: 100%;\n  margin-bottom: 8px;\n  width: 320px;\n  height: 405px;\n  min-width: 0;\n  white-space: nowrap;\n`;\nconst Textarea = styled.textarea`\n  display: block;\n  padding: 10px;\n  width: 100%;\n  height: 38px;\n  max-height: 91px;\n  min-height: 40px;\n  overflow: hidden;\n  border: 2px solid transparent;\n  background-color: rgba(255, 255, 255, 0.15);\n  font-family: inherit;\n  font-size: 12px;\n  line-height: 1.5;\n  border-radius: 4px;\n  outline: none;\n  color: #fff;\n  resize: none;\n  transition-duration: 0.1s;\n  transition-timing-function: ease-in;\n  transition-property: box-shadow, border, background-color;\n\n  &:focus {\n    background-color: #000;\n    border-color: #9147ff;\n  }\n\n  &[disabled] {\n    opacity: 0.5;\n    pointer-events: none;\n  }\n`;\nconst EmotesButton = styled(IconButton)`\n  position: absolute;\n  right: 5px;\n  bottom: 5px;\n`;\nconst SmileyFaceIcon = styled(SmileyFaceIconSvg)`\n  display: block;\n  width: 20px;\n  height: 20px;\n`;\n\nconst ChatInput = React.forwardRef(\n  (\n    {\n      text,\n      emoteCategories,\n      suggestions,\n      isDisabled,\n      onEmoteClick,\n      onChange,\n      onKeyUp,\n      onKeyDown,\n      onBlur,\n    },\n    textareaRef,\n  ) => {\n    const chatInputRef = useRef(null);\n    const [isEmotesModalVisible, setIsEmotesModalVisible] = useState(false);\n\n    const handleCloseEmotesModal = () => setIsEmotesModalVisible(false);\n\n    useOnClickOutside(chatInputRef, handleCloseEmotesModal);\n\n    /* eslint-disable react/prop-types */\n    const renderSuggestions = ({ type, items, activeIndex }) => {\n      const renderUser = (name, index) => (\n        <SuggestionItem key={name} isActive={index === activeIndex}>\n          {name}\n        </SuggestionItem>\n      );\n\n      const renderEmote = ({ src, srcSet, alt }, index) => (\n        <SuggestionItem key={alt} isActive={index === activeIndex}>\n          <SuggestionImage src={src} srcSet={srcSet} alt={alt} />\n          {alt}\n        </SuggestionItem>\n      );\n\n      return (\n        <Suggestions>\n          {items.length\n            ? items.map(type === 'users' ? renderUser : renderEmote)\n            : 'No matches'}\n        </Suggestions>\n      );\n    };\n    /* eslint-enable react/prop-types */\n\n    const renderEmotesButton = () => (\n      <EmotesButton\n        onClick={() => setIsEmotesModalVisible(!isEmotesModalVisible)}\n      >\n        <SmileyFaceIcon />\n      </EmotesButton>\n    );\n\n    const renderEmotesModal = () => (\n      <EmotesModal>\n        <ChatModal onClose={handleCloseEmotesModal}>\n          <EmotePicker\n            emoteCategories={emoteCategories}\n            onEmoteClick={onEmoteClick}\n          />\n        </ChatModal>\n      </EmotesModal>\n    );\n\n    return (\n      <ChatInputRoot ref={chatInputRef}>\n        <ChatInputInner>\n          {suggestions.isActive && renderSuggestions(suggestions)}\n          <TextareaWrapper isSuggestions={suggestions.isActive}>\n            <TextareaInput>\n              <Textarea\n                ref={textareaRef}\n                value={text}\n                placeholder=\"Send a message\"\n                maxLength={500}\n                disabled={isDisabled}\n                onChange={onChange}\n                onKeyUp={onKeyUp}\n                onKeyDown={onKeyDown}\n                onBlur={onBlur}\n              />\n              {!!emoteCategories.length && renderEmotesButton()}\n            </TextareaInput>\n          </TextareaWrapper>\n          {isEmotesModalVisible && renderEmotesModal()}\n        </ChatInputInner>\n      </ChatInputRoot>\n    );\n  },\n);\n\nChatInput.defaultProps = {\n  emoteCategories: [],\n  isDisabled: false,\n};\n\nChatInput.propTypes = {\n  text: pt.string.isRequired,\n  emoteCategories: pt.arrayOf(pt.shape({})),\n  suggestions: pt.shape({\n    isActive: pt.bool,\n    items: pt.oneOfType([\n      pt.arrayOf(pt.string),\n      pt.arrayOf(pt.oneOfType([twitchEmoteType, bttvEmoteType, ffzEmoteType])),\n    ]),\n    activeIndex: pt.number,\n    cursorPosition: pt.number,\n    prefix: pt.string,\n  }).isRequired,\n  isDisabled: pt.bool,\n  onEmoteClick: pt.func.isRequired,\n  onChange: pt.func.isRequired,\n  onKeyUp: pt.func.isRequired,\n  onKeyDown: pt.func.isRequired,\n  onBlur: pt.func.isRequired,\n};\n\nexport default React.memo(ChatInput);\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  fill: \"currentColor\"\n}, React.createElement(\"path\", {\n  d: \"M10 8a2 2 0 100 4 2 2 0 000-4z\"\n}), React.createElement(\"path\", {\n  fillRule: \"evenodd\",\n  d: \"M9 2h2a2.01 2.01 0 001.235 1.855l.53.22a2.01 2.01 0 002.185-.439l1.414 1.414a2.01 2.01 0 00-.439 2.185l.22.53A2.01 2.01 0 0018 9v2a2.01 2.01 0 00-1.855 1.235l-.22.53a2.01 2.01 0 00.44 2.185l-1.415 1.414a2.01 2.01 0 00-2.184-.439l-.531.22A2.01 2.01 0 0011 18H9a2.01 2.01 0 00-1.235-1.854l-.53-.22a2.009 2.009 0 00-2.185.438L3.636 14.95a2.009 2.009 0 00.438-2.184l-.22-.531A2.01 2.01 0 002 11V9c.809 0 1.545-.487 1.854-1.235l.22-.53a2.009 2.009 0 00-.438-2.185L5.05 3.636a2.01 2.01 0 002.185.438l.53-.22A2.01 2.01 0 009 2zm-4 8l1.464 3.536L10 15l3.535-1.464L15 10l-1.465-3.536L10 5 6.464 6.464 5 10z\",\n  clipRule: \"evenodd\"\n}));\n\nvar SvgGears = function SvgGears(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 20 20\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgGears, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/gears.5f76af43.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#fff\",\n  d: \"M13 8l-5 5v18h6v5l5-5h4l9-9V8z\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#9147ff\",\n  d: \"M26 25l4-4V10H14v15h4v4l4-4z\"\n});\n\nvar _ref4 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#fff\",\n  d: \"M20 14h2v6h-2v-6zm7 0v6h-2v-6h2z\"\n});\n\nvar SvgTwitch = function SvgTwitch(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 40 40\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2, _ref3, _ref4);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgTwitch, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/twitch.75e6e194.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react';\nimport pt from 'prop-types';\nimport styled from 'styled-components';\n\nconst SwitchRoot = styled.div`\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  line-height: 20px;\n`;\nconst Label = styled.label`\n  content: '';\n  position: relative;\n  display: inline-block;\n  order: 0;\n  width: 35px;\n  height: 20px;\n  vertical-align: bottom;\n  border-radius: 10px/50%;\n  background-color: rgba(0, 0, 0, 0.3);\n  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.15), 0 0 2px rgba(0, 0, 0, 0.1);\n  transition: background-color 0.1s ease;\n  cursor: pointer;\n\n  &:after {\n    content: '';\n    position: absolute;\n    top: 2px;\n    left: 2px;\n    bottom: 2px;\n    display: block;\n    width: 16px;\n    border-radius: 50%;\n    background-color: #fff;\n    transition: left 0.1s ease;\n  }\n`;\nconst Input = styled.input.attrs({ type: 'checkbox' })`\n  position: absolute;\n  opacity: 0;\n\n  &:checked + ${Label} {\n    background-color: #9147ff;\n\n    &:after {\n      content: '';\n      top: 2px;\n      left: calc(100% - 18px);\n    }\n\n    &:before {\n      content: '';\n      position: absolute;\n      top: 9px;\n      left: 10px;\n      display: block;\n      height: 3px;\n      width: 7px;\n      border-bottom: 2px solid #fff;\n      border-left: 2px solid #fff;\n      transform: translate3d(-50%, -50%, 0) rotate(-45deg);\n    }\n  }\n`;\n\nconst Switch = ({ id, label, checked, readOnly, onChange }) => (\n  <SwitchRoot>\n    <Input\n      id={id}\n      label={label}\n      checked={checked}\n      readOnly={readOnly}\n      onChange={onChange}\n    />\n    <Label htmlFor={id} />\n  </SwitchRoot>\n);\n\nSwitch.defaultProps = {\n  checked: false,\n  readOnly: false,\n  onChange: () => {},\n};\n\nSwitch.propTypes = {\n  id: pt.string.isRequired,\n  label: pt.string.isRequired,\n  checked: pt.bool,\n  readOnly: pt.bool,\n  onChange: pt.func,\n};\n\nexport default Switch;\n","import React, { useCallback } from 'react';\nimport pt from 'prop-types';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport styled from 'styled-components';\n\nimport { changeOption } from 'reducers/options';\nimport { optionsSelector } from 'reducers/options/selectors';\nimport Scrollbar from 'components/Scrollbar';\nimport Switch from 'components/Switch';\n\nconst OptionsRoot = styled.div`\n  padding: 16px;\n  height: 100%;\n`;\nconst Header = styled.h2`\n  margin: 0;\n  padding: 0;\n  font-size: 14px;\n  text-align: center;\n  color: rgba(255, 255, 255, 0.8);\n`;\nconst Categories = styled(Scrollbar)`\n  height: 100%;\n`;\nconst Category = styled.div`\n  &:not(:last-child) {\n    padding-bottom: 10px;\n    border-bottom: 1px solid rgba(255, 255, 255, 0.15);\n  }\n`;\nconst CategoryHeader = styled.div`\n  padding: 8px 0;\n  font-weight: bold;\n  color: rgba(255, 255, 255, 0.6);\n`;\nconst CategoryItems = styled.div``;\nconst Option = styled.div`\n  display: flex;\n  justify-content: space-between;\n  padding: 4px 0;\n  cursor: pointer;\n`;\nconst OptionText = styled.span``;\nconst Profile = styled.div`\n  display: flex;\n  align-items: center;\n`;\nconst UserName = styled.div`\n  font-weight: bold;\n  color: ${(p) => p.color};\n`;\nconst LogOutButton = styled.a`\n  margin-left: auto;\n  color: #bf94ff;\n  text-decoration: none;\n  cursor: pointer;\n\n  &:focus,\n  &:hover {\n    color: #a970ff;\n    text-decoration: underline;\n  }\n\n  &:visited {\n    color: #a970ff;\n  }\n`;\nconst Badge = styled.img`\n  margin-right: 3px;\n  max-width: 100%;\n  vertical-align: middle;\n  border-radius: 3px;\n`;\n\nconst Options = ({ isAuth, userDisplayName, userColor, userBadgesImages }) => {\n  const dispatch = useDispatch();\n  const options = useSelector(optionsSelector);\n\n  const renderOption = useCallback(\n    ({ id, name, title, description, value }) => (\n      <Option\n        key={id}\n        onClick={() => dispatch(changeOption(name, !value))}\n        title={description}\n      >\n        <OptionText>{title}</OptionText>\n        <Switch\n          id={id}\n          label={title}\n          checked={value}\n          onChange={() => dispatch(changeOption(name, value))}\n        />\n      </Option>\n    ),\n    [dispatch],\n  );\n\n  const renderProfileCategory = () => (\n    <Category>\n      <CategoryHeader>Profile</CategoryHeader>\n      <CategoryItems>\n        <Profile>\n          {userBadgesImages.map(({ alt, label, src, srcSet }, key) => (\n            <Badge\n              // eslint-disable-next-line react/no-array-index-key\n              key={key}\n              alt={alt}\n              aria-label={label}\n              src={src}\n              srcSet={srcSet}\n            />\n          ))}\n          <UserName color={userColor}>{userDisplayName}</UserName>\n          <LogOutButton as={Link} to=\"/chat/logout\">\n            Log Out\n          </LogOutButton>\n        </Profile>\n      </CategoryItems>\n    </Category>\n  );\n\n  const renderOptionsCategory = useCallback(\n    ({ title, items }, key) => (\n      <Category key={key}>\n        {!!title && <CategoryHeader>{title}</CategoryHeader>}\n        <CategoryItems>{items.map(renderOption)}</CategoryItems>\n      </Category>\n    ),\n    [renderOption],\n  );\n\n  return (\n    <OptionsRoot>\n      <Header>Chat settings</Header>\n      <Categories>\n        {isAuth && renderProfileCategory()}\n        {options.map(renderOptionsCategory)}\n      </Categories>\n    </OptionsRoot>\n  );\n};\n\nOptions.defaultProps = {\n  userDisplayName: '',\n  userColor: '',\n  userBadgesImages: [],\n};\n\nOptions.propTypes = {\n  isAuth: pt.bool.isRequired,\n  userDisplayName: pt.string,\n  userColor: pt.string,\n  userBadgesImages: pt.arrayOf(pt.shape({})),\n};\n\nexport default Options;\n","import React, { useState, useRef } from 'react';\nimport pt from 'prop-types';\nimport styled from 'styled-components';\nimport { Link } from 'react-router-dom';\nimport useOnClickOutside from 'use-onclickoutside';\n\nimport { ReactComponent as GearsIconSvg } from 'icons/gears.svg';\nimport { ReactComponent as TwitchIconSvg } from 'icons/twitch.svg';\nimport IconButton from 'components/IconButton';\nimport ChatModal from 'components/ChatModal';\nimport Options from 'components/Options';\n\nconst ChatControlsRoot = styled.div`\n  position: relative;\n  padding-left: 10px;\n  padding-right: 10px;\n  padding-bottom: 10px;\n`;\nconst Controls = styled.div`\n  display: flex;\n  align-items: center;\n\n  & > :not(:last-child) {\n    margin-right: 8px;\n  }\n`;\nconst OptionsModal = styled.div`\n  position: absolute;\n  top: auto;\n  right: 0;\n  bottom: 100%;\n  margin-bottom: 10px;\n  width: 320px;\n  height: 405px;\n  min-width: 0;\n  white-space: nowrap;\n`;\nconst Button = styled.button.attrs({ type: 'button' })`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 0 10px;\n  height: 30px;\n  border: none;\n  color: #fff;\n  background-color: #9147ff;\n  outline: none;\n  font-size: 12px;\n  border-radius: 4px;\n  text-decoration: none;\n  cursor: pointer;\n\n  &:hover {\n    background-color: #772ce8;\n  }\n\n  &:active {\n    background-color: #5c16c5;\n  }\n\n  &:focus {\n    box-shadow: 0 0 6px 0 #772ce8;\n  }\n\n  &[disabled] {\n    background-color: rgba(255, 255, 255, 0.26);\n    color: rgba(255, 255, 255, 0.8);\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n`;\nconst OptionsButton = styled(IconButton)`\n  margin-left: auto;\n`;\nconst GearsIcon = styled(GearsIconSvg)`\n  display: block;\n  width: 20px;\n  height: 20px;\n`;\nconst TwitchIcon = styled(TwitchIconSvg)`\n  display: block;\n  margin-right: 4px;\n  width: 20px;\n  height: 20px;\n`;\n\nconst ChatControls = ({\n  userDisplayName,\n  userColor,\n  userBadgesImages,\n  isAuth,\n  isDisabled,\n  onSendMessage,\n}) => {\n  const [isOptionsModalVisible, setIsOptionsModalVisible] = useState(false);\n  const optionsModalRef = useRef(null);\n\n  const handleCloseOptionsModal = () => setIsOptionsModalVisible(false);\n\n  useOnClickOutside(optionsModalRef, handleCloseOptionsModal);\n\n  const renderSignInButton = () => (\n    <Button as={Link} to=\"/chat/auth\">\n      <TwitchIcon />\n      Sign in with Twitch\n    </Button>\n  );\n\n  const renderOptionsModal = () => (\n    <OptionsModal ref={optionsModalRef}>\n      <ChatModal onClose={handleCloseOptionsModal}>\n        <Options\n          isAuth={isAuth}\n          userDisplayName={userDisplayName}\n          userColor={userColor}\n          userBadgesImages={userBadgesImages}\n        />\n      </ChatModal>\n    </OptionsModal>\n  );\n\n  return (\n    <ChatControlsRoot>\n      <Controls>\n        {!isAuth && renderSignInButton()}\n        <OptionsButton\n          onClick={() => setIsOptionsModalVisible(!isOptionsModalVisible)}\n        >\n          <GearsIcon />\n        </OptionsButton>\n        <Button disabled={isDisabled} onClick={onSendMessage}>\n          Chat\n        </Button>\n      </Controls>\n      {isOptionsModalVisible && renderOptionsModal()}\n    </ChatControlsRoot>\n  );\n};\n\nChatControls.defaultProps = {\n  userDisplayName: '',\n  userColor: '',\n  userBadgesImages: [],\n  isDisabled: false,\n};\n\nChatControls.propTypes = {\n  userDisplayName: pt.string,\n  userColor: pt.string,\n  userBadgesImages: pt.arrayOf(pt.shape({})),\n  isAuth: pt.bool.isRequired,\n  isDisabled: pt.bool,\n  onSendMessage: pt.func.isRequired,\n};\n\nexport default React.memo(ChatControls);\n","import pt from 'prop-types';\n\nimport { MESSAGE_TYPES } from 'utils/constants';\nimport {\n  twitchEmoteType,\n  bttvEmoteType,\n  ffzEmoteType,\n  emojiType,\n  mentionType,\n  linkType,\n} from 'utils/formatMessage';\n\nexport const messageType = pt.shape({\n  type: pt.oneOf([MESSAGE_TYPES.MESSAGE]).isRequired,\n  message: pt.string.isRequired,\n  messageArray: pt.arrayOf(\n    pt.oneOfType([\n      pt.string,\n      twitchEmoteType,\n      bttvEmoteType,\n      ffzEmoteType,\n      emojiType,\n      mentionType,\n      linkType,\n    ]),\n  ).isRequired,\n  tags: pt.shape({\n    badgeInfo: pt.shape({\n      subscriber: pt.string,\n    }),\n    badges: pt.shape({}),\n    color: pt.string,\n    displayName: pt.string.isRequired,\n    emotes: pt.shape({}),\n    flags: pt.string,\n    id: pt.string,\n    mod: pt.bool,\n    roomId: pt.string,\n    tmiSentId: pt.oneOfType([pt.string, pt.number]),\n    userId: pt.string,\n  }).isRequired,\n  badges: pt.arrayOf(\n    pt.shape({\n      alt: pt.string,\n      label: pt.string,\n      src: pt.string.isRequired,\n      srcSet: pt.string,\n    }),\n  ),\n  user: pt.string.isRequired,\n  isHistory: pt.bool,\n  isAction: pt.bool,\n  isDeleted: pt.bool,\n});\n\nexport const noticeType = pt.shape({\n  type: pt.oneOf([MESSAGE_TYPES.NOTICE_MESSAGE]).isRequired,\n  message: pt.string.isRequired,\n  channel: pt.string.isRequired,\n  tags: pt.shape({\n    msgId: pt.string.isRequired,\n  }).isRequired,\n});\n\nexport const userNoticeType = pt.shape({\n  type: pt.oneOf([MESSAGE_TYPES.USER_NOTICE_MESSAGE]).isRequired,\n  message: pt.string,\n  channel: pt.string.isRequired,\n  tags: pt.shape({\n    badgeInfo: pt.shape({\n      subscriber: pt.string,\n    }),\n    badges: pt.shape({}),\n    color: pt.string,\n    displayName: pt.string.isRequired,\n    emotes: pt.shape({}),\n    id: pt.string,\n    login: pt.string,\n    mod: pt.bool,\n    msgId: pt.string,\n    systemMsg: pt.string,\n    tmiSentId: pt.oneOfType([pt.string, pt.number]),\n    userId: pt.string,\n    msgParamCumulativeMonths: pt.number,\n    msgParamDisplayName: pt.string,\n    msgParamLogin: pt.string,\n    msgParamMonths: pt.number,\n    msgParamPromoGiftTotal: pt.number,\n    msgParamPromoName: pt.string,\n    msgParamRecipientDisplayName: pt.string,\n    msgParamRecipientId: pt.string,\n    msgParamRecipientUserName: pt.string,\n    msgParamSenderLogin: pt.string,\n    msgParamSenderName: pt.string,\n    msgParamShouldShareStreak: pt.bool,\n    msgParamStreakMonths: pt.number,\n    msgParamSubPlan: pt.string,\n    msgParamSubPlanName: pt.string,\n    msgParamViewerCount: pt.number,\n    msgParamRitualName: pt.string,\n    msgParamThreshold: pt.number,\n  }).isRequired,\n});\n","import React, { useState } from 'react';\nimport pt from 'prop-types';\nimport styled, { css } from 'styled-components';\nimport { format } from 'date-fns/fp';\n\nimport { messageType } from './types';\n\nconst getChatMessageBg = (p) => {\n  if (p.isMention) return 'rgba(255, 0, 0, 0.3)';\n  if (p.isEven) return '#1f1925';\n  return 'transparent';\n};\n\nconst MessageRoot = styled.div`\n  padding: 5px 20px;\n  color: ${(p) => (p.isAction ? p.color : '#fff')};\n  opacity: ${(p) => (p.isHistory || p.isDeleted ? '0.5' : '1')};\n  line-height: 20px;\n  word-wrap: break-word;\n  background-color: ${getChatMessageBg};\n`;\nconst Name = styled.span`\n  font-weight: bold;\n  color: ${(p) => p.color};\n  cursor: pointer;\n`;\nconst Emote = styled.img`\n  display: inline-block;\n  margin: -5px 0;\n  vertical-align: middle;\n`;\nconst Emoji = styled.img`\n  display: inline-block;\n  margin-top: -5px;\n  margin-bottom: -4px;\n  width: 20px;\n  height: auto;\n  vertical-align: middle;\n`;\nconst Mention = styled.span`\n  ${(p) =>\n    (p.isActive || p.isOwnMessage) &&\n    css`\n      padding: 2px 4px;\n    `};\n  ${(p) =>\n    p.isOwnMessage &&\n    css`\n      background-color: #40404a;\n      color: #fff;\n    `};\n  ${(p) =>\n    p.isActive &&\n    css`\n      background-color: #fafafa;\n      color: #18181b;\n    `};\n`;\nconst Link = styled.a`\n  color: #bf94ff;\n  text-decoration: none;\n  cursor: pointer;\n\n  &:focus,\n  &:hover {\n    color: #a970ff;\n    text-decoration: underline;\n  }\n\n  &:visited {\n    color: #a970ff;\n  }\n`;\nconst Timestamp = styled.span`\n  margin-right: 5px;\n  color: rgba(255, 255, 255, 0.6);\n`;\nconst Badge = styled.img`\n  margin-bottom: 2px;\n  margin-right: 3px;\n  max-width: 100%;\n  vertical-align: middle;\n  border-radius: 3px;\n`;\n\nconst renderMessageArray = (user, userLogin) => (item, key) => {\n  if (typeof item !== 'object') return item;\n\n  if (\n    item.type === 'twitch-emote' ||\n    item.type === 'bttv-emote' ||\n    item.type === 'ffz-emote'\n  ) {\n    return (\n      <Emote key={key} src={item.src} srcSet={item.srcSet} alt={item.alt} />\n    );\n  }\n\n  if (item.type === 'emoji') {\n    return (\n      <Emoji key={key} src={item.src} srcSet={item.srcSet} alt={item.alt} />\n    );\n  }\n\n  if (item.type === 'mention') {\n    return (\n      <Mention\n        key={key}\n        isActive={item.target === userLogin}\n        isOwnMessage={user === userLogin}\n      >\n        {item.text}\n      </Mention>\n    );\n  }\n\n  if (item.type === 'link') {\n    return (\n      <Link\n        key={key}\n        href={item.href}\n        rel=\"noreferrer noopener\"\n        target=\"_blank\"\n      >\n        {item.text}\n      </Link>\n    );\n  }\n\n  return null;\n};\n\nconst renderBadges = (badges) =>\n  badges.map(({ alt, label, src, srcSet }, key) => (\n    // eslint-disable-next-line react/no-array-index-key\n    <Badge key={key} alt={alt} aria-label={label} src={src} srcSet={srcSet} />\n  ));\n\nconst MESSAGE_DELETED_LABEL = '<message deleted>';\n\nconst Message = ({\n  message: {\n    message,\n    messageArray,\n    tags: { color, displayName, tmiSentTs },\n    badges,\n    user,\n    isHistory,\n    isAction,\n    isDeleted,\n  },\n  userLogin,\n  isEven,\n  isShowTimestamps,\n  // onNameClick,\n  onNameRightClick,\n}) => {\n  const [isVisible, setIsVisible] = useState(false);\n  const isMention = user !== userLogin && RegExp(userLogin, 'gi').test(message);\n\n  const handleNameRightClick = (e) => {\n    onNameRightClick(displayName);\n    e.preventDefault();\n  };\n\n  return (\n    <MessageRoot\n      isHistory={isHistory}\n      isAction={isAction}\n      isEven={isEven}\n      isMention={isMention}\n      isDeleted={isDeleted}\n      color={color}\n    >\n      {isShowTimestamps && (\n        <Timestamp>{format('h:mm', new Date(tmiSentTs))}</Timestamp>\n      )}\n      {badges.length > 0 && renderBadges(badges)}\n      <Name color={color} onContextMenu={handleNameRightClick}>\n        {displayName}\n      </Name>\n      {isAction ? ' ' : ': '}\n      {isDeleted && !isVisible ? (\n        // eslint-disable-next-line jsx-a11y/anchor-is-valid\n        <Link onClick={() => setIsVisible(true)}>{MESSAGE_DELETED_LABEL}</Link>\n      ) : (\n        messageArray.map(renderMessageArray(user, userLogin))\n      )}\n    </MessageRoot>\n  );\n};\n\nMessage.defaultProps = {\n  userLogin: '',\n  isEven: false,\n  isShowTimestamps: false,\n  // onNameClick: () => {},\n  onNameRightClick: () => {},\n};\n\nMessage.propTypes = {\n  message: messageType.isRequired,\n  userLogin: pt.string,\n  isEven: pt.bool,\n  isShowTimestamps: pt.bool,\n  // onNameClick: pt.func,\n  onNameRightClick: pt.func,\n};\n\nexport default React.memo(Message);\n","import React from 'react';\nimport pt from 'prop-types';\nimport styled from 'styled-components';\n\nimport { noticeType } from './types';\n\nconst NoticeRoot = styled.div`\n  padding: 5px 20px;\n  color: rgba(255, 255, 255, 0.6);\n  line-height: 20px;\n  word-wrap: break-word;\n  background-color: ${(p) => (p.isEven ? '#1f1925' : 'transparent')};\n`;\n\nconst Notice = ({ message: { message }, isEven }) => (\n  <NoticeRoot isEven={isEven}>{message}</NoticeRoot>\n);\n\nNotice.defaultProps = {\n  isEven: false,\n};\n\nNotice.propTypes = {\n  message: noticeType.isRequired,\n  isEven: pt.bool,\n};\n\nexport default React.memo(Notice);\n","import React from 'react';\n// import pt from 'prop-types';\nimport styled from 'styled-components';\n\nimport { userNoticeType } from './types';\n\nconst UserNoticeRoot = styled.div`\n  padding: 5px 20px 5px 16px;\n  line-height: 20px;\n  word-wrap: break-word;\n  border-left: 4px solid #9147ff;\n  color: #fff;\n`;\n\nconst UserNotice = ({\n  message: {\n    tags: { systemMsg },\n  },\n}) => <UserNoticeRoot>{systemMsg}</UserNoticeRoot>;\n\nUserNotice.propTypes = {\n  message: userNoticeType.isRequired,\n};\n\nexport default React.memo(UserNotice);\n","import React from 'react';\nimport pt from 'prop-types';\n\nimport { MESSAGE_TYPES } from 'utils/constants';\nimport { messageType, noticeType, userNoticeType } from './types';\nimport Message from './Message';\nimport Notice from './Notice';\nimport UserNotice from './UserNotice';\n\nconst ChatMessage = ({\n  message,\n  userLogin,\n  isEven,\n  isShowTimestamps,\n  onNameClick,\n  onNameRightClick,\n}) => {\n  if (message.type === MESSAGE_TYPES.MESSAGE) {\n    return (\n      <Message\n        message={message}\n        userLogin={userLogin}\n        isEven={isEven}\n        isShowTimestamps={isShowTimestamps}\n        onNameClick={onNameClick}\n        onNameRightClick={onNameRightClick}\n      />\n    );\n  }\n\n  if (message.type === MESSAGE_TYPES.NOTICE_MESSAGE) {\n    return <Notice message={message} isEven={isEven} />;\n  }\n\n  if (message.type === MESSAGE_TYPES.USER_NOTICE_MESSAGE) {\n    return <UserNotice message={message} />;\n  }\n\n  return null;\n};\n\nChatMessage.defaultProps = {\n  userLogin: '',\n  isEven: false,\n  isShowTimestamps: false,\n  onNameClick: () => {},\n  onNameRightClick: () => {},\n};\n\nChatMessage.propTypes = {\n  message: pt.oneOfType([messageType, noticeType, userNoticeType]).isRequired,\n  userLogin: pt.string,\n  isEven: pt.bool,\n  isShowTimestamps: pt.bool,\n  onNameClick: pt.func,\n  onNameRightClick: pt.func,\n};\n\nexport default React.memo(ChatMessage);\n","import React, { useState, useEffect, useRef } from 'react';\nimport pt from 'prop-types';\nimport styled from 'styled-components';\n\nimport Scrollbar from 'components/Scrollbar';\nimport ChatMessage from 'components/ChatMessage';\n\nconst MORE_MESSAGES_OFFSET = 100;\n\nconst MessagesRoot = styled.div`\n  position: relative;\n  flex-grow: 1;\n`;\nconst StyledScrollbar = styled(Scrollbar)`\n  .ScrollbarsCustom-Content {\n    padding-bottom: 10px !important;\n  }\n`;\nconst MoreMessagesButton = styled.button`\n  position: absolute;\n  left: 50%;\n  bottom: 10px;\n  display: ${(p) => (p.visible ? 'block' : 'none')};\n  padding: 5px 20px;\n  background: rgba(0, 0, 0, 0.6);\n  color: #fff;\n  border-radius: 4px;\n  border: none;\n  outline: none;\n  cursor: pointer;\n  transform: translateX(-50%);\n`;\n\nconst Messages = ({\n  messages,\n  userLogin,\n  isEven,\n  isSplitChat,\n  isShowTimestamps,\n  onNameRightClick,\n}) => {\n  const [\n    isMoreMessagesButtonVisible,\n    setIsMoreMessagesButtonVisible,\n  ] = useState(false);\n\n  const handleScrollUpdate = ({\n    clientHeight,\n    contentScrollHeight,\n    scrollTop,\n  }) => {\n    const maxScrollTop = contentScrollHeight - clientHeight;\n    const isVisible = scrollTop + MORE_MESSAGES_OFFSET < maxScrollTop;\n\n    setIsMoreMessagesButtonVisible(isVisible);\n  };\n\n  const scrollbarRef = useRef(null);\n\n  const handleScrollToBottom = () => {\n    if (scrollbarRef.current && scrollbarRef.current.scrollToBottom) {\n      scrollbarRef.current.scrollToBottom();\n    }\n  };\n\n  useEffect(() => {\n    if (!isMoreMessagesButtonVisible) {\n      handleScrollToBottom();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [messages]);\n\n  const getIsEven = (key) => {\n    if (!isSplitChat) return false;\n    return isEven ? key % 2 === 1 : key % 2 === 0;\n  };\n\n  return (\n    <MessagesRoot>\n      <StyledScrollbar onUpdate={handleScrollUpdate} ref={scrollbarRef}>\n        {messages.map((message, key) => (\n          <ChatMessage\n            key={message.tags.id}\n            message={message}\n            userLogin={userLogin}\n            isEven={getIsEven(key)}\n            isShowTimestamps={isShowTimestamps}\n            onNameRightClick={onNameRightClick}\n          />\n        ))}\n      </StyledScrollbar>\n      <MoreMessagesButton\n        onClick={handleScrollToBottom}\n        visible={isMoreMessagesButtonVisible}\n      >\n        More messages below\n      </MoreMessagesButton>\n    </MessagesRoot>\n  );\n};\n\nMessages.defaultProps = {\n  messages: [],\n  userLogin: '',\n  isEven: false,\n  isSplitChat: true,\n  isShowTimestamps: false,\n  onNameRightClick: () => {},\n};\n\nMessages.propTypes = {\n  messages: pt.arrayOf(pt.shape({})),\n  userLogin: pt.string,\n  isEven: pt.bool,\n  isSplitChat: pt.bool,\n  isShowTimestamps: pt.bool,\n  onNameRightClick: pt.func,\n};\n\nexport default React.memo(Messages);\n","import React, { useState, useCallback, useRef } from 'react';\nimport pt from 'prop-types';\nimport { useSelector } from 'react-redux';\nimport styled from 'styled-components';\n\nimport useSetState from 'hooks/useSetState';\nimport {\n  messagesSelector,\n  isEvenSelector,\n  usersSelector,\n} from 'reducers/messages/selectors';\nimport {\n  isConnectedSelector,\n  userColorSelector,\n  userBadgesImagesSelector,\n} from 'reducers/chat/selectors';\nimport {\n  isShowTimestampsSelector,\n  isSplitChatSelector,\n  isFixedWidthSelector,\n} from 'reducers/options/selectors';\nimport {\n  userLoginSelector,\n  userDisplayNameSelector,\n  isAuthSelector,\n} from 'reducers/auth/selectors';\nimport {\n  emotesSelector,\n  emoteCategoriesSelector,\n} from 'reducers/emotes/selectors';\nimport { SUGGESTION_TYPES } from 'utils/constants';\nimport getUserSuggestions from 'utils/getUserSuggestions';\nimport getEmoteSuggestions from 'utils/getEmoteSuggestions';\nimport ChatInput from 'components/ChatInput';\nimport ChatControls from 'components/ChatControls';\nimport Messages from 'components/Messages';\n\nconst ChatRoot = styled.div`\n  height: 100vh;\n  font-size: 12px;\n  background-color: #0e0e10;\n`;\nconst ChatWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  width: ${(p) => (p.isFixedWidth ? '340px' : 'auto')};\n  height: 100%;\n  background-color: #18181b;\n`;\n\n// TODO: check if the user has a rights to send messages\n\nconst suggestionsInitialState = {\n  type: null,\n  isActive: false,\n  items: [],\n  activeIndex: 0,\n  start: 0,\n  end: 0,\n};\n\nconst setSuggestionsIndexUp = ({ activeIndex, items, ...rest }) => ({\n  activeIndex: activeIndex === 0 ? items.length - 1 : activeIndex - 1,\n  items,\n  ...rest,\n});\n\nconst setSuggestionsIndexDown = ({ activeIndex, items, ...rest }) => ({\n  activeIndex: activeIndex === items.length - 1 ? 0 : activeIndex + 1,\n  items,\n  ...rest,\n});\n\nconst replaceSuggestionText = (\n  text,\n  { type, items, activeIndex, start, end },\n) => {\n  if (items.length === 0) return text;\n\n  const currentItem = items[activeIndex];\n  const insertedText = type === 'users' ? `@${currentItem}` : currentItem.alt;\n\n  const textBefore = text.substring(0, start);\n  const testAfter = text.substring(end) || ' ';\n\n  return `${textBefore}${insertedText}${testAfter}`;\n};\n\nconst Chat = ({ onSendMessage }) => {\n  const [text, setText] = useState('');\n  const messages = useSelector(messagesSelector);\n  const userLogin = useSelector(userLoginSelector);\n  const userDisplayName = useSelector(userDisplayNameSelector);\n  const userColor = useSelector(userColorSelector);\n  const userBadgesImages = useSelector(userBadgesImagesSelector);\n  const emoteCategories = useSelector(emoteCategoriesSelector);\n  const emotes = useSelector(emotesSelector);\n  const users = useSelector(usersSelector);\n  const isAuth = useSelector(isAuthSelector);\n  const isConnected = useSelector(isConnectedSelector);\n  const isEven = useSelector(isEvenSelector);\n  const isShowTimestamps = useSelector(isShowTimestampsSelector);\n  const isSplitChat = useSelector(isSplitChatSelector);\n  const isFixedWidth = useSelector(isFixedWidthSelector);\n  const chatInputRef = useRef(null);\n  const [suggestions, setSuggestions] = useSetState(suggestionsInitialState);\n\n  // Refs to avoid multiple renders\n  const textRef = useRef(text);\n  textRef.current = text;\n  const usersRef = useRef(users);\n  usersRef.current = users;\n  const emotesRef = useRef(emotes);\n  emotesRef.current = emotes;\n  const suggestionsRef = useRef(suggestions);\n  suggestionsRef.current = suggestions;\n\n  const isDisabled = !isAuth || !isConnected;\n\n  const handleNameRightClick = useCallback(\n    (name) => {\n      setText((t) => `${t.trim()} @${name} `.trimLeft());\n      if (chatInputRef.current) {\n        chatInputRef.current.focus();\n      }\n    },\n    [setText, chatInputRef],\n  );\n\n  const handleEmoteClick = useCallback(\n    (emoteName) => {\n      setText((t) => `${t.trim()} ${emoteName} `.trimLeft());\n    },\n    [setText],\n  );\n\n  const handleSendMessage = useCallback(() => {\n    if (!textRef.current) return;\n    onSendMessage(textRef.current);\n    setText('');\n  }, [onSendMessage, textRef, setText]);\n\n  const handleBlur = useCallback(() => {\n    setSuggestions({ isActive: false });\n  }, [setSuggestions]);\n\n  const handleChange = useCallback(\n    (e) => {\n      const { value, selectionStart } = e.target;\n\n      setText(value);\n\n      const spaceIndexBefore = value.lastIndexOf(' ', selectionStart - 1);\n      const spaceIndexAfter = value.indexOf(' ', selectionStart);\n\n      const start = spaceIndexBefore === -1 ? 0 : spaceIndexBefore + 1;\n      const end = spaceIndexAfter === -1 ? value.length : spaceIndexAfter;\n\n      const word = value.substring(start, end);\n\n      const usersMatch = SUGGESTION_TYPES.users.regex.exec(word);\n\n      if (usersMatch) {\n        const [, beginText] = usersMatch;\n        const items = getUserSuggestions(\n          beginText,\n          usersRef.current,\n          userDisplayName,\n          SUGGESTION_TYPES.users.limit,\n        );\n\n        setSuggestions({\n          type: SUGGESTION_TYPES.users.name,\n          isActive: true,\n          items,\n          activeIndex: 0,\n          start,\n          end,\n        });\n\n        return;\n      }\n\n      const emotesMatch = SUGGESTION_TYPES.emotes.regex.exec(word);\n\n      if (emotesMatch) {\n        const [, beginText] = emotesMatch;\n        const items = getEmoteSuggestions(\n          beginText,\n          emotesRef.current,\n          SUGGESTION_TYPES.emotes.limit,\n        );\n\n        setSuggestions({\n          type: SUGGESTION_TYPES.emotes.name,\n          isActive: true,\n          items,\n          activeIndex: 0,\n          start,\n          end,\n        });\n\n        return;\n      }\n\n      if (suggestionsRef.current.isActive) {\n        setSuggestions(suggestionsInitialState);\n      }\n    },\n    [setText, setSuggestions, suggestionsRef, userDisplayName],\n  );\n\n  const handleKeyUp = useCallback(() => {}, []);\n\n  const handleKeyDown = useCallback(\n    (e) => {\n      if (suggestionsRef.current.isActive) {\n        if (e.key === 'Enter' || e.key === 'Tab') {\n          e.preventDefault();\n          setText((t) => replaceSuggestionText(t, suggestionsRef.current));\n          setSuggestions(suggestionsInitialState);\n\n          return;\n        }\n\n        if (e.key === 'ArrowUp') {\n          e.preventDefault();\n          setSuggestions(setSuggestionsIndexUp);\n          return;\n        }\n\n        if (e.key === 'ArrowDown') {\n          e.preventDefault();\n          setSuggestions(setSuggestionsIndexDown);\n          return;\n        }\n      }\n\n      if (!suggestionsRef.current.isActive) {\n        if (e.key === 'Enter') {\n          e.preventDefault();\n          handleSendMessage();\n        }\n      }\n    },\n    [handleSendMessage, setSuggestions, suggestionsRef],\n  );\n\n  return (\n    <ChatRoot>\n      <ChatWrapper isFixedWidth={isFixedWidth}>\n        <Messages\n          messages={messages}\n          userLogin={userLogin}\n          isEven={isSplitChat ? isEven : false}\n          isShowTimestamps={isShowTimestamps}\n          isSplitChat={isSplitChat}\n          onNameRightClick={handleNameRightClick}\n        />\n        <ChatInput\n          ref={chatInputRef}\n          text={text}\n          emoteCategories={emoteCategories}\n          suggestions={suggestions}\n          isDisabled={isDisabled}\n          isAuth={isAuth}\n          onEmoteClick={handleEmoteClick}\n          onChange={handleChange}\n          onKeyUp={handleKeyUp}\n          onKeyDown={handleKeyDown}\n          onBlur={handleBlur}\n        />\n        <ChatControls\n          userDisplayName={userDisplayName}\n          userColor={userColor}\n          userBadgesImages={userBadgesImages}\n          isDisabled={isDisabled}\n          isAuth={isAuth}\n          onSendMessage={handleSendMessage}\n        />\n      </ChatWrapper>\n    </ChatRoot>\n  );\n};\n\nChat.propTypes = {\n  onSendMessage: pt.func.isRequired,\n};\n\nexport default Chat;\n","import React, { useEffect, useCallback } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport jwt from 'jsonwebtoken';\n\nimport useFetchChatData from 'hooks/useFetchChatData';\nimport useCurrentChannel from 'hooks/useCurrentChannel';\nimport useTwitchClient from 'hooks/useTwitchClient';\nimport { isAuthReadySelector } from 'reducers/auth/selectors';\nimport { currentChannelSelector } from 'reducers/chat/selectors';\nimport { setAuth, fetchUser } from 'reducers/auth';\nimport replaceEmojis from 'utils/replaceEmojis';\nimport Chat from 'components/Chat';\n\nconst Home = () => {\n  const dispatch = useDispatch();\n\n  const isAuthReady = useSelector(isAuthReadySelector);\n  const currentChannel = useSelector(currentChannelSelector);\n\n  const client = useTwitchClient();\n\n  useCurrentChannel();\n  useFetchChatData();\n\n  useEffect(() => {\n    if (isAuthReady) return () => {};\n\n    const { user, idToken } = localStorage;\n\n    if (!idToken) {\n      dispatch(setAuth({ isAuthReady: true, isAuth: false }));\n      return () => {};\n    }\n\n    if (user) {\n      const params = {\n        isAuthReady: true,\n        isAuth: true,\n        user: JSON.parse(user),\n      };\n\n      dispatch(setAuth(params));\n    } else {\n      const { sub: id } = jwt.decode(idToken);\n\n      dispatch(fetchUser(id));\n    }\n\n    return () => {};\n  }, [dispatch, isAuthReady]);\n\n  const handleSendMessage = useCallback(\n    (message) => {\n      if (!client) return;\n      const normalizedMessage = replaceEmojis(message.trim());\n      client.say(currentChannel, normalizedMessage);\n    },\n    [client, currentChannel],\n  );\n\n  return <Chat onSendMessage={handleSendMessage} />;\n};\n\nexport default Home;\n","import {\n  TWITCH_API_AUTH_BASE,\n  TWITCH_API_CLIENT_ID,\n  TWITCH_API_REDIRECT_URI,\n} from 'utils/constants';\n\nconst authParams = {\n  client_id: TWITCH_API_CLIENT_ID,\n  redirect_uri: TWITCH_API_REDIRECT_URI,\n  response_type: 'token+id_token',\n  scope: [\n    'openid',\n    'channel:moderate',\n    'chat:edit',\n    'chat:read',\n    'whispers:read',\n    'whispers:edit',\n    'user_blocks_read',\n    'user_blocks_edit',\n    'user_subscriptions',\n  ].join('+'),\n  claims: JSON.stringify({\n    id_token: { email_verified: null, picture: null, preferred_username: null },\n  }),\n  // state: uid(),\n};\n\nconst getAuthUrl = () => {\n  const search = Object.entries(authParams)\n    .map(([key, value]) => `${key}=${value}`)\n    .join('&');\n\n  return `${TWITCH_API_AUTH_BASE}?${search}`;\n};\n\nexport default getAuthUrl;\n","import getAuthUrl from 'utils/getAuthUrl';\n\n// const href = `http://localhost:3000/chat/#access_token=1r74fjj6m8ocwfuowvb6jdlh9uvwsg&id_token=eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjEifQ.eyJhdWQiOiI0ZTY2dzFwbzF0emY2NDVyOXZ1dG45cXVzMDV2Zzl4IiwiZXhwIjoxNTc0MzU2ODc0LCJpYXQiOjE1NzQzNTU5NzQsImlzcyI6Imh0dHBzOi8vaWQudHdpdGNoLnR2L29hdXRoMiIsInN1YiI6IjM4MjU5NDI1IiwiYXRfaGFzaCI6ImNNYVhLR3g5VnJIaW9PcC1oUkRrd0EiLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwicGljdHVyZSI6Imh0dHBzOi8vc3RhdGljLWNkbi5qdHZudy5uZXQvanR2X3VzZXJfcGljdHVyZXMvZG1pdHJ5c2NhbGV0dGEtcHJvZmlsZV9pbWFnZS00MWIwMzZkMGVmNjQwMDUzLTE1MHgxNTAuanBlZyIsInByZWZlcnJlZF91c2VybmFtZSI6IkRtaXRyeVNjYWxldHRhIn0.4PS13e-l2BnPyjpejh-mcOE571Z3al7t6pcAHHuKclBGDF8cswhTfmbFOPZCWR9-Qu7mEF74ijykVsLWB1KG5dcijdH4r3A0D0wtv7g9_FE5HNs5nS6V2IqSK0HDSxSVyZTze2tWH5xy1s9PUzLl4-K-9_Ij1Ow7D-M1fkF2fcm7v4V541kApfZi4pUg7iabJ-QJXRCEoWgY523R_oC5Lu1d3mkhcaGQM7YQbmAZy8nZiX4dIe9QwhaVbd6_1lwDNyoySK6aHk6zhroP9e80EgMHU39gutmpJlEtxqcB_llBa2xa2twaqq7Pt5sIibuWejCRscAyFzcEAsHckJlE9Q&scope=openid+channel%253Amoderate+chat%253Aedit+chat%253Aread+whispers%253Aread+whispers%253Aedit+user_blocks_read+user_blocks_edit+user_subscriptions&token_type=bearer`;\n\nconst Auth = () => {\n  window.location.href = getAuthUrl();\n  // window.location.href = href;\n\n  return null;\n};\n\nexport default Auth;\n","import { useDispatch } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\n\nimport { setAuth } from 'reducers/auth';\n\nconst Logout = () => {\n  const history = useHistory();\n  const dispatch = useDispatch();\n\n  localStorage.removeItem('accessToken');\n  localStorage.removeItem('idToken');\n  localStorage.removeItem('user');\n\n  dispatch(setAuth({ isAuthReady: false, isAuth: false }));\n\n  history.push({\n    pathname: '/chat/',\n    hash: localStorage.lastChannel || '',\n  });\n\n  return null;\n};\n\nexport default Logout;\n","import { useHistory } from 'react-router-dom';\n\nconst AuthCallback = () => {\n  const history = useHistory();\n\n  if (!window.location.hash) return null;\n\n  const params = new URLSearchParams(window.location.hash.slice(1));\n\n  const accessToken = params.get('access_token');\n  const idToken = params.get('id_token');\n\n  if (!accessToken || !idToken) return null;\n\n  localStorage.setItem('accessToken', accessToken);\n  localStorage.setItem('idToken', idToken);\n\n  history.push({\n    pathname: '/chat/',\n    hash: localStorage.lastChannel || '',\n  });\n\n  return null;\n};\n\nexport default AuthCallback;\n","import { css } from 'styled-components';\n\nexport default css`\n  * {\n    box-sizing: border-box;\n  }\n  body {\n    margin: 0;\n    font-family: Roobert, Helvetica Neue, Helvetica, Arial, sans-serif;\n  }\n`;\n","import { css } from 'styled-components';\n\nexport default css``;\n","import { css } from 'styled-components';\n\nexport default css``;\n","import { createGlobalStyle } from 'styled-components';\n\nimport common from 'styles/common';\nimport colors from 'styles/colors';\nimport vars from 'styles/vars';\n\nexport default createGlobalStyle`\n  :root {\n    ${colors};\n    ${vars};\n  }\n  ${common};\n`;\n","import React from 'react';\nimport { Provider } from 'react-redux';\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  RouteComponentProps,\n} from 'react-router-dom';\n\nimport isAuthRedirect from 'utils/isAuthRedirect';\nimport Home from 'components/Home';\nimport Auth from 'components/Auth';\nimport Logout from 'components/Logout';\nimport AuthCallback from 'components/AuthCallback';\nimport GlobalStyles from 'styles';\n\nconst getHomeComponent = ({ location }: RouteComponentProps) =>\n  isAuthRedirect(location.hash) ? <AuthCallback /> : <Home />;\n\ninterface Props {\n  store: any;\n}\n\nconst App: React.FC<Props> = ({ store }) => (\n  <>\n    <Provider store={store}>\n      <Router>\n        <Switch>\n          <Route exact path=\"/chat/\" render={getHomeComponent} />\n          <Route exact path=\"/chat/auth\" component={Auth} />\n          <Route exact path=\"/chat/logout\" component={Logout} />\n        </Switch>\n      </Router>\n    </Provider>\n    <GlobalStyles />\n  </>\n);\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport ReactGA from 'react-ga';\n\nimport isAuthRedirect from 'utils/isAuthRedirect';\nimport store from 'store';\nimport App from './App';\n// import * as serviceWorker from './serviceWorker';\n\nif (process.env.NODE_ENV === 'production') {\n  ReactGA.initialize('UA-139550930-3');\n\n  if (!isAuthRedirect(window.location.hash)) {\n    const page =\n      window.location.pathname + window.location.search + window.location.hash;\n    ReactGA.pageview(page);\n  }\n}\n\nReactDOM.render(<App store={store} />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n// serviceWorker.unregister();\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./twitch-simple-irc.cjs.production.min.js');\n} else {\n  module.exports = require('./twitch-simple-irc.cjs.development.js');\n}"],"sourceRoot":""}