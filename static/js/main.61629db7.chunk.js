(this["webpackJsonphoney-chat"]=this["webpackJsonphoney-chat"]||[]).push([[0],{145:function(n,t,e){n.exports=e(271)},160:function(n,t){},162:function(n,t){},201:function(n,t){},202:function(n,t){},260:function(n,t){},269:function(n,t){},271:function(n,t,e){"use strict";e.r(t);var r,o=e(0),c=e.n(o),a=e(47),i=e.n(a),u=e(29),s=e(133),l=e(19),f=e(38),b=e.n(f),p=e(58),d=e(87),m=e(273),h=function(n){return t="".concat("https://api.twitch.tv/helix","/users?id=").concat(n),fetch(t,{headers:{Authorization:"Bearer ".concat(localStorage.accessToken)}}).then((function(n){return n.json()}));var t};function O(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function g(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?O(e,!0).forEach((function(t){Object(l.a)(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):O(e).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}var v=Object(d.a)("SET_IS_AUTH"),j=Object(d.a)("FETCH_USER_REQUEST"),y=Object(d.a)("FETCH_USER_SUCCESS"),w=Object(d.a)("FETCH_USER_FAILURE"),E=Object(m.a)((r={},Object(l.a)(r,v,(function(n,t){var e=t.payload,r=e.isAuth,o=e.user;return g({},n,{isAuth:void 0===r?n.isAuth:r,user:g({},n.user,{},o)})})),Object(l.a)(r,j,(function(n){return g({},n,{isLoading:!0})})),Object(l.a)(r,y,(function(n,t){return g({},n,{isAuth:!0,isLoading:!1,user:t.payload})})),Object(l.a)(r,w,(function(n,t){return g({},n,{isAuth:!1,isLoading:!1,error:t.payload})})),r),{isAuth:!1,isLoading:!1,user:{id:null,login:null,displayName:null}}),x=e(33),S=e(272),k=e(274);function _(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}var P=Object(S.a)({ADD_MESSAGE:function(n){return{messages:[n]}},ADD_MESSAGES:function(n){return{messages:n}}}),D=P.addMessage,T=P.addMessages,A=Object(m.a)(Object(l.a)({},Object(k.a)(D,T),(function(n,t){var e=t.payload.messages;return function(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?_(e,!0).forEach((function(t){Object(l.a)(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):_(e).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}({},n,{items:[].concat(Object(x.a)(n.items),Object(x.a)(e))})})),{items:[]}),H=Object(u.c)({auth:E,messages:A}),C=e(25),I=e(48),L=e(30),N=e(135),R=e.n(N),U=function(){var n=Object(C.b)(),t=Object(L.f)();if(!window.location.hash)return null;var e=new URLSearchParams(window.location.hash.slice(1)),r=e.get("access_token"),o=e.get("id_token");if(!r||!o)return null;localStorage.setItem("accessToken",r),localStorage.setItem("idToken",o);var c=R.a.decode(o).sub;return function(n){return function(){var t=Object(p.a)(b.a.mark((function t(e){var r,o,c,a,i;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(j()),t.next=3,h(e);case 3:r=t.sent,o=r.data[0],c=o.login,a=o.display_name,i={id:e,login:c,displayName:a},localStorage.setItem("user",JSON.stringify(i)),n(y(i));case 8:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}()}(n)(c),t.push("/chat/"),null},z=e(14),M=e(5),F=e(6),J=e(137),X=e(81),B=e.n(X),G=e(138);function V(){var n=Object(M.a)(["\n  display: block;\n  padding: 10px;\n  width: 100%;\n  height: 38px;\n  max-height: 91px;\n  min-height: 40px;\n  overflow: hidden;\n  border: 2px solid transparent;\n  background-color: #262626;\n  font-family: inherit;\n  line-height: 1.5;\n  border-radius: 4px;\n  outline: none;\n  color: #fff;\n  resize: none;\n  transition-duration: 0.1s;\n  transition-timing-function: ease-in;\n  transition-property: box-shadow, border, background-color;\n\n  &:focus {\n    background-color: #000;\n    border-color: #9147ff;\n  }\n\n  &[disabled] {\n    opacity: 0.5;\n    pointer-events: none;\n  }\n"]);return V=function(){return n},n}function q(){var n=Object(M.a)(["\n  padding: 0 10px;\n  height: 30px;\n  border: none;\n  color: #fff;\n  background-color: #9147ff;\n  outline: none;\n  font-size: 12px;\n  border-radius: 4px;\n  cursor: pointer;\n\n  &:hover {\n    background-color: #772ce8;\n  }\n\n  &:active {\n    background-color: #5c16c5;\n  }\n\n  &:focus {\n    box-shadow: 0 0 6px 0 #772ce8;\n  }\n\n  &[disabled] {\n    background-color: rgba(255, 255, 255, 0.26);\n    color: rgba(255, 255, 255, 0.8);\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n"]);return q=function(){return n},n}function Y(){var n=Object(M.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n  align-items: center;\n\n  & > :not(:last-child) {\n    margin-right: 20px;\n  }\n\n  a {\n    color: #bf94ff;\n    text-decoration: none;\n\n    &:focus,\n    &:hover {\n      color: #a970ff;\n      text-decoration: underline;\n    }\n\n    &:visited {\n      color: #a970ff;\n    }\n  }\n"]);return Y=function(){return n},n}function Q(){var n=Object(M.a)(["\n  padding-left: 10px;\n  padding-right: 10px;\n  padding-bottom: 10px;\n  background-color: #000;\n\n  & > :not(:last-child) {\n    margin-bottom: 10px;\n  }\n"]);return Q=function(){return n},n}var W=F.c.form(Q()),K=F.c.div(Y()),Z=F.c.button(q()),$=F.c.textarea(V()),nn=function(n){var t=n.isAuth,e=n.isDisabled,r=n.onSubmit,a=Object(o.useRef)(null),i=Object(o.useState)(""),u=Object(z.a)(i,2),s=u[0],l=u[1],f=Object(o.useCallback)((function(n){"Enter"===n.key&&(r(s),l(""))}),[r,l,s]);return Object(o.useEffect)((function(){var n=a.current;return n.addEventListener("keyup",f,!1),function(){return n.removeEventListener("keyup",f,!1)}}),[f]),c.a.createElement(W,{onSubmit:function(n){n.preventDefault(),r(s),l("")}},c.a.createElement($,{name:"message",placeholder:"Send a message",ref:a,maxLength:500,disabled:e,onChange:function(n){return l(n.target.value)},value:s}),c.a.createElement(K,null,!t&&c.a.createElement(I.b,{to:"/chat/auth"},"Sign in with Twitch"),c.a.createElement(Z,{disabled:e,type:"submit"},"Chat")))};nn.defaultProps={isDisabled:!1};var tn=nn,en=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,e=n.split("");return Object.entries(t||{}).forEach((function(n){var t=Object(z.a)(n,2),r=t[0];t[1].forEach((function(n){if("string"===typeof n){var t=n.split("-").map(Number),o=Object(z.a)(t,2),c=o[0],a=o[1],i=a-c,u=Object(x.a)(Array(i+1)).map((function(){return""}));(e=e.slice(0,c).concat(u).concat(e.slice(a+1,e.length))).splice(c,1,'<img class="chat-image" src="https://static-cdn.jtvnw.net/emoticons/v1/'.concat(r,'/1.0" srcset="https://static-cdn.jtvnw.net/emoticons/v1/').concat(r,"/1.0 1x,https://static-cdn.jtvnw.net/emoticons/v1/").concat(r,"/2.0 2x,https://static-cdn.jtvnw.net/emoticons/v1/").concat(r,'/3.0 4x">'))}}))})),e.join("")};function rn(){var n=Object(M.a)([""]);return rn=function(){return n},n}function on(){var n=Object(M.a)(["\n  font-weight: bold;\n  color: ",";\n"]);return on=function(){return n},n}function cn(){var n=Object(M.a)(["\n  padding: 5px 20px;\n  color: #fff;\n  opacity: ",";\n  line-height: 20px;\n  word-wrap: break-word;\n\n  &:nth-child(even) {\n    background-color: #1f1925;\n  }\n\n  .chat-image {\n    display: inline-block;\n    margin: -5px 0;\n    vertical-align: middle;\n  }\n\n  a {\n    color: #bf94ff;\n    text-decoration: none;\n\n    &:focus,\n    &:hover {\n      color: #a970ff;\n      text-decoration: underline;\n    }\n\n    &:visited {\n      color: #a970ff;\n    }\n  }\n"]);return cn=function(){return n},n}var an=F.c.div(cn(),(function(n){return n.isHistory?"0.5":"1"})),un=F.c.span(on(),(function(n){return n.color})),sn=F.c.span(rn()),ln=function(n){var t=n.name,e=n.color,r=n.text,o=n.emotes,a=n.isHistory;return c.a.createElement(an,{isHistory:a},c.a.createElement(un,{color:e},t),":"," ",c.a.createElement(sn,{dangerouslySetInnerHTML:{__html:en(r,o)}}))};ln.defaultProps={emotes:{},isHistory:!1};var fn=ln;function bn(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function pn(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?bn(e,!0).forEach((function(t){Object(l.a)(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):bn(e).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}function dn(){var n=Object(M.a)(["\n  position: absolute;\n  right: 0;\n  bottom: 10px;\n  display: ",";\n  padding: 5px 20px;\n  background: rgba(0, 0, 0, 0.6);\n  color: #fff;\n  border-radius: 4px;\n  border: none;\n  outline: none;\n  cursor: pointer;\n  transform: translateX(-50%);\n"]);return dn=function(){return n},n}function mn(){var n=Object(M.a)(["\n  overflow-y: auto;\n\n  .ScrollbarsCustom-TrackY {\n    background: none !important;\n  }\n\n  .ScrollbarsCustom-ThumbY {\n    margin-left: auto;\n    margin-right: auto;\n    width: 6px !important;\n  }\n\n  .ScrollbarsCustom-Content {\n    padding-bottom: 10px !important;\n  }\n"]);return mn=function(){return n},n}function hn(){var n=Object(M.a)(["\n  position: relative;\n  flex-grow: 1;\n"]);return hn=function(){return n},n}function On(){var n=Object(M.a)(["\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  background-color: #000;\n"]);return On=function(){return n},n}function gn(){var n=Object(M.a)(["\n  height: 100vh;\n  background-color: #222;\n  font-size: 12px;\n"]);return gn=function(){return n},n}var vn=F.c.div(gn()),jn=F.c.div(On()),yn=F.c.div(hn()),wn=Object(F.c)(G.a).attrs({disableTracksWidthCompensation:!0})(mn()),En=F.c.button(dn(),(function(n){return n.visible?"block":"none"})),xn={options:{clientId:"4e66w1po1tzf645r9vutn9qus05vg9x"},connection:{secure:!0,reconnect:!0},channels:["nasvay_s"]},Sn=function(n){return"string"!==typeof n?n:n.split("/").reduce((function(n,t){var e=t.split(":"),r=Object(z.a)(e,2),o=r[0],c=r[1];return pn({},n,Object(l.a)({},o,c.split(",")))}),{})},kn=null,_n=function(){var n=Object(o.useState)([]),t=Object(z.a)(n,2),e=t[0],r=t[1],a=Object(o.useState)(!1),i=Object(z.a)(a,2),u=i[0],s=i[1],l=Object(C.c)((function(n){return n.auth.isAuth})),f=Object(C.c)((function(n){return n.auth.user.login})),d=Object(o.useState)(!1),m=Object(z.a)(d,2),h=m[0],O=m[1],g=Object(o.useRef)(null),v=function(){g.current&&g.current.scrollToBottom&&g.current.scrollToBottom()};Object(o.useEffect)(v,[e]);Object(o.useEffect)((function(){(function(){var n=Object(p.a)(b.a.mark((function n(){var t,e,o;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("https://recent-messages.robotty.de/api/v2/recent-messages/".concat("nasvay_s","?clearchatToNotice=true"));case 2:return t=n.sent,n.next=5,t.json();case 5:e=n.sent,o=e.messages.map((function(n){return B.a.msg(n)})).filter((function(n){return"PRIVMSG"===n.command})).map((function(n){var t=Object(z.a)(n.params,2)[1],e=n.tags,r=e["display-name"],o=e.color,c=e.emotes;return{name:r,color:o,text:t,emotes:Sn(c),isHistory:!0}})),r(o);case 8:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}})()()}),[]),Object(o.useEffect)((function(){if(kn&&kn.disconnect(),l){var n=function(){var n=l?{identity:{username:f,password:"oauth:".concat(localStorage.accessToken)}}:{};return pn({},xn,{},n)}();(kn=new J.Client(n)).connect(),kn.on("connected",(function(){return s(!0)})),kn.on("disconnected",(function(){return s(!1)})),kn.on("message",(function(n,t,e){var o=t.color,c=t["display-name"],a=t.emotes,i={name:c,color:o,emotes:Sn(a),text:e};r((function(n){return[].concat(Object(x.a)(n),[i])}))}))}}),[f]);return c.a.createElement(vn,null,c.a.createElement(jn,null,c.a.createElement(yn,null,c.a.createElement(wn,{onUpdate:function(n){var t=n.clientHeight,e=n.contentScrollHeight,r=n.scrollTop;O(r+100<e-t)},ref:g},e.map((function(n,t){var e=n.name,r=n.color,o=n.text,a=n.emotes,i=n.isHistory;return c.a.createElement(fn,{key:t,name:e,color:r,text:o,emotes:a,isHistory:i})}))),c.a.createElement(En,{onClick:v,visible:h},"More messages below")),c.a.createElement(tn,{onSubmit:function(n){kn.say("nasvay_s",n)},isDisabled:!l||!u,isAuth:l})))},Pn=function(){var n=Object(C.b)();return Object(o.useEffect)((function(){if(!window.location.hash){var t=localStorage.getItem("user");if(t){var e=JSON.parse(t);n(v({isAuth:!0,user:e}))}}}),[]),window.location.hash?c.a.createElement(U,null):c.a.createElement(_n,null)},Dn={client_id:"4e66w1po1tzf645r9vutn9qus05vg9x",redirect_uri:"https://honeykingdom.github.io/chat/",response_type:"token+id_token",scope:["openid","chat:edit","chat:read","user_blocks_read","user_blocks_edit"].join("+"),claims:JSON.stringify({id_token:{email_verified:null,picture:null,preferred_username:null}})},Tn=function(){var n=Object.entries(Dn).map((function(n){var t=Object(z.a)(n,2),e=t[0],r=t[1];return"".concat(e,"=").concat(r)})).join("&");return"".concat("https://id.twitch.tv/oauth2/authorize","?").concat(n)},An=function(){return window.location.href=Tn(),null};function Hn(){var n=Object(M.a)(["\n  * {\n    box-sizing: border-box;\n  }\n  body {\n    margin: 0;\n    font-family: Roobert, Helvetica Neue, Helvetica, Arial, sans-serif;\n  }\n"]);return Hn=function(){return n},n}var Cn=Object(F.b)(Hn());function In(){var n=Object(M.a)([""]);return In=function(){return n},n}var Ln=Object(F.b)(In());function Nn(){var n=Object(M.a)([""]);return Nn=function(){return n},n}var Rn=Object(F.b)(Nn());function Un(){var n=Object(M.a)(["\n  :root {\n    ",";\n    ",";\n  }\n  ",";\n"]);return Un=function(){return n},n}var zn=Object(F.a)(Un(),Ln,Rn,Cn),Mn=function(n){var t=n.store;return c.a.createElement(c.a.Fragment,null,c.a.createElement(C.a,{store:t},c.a.createElement(I.a,null,c.a.createElement(L.c,null,c.a.createElement(L.a,{exact:!0,path:"/chat/",component:Pn}),c.a.createElement(L.a,{exact:!0,path:"/chat/auth",component:An})))),c.a.createElement(zn,null))},Fn=Object(u.e)(H,{},Object(u.d)(Object(u.a)(s.a),window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__():function(n){return n}));i.a.render(c.a.createElement(Mn,{store:Fn}),document.getElementById("root"))}},[[145,1,2]]]);
//# sourceMappingURL=main.61629db7.chunk.js.map