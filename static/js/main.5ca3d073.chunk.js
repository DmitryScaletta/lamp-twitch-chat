(this["webpackJsonphoney-chat"]=this["webpackJsonphoney-chat"]||[]).push([[0],{184:function(e,t,u){e.exports=u(323)},225:function(e,t){},227:function(e,t){},266:function(e,t){},267:function(e,t){},323:function(e,t,u){"use strict";u.r(t);var n,r=u(0),a=u.n(r),c=u(65),o=u.n(c),i=u(113),s=function(e){return e.startsWith("#access_token=")},D=u(37),l=u(163),f=u(2),b=u(12),E=u.n(b),g=u(17),d=u(114),h=u(332),p=function(e){return fetch(e).then((function(e){return e.json()}))},m=function(e){return t="/users?id=".concat(e),fetch("".concat("https://api.twitch.tv/helix").concat(t),{headers:{Authorization:"Bearer ".concat(localStorage.accessToken)}}).then((function(e){return e.json()}));var t},O=function(e){return t="/users/".concat(e,"/emotes"),fetch("".concat("https://api.twitch.tv/kraken").concat(t),{headers:{Accept:"application/vnd.twitchtv.v5+json","Client-ID":"4e66w1po1tzf645r9vutn9qus05vg9x",Authorization:"OAuth ".concat(localStorage.accessToken)}}).then((function(e){return e.json()}));var t},C=function(e){return p("https://api.betterttv.net/3/cached/users/twitch/".concat(e))},F=function(e){return p("https://api.frankerfacez.com/v1/room/id/".concat(e))},A=function(e){return p("https://recent-messages.robotty.de/api/v2/recent-messages/".concat(e,"?clearchatToNotice=true"))},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en";return p("https://badges.twitch.tv/v1/badges/global/display?language=".concat(e))},j=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en";return p("https://badges.twitch.tv/v1/badges/channels/".concat(e,"/display?language=").concat(t))};function y(e,t){var u=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),u.push.apply(u,n)}return u}function B(e){for(var t=1;t<arguments.length;t++){var u=null!=arguments[t]?arguments[t]:{};t%2?y(u,!0).forEach((function(t){Object(f.a)(e,t,u[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(u)):y(u).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(u,t))}))}return e}var S,w=Object(d.a)("SET_IS_AUTH"),_=Object(d.a)("FETCH_USER_REQUEST"),x=Object(d.a)("FETCH_USER_SUCCESS"),T=Object(d.a)("FETCH_USER_FAILURE"),P=Object(h.a)((n={},Object(f.a)(n,w,(function(e,t){var u=t.payload,n=u.isAuth,r=u.user;return B({},e,{isAuth:void 0===n?e.isAuth:n,user:B({},e.user,{},r)})})),Object(f.a)(n,_,(function(e){return B({},e,{isLoading:!0})})),Object(f.a)(n,x,(function(e,t){return B({},e,{isAuth:!0,isLoading:!1,user:t.payload})})),Object(f.a)(n,T,(function(e,t){return B({},e,{isAuth:!1,isLoading:!1,error:t.payload})})),n),{isAuth:!1,isLoading:!1,user:{id:null,login:null,displayName:null}}),R=u(331),k=u(336),L=u(335),I=u(324),H={default:{isLoading:!1,isLoaded:!1,isError:!1,error:null},request:{isLoading:!0,isLoaded:!1,isError:!1,error:null},success:{isLoading:!1,isLoaded:!0,isError:!1,error:null},failure:{isLoading:!1,isLoaded:!1,isError:!0}};function N(e,t){var u=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),u.push.apply(u,n)}return u}function q(e){for(var t=1;t<arguments.length;t++){var u=null!=arguments[t]?arguments[t]:{};t%2?N(u,!0).forEach((function(t){Object(f.a)(e,t,u[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(u)):N(u).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(u,t))}))}return e}var M,U={global:q({},H.default,{items:{}}),channels:{}},G=Object(R.a)("FETCH_GLOBAL_BADGES_REQUEST","FETCH_GLOBAL_BADGES_SUCCESS","FETCH_GLOBAL_BADGES_FAILURE","FETCH_CHANNEL_BADGES_REQUEST","FETCH_CHANNEL_BADGES_SUCCESS","FETCH_CHANNEL_BADGES_FAILURE"),z=G.fetchGlobalBadgesRequest,Q=G.fetchGlobalBadgesSuccess,V=G.fetchGlobalBadgesFailure,W=G.fetchChannelBadgesRequest,J=G.fetchChannelBadgesSuccess,Z=G.fetchChannelBadgesFailure,Y=Object(L.a)({},["badge_sets"]),K=Object(h.a)((S={},Object(f.a)(S,Object(k.a)(z,Q,V),(function(e,t){var u=t.type,n=t.payload;return u===z.toString()?Object(I.a)(e,{global:q({},H.request)}):u===Q.toString()?Object(I.a)(e,{global:q({},H.success,{items:n.items})}):u===V.toString()?Object(I.a)(e,{global:q({},H.failure,{error:n.error})}):e})),Object(f.a)(S,Object(k.a)(W,J,Z),(function(e,t){var u=t.type,n=t.payload,r=n.channel;return u===W.toString()?Object(I.a)(e,{channels:Object(f.a)({},r,q({},H.request))}):u===J.toString()?Object(I.a)(e,{channels:Object(f.a)({},r,q({},H.success,{items:n.items}))}):u===Z.toString()?Object(I.a)(e,{channels:Object(f.a)({},r,q({},H.failure,{error:n.error}))}):e})),S),U),X=u(325);function $(e,t){var u=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),u.push.apply(u,n)}return u}function ee(e){for(var t=1;t<arguments.length;t++){var u=null!=arguments[t]?arguments[t]:{};t%2?$(u,!0).forEach((function(t){Object(f.a)(e,t,u[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(u)):$(u).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(u,t))}))}return e}var te=Object(L.a)("",["chat","currentChannel"]),ue=Object(R.a)("SET_CURRENT_CHANNEL","SET_IS_CONNECTED","UPDATE_GLOBAL_USER_STATE","UPDATE_USER_STATE","UPDATE_ROOM_STATE","REMOVE_CHANNEL"),ne=ue.setCurrentChannel,re=ue.setIsConnected,ae=ue.updateGlobalUserState,ce=ue.updateUserState,oe=ue.updateRoomState,ie=ue.removeChannel,se=Object(h.a)((M={},Object(f.a)(M,ne,(function(e,t){return ee({},e,{currentChannel:t.payload})})),Object(f.a)(M,re,(function(e,t){return ee({},e,{isConnected:t.payload})})),Object(f.a)(M,ae,(function(e,t){var u=t.payload.tags;return ee({},e,{globalState:ee({},e.globalState,{},u)})})),Object(f.a)(M,ce,(function(e,t){var u=t.payload,n=u.channel,r=u.tags;return ee({},e,{channels:ee({},e.channels,Object(f.a)({},n,ee({},e.channels[n],{userState:r})))})})),Object(f.a)(M,oe,(function(e,t){var u=t.payload,n=u.channel,r=u.tags;return ee({},e,{channels:ee({},e.channels,Object(f.a)({},n,ee({},e.channels[n],{roomState:r})))})})),Object(f.a)(M,ie,(function(e,t){var u=t.payload;return ee({},e,{channels:Object(X.a)([u],e.channels)})})),M),{currentChannel:null,isConnected:!1,globalState:{},channels:{}});function De(e,t){var u=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),u.push.apply(u,n)}return u}function le(e){for(var t=1;t<arguments.length;t++){var u=null!=arguments[t]?arguments[t]:{};t%2?De(u,!0).forEach((function(t){Object(f.a)(e,t,u[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(u)):De(u).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(u,t))}))}return e}var fe,be=Object(R.a)("FETCH_TWITCH_EMOTES_REQUEST","FETCH_TWITCH_EMOTES_SUCCESS","FETCH_TWITCH_EMOTES_FAILURE"),Ee=be.fetchTwitchEmotesRequest,ge=be.fetchTwitchEmotesSuccess,de=be.fetchTwitchEmotesFailure,he=Object(h.a)(Object(f.a)({},Object(k.a)(Ee,ge,de),(function(e,t){var u=t.type,n=t.payload;return u===Ee.toString()?le({},e,{isLoading:!0,isLoaded:!1,isError:!1,error:null}):u===ge.toString()?le({},e,{isLoading:!1,isLoaded:!0,isError:!1},n):u===de.toString()?le({},e,{isLoading:!1,isLoaded:!1,isError:!0,error:n}):e})),{isLoading:!1,isLoaded:!1,isError:!1,error:null,items:{}}),pe=u(34);function me(e,t){var u=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),u.push.apply(u,n)}return u}function Oe(e){for(var t=1;t<arguments.length;t++){var u=null!=arguments[t]?arguments[t]:{};t%2?me(u,!0).forEach((function(t){Object(f.a)(e,t,u[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(u)):me(u).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(u,t))}))}return e}var Ce,Fe=Object(R.a)("FETCH_BTTV_GLOBAL_EMOTES_REQUEST","FETCH_BTTV_GLOBAL_EMOTES_SUCCESS","FETCH_BTTV_GLOBAL_EMOTES_FAILURE","FETCH_BTTV_CHANNEL_EMOTES_REQUEST","FETCH_BTTV_CHANNEL_EMOTES_SUCCESS","FETCH_BTTV_CHANNEL_EMOTES_FAILURE"),Ae=Fe.fetchBttvGlobalEmotesRequest,ve=Fe.fetchBttvGlobalEmotesSuccess,je=Fe.fetchBttvGlobalEmotesFailure,ye=Fe.fetchBttvChannelEmotesRequest,Be=Fe.fetchBttvChannelEmotesSuccess,Se=Fe.fetchBttvChannelEmotesFailure,we=function(e){var t=e.channelEmotes,u=e.sharedEmotes;return[].concat(Object(pe.a)(t),Object(pe.a)(u))},_e=Object(h.a)((fe={},Object(f.a)(fe,Object(k.a)(Ae,ve,je),(function(e,t){var u=t.type,n=t.payload;return u===Ae.toString()?Oe({},e,{global:Oe({},e.global,{isLoading:!0,isLoaded:!1,isError:!1,error:null})}):u===ve.toString()?Oe({},e,{global:Oe({},e.global,{isLoading:!1,isLoaded:!0,isError:!1,error:null},n)}):u===je.toString()?Oe({},e,{global:Oe({},e.global,{isLoading:!1,isLoaded:!1,isError:!0},n)}):e})),Object(f.a)(fe,Object(k.a)(ye,Be,Se),(function(e,t){var u=t.type,n=t.payload,r=n.channel;return u===ye.toString()?Oe({},e,{channels:Oe({},e.channels,Object(f.a)({},r,{isLoading:!0,isLoaded:!1,isError:!1,error:null}))}):u===Be.toString()?Oe({},e,{channels:Oe({},e.channels,Object(f.a)({},r,{isLoading:!1,isLoaded:!0,isError:!1,error:null,items:n.items}))}):u===Se.toString()?Oe({},e,{channels:Oe({},e.channels,Object(f.a)({},r,{isLoading:!1,isLoaded:!1,isError:!0,error:n.error}))}):e})),fe),{global:{isLoading:!1,isLoaded:!1,isError:!1,error:null,items:[]},channels:{}}),xe=u(333),Te=u(326),Pe=u(337),Re=u(338);function ke(e,t){var u=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),u.push.apply(u,n)}return u}function Le(e){for(var t=1;t<arguments.length;t++){var u=null!=arguments[t]?arguments[t]:{};t%2?ke(u,!0).forEach((function(t){Object(f.a)(e,t,u[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(u)):ke(u).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(u,t))}))}return e}var Ie=Object(R.a)("FETCH_FFZ_GLOBAL_EMOTES_REQUEST","FETCH_FFZ_GLOBAL_EMOTES_SUCCESS","FETCH_FFZ_GLOBAL_EMOTES_FAILURE","FETCH_FFZ_CHANNEL_EMOTES_REQUEST","FETCH_FFZ_CHANNEL_EMOTES_SUCCESS","FETCH_FFZ_CHANNEL_EMOTES_FAILURE"),He=Ie.fetchFfzGlobalEmotesRequest,Ne=Ie.fetchFfzGlobalEmotesSuccess,qe=Ie.fetchFfzGlobalEmotesFailure,Me=Ie.fetchFfzChannelEmotesRequest,Ue=Ie.fetchFfzChannelEmotesSuccess,Ge=Ie.fetchFfzChannelEmotesFailure,ze=Object(xe.a)(Object(L.a)({},["sets"]),Te.a,Object(Pe.a)(Object(L.a)([],["emoticons"])),Re.a),Qe=ze,Ve=Object(h.a)((Ce={},Object(f.a)(Ce,Object(k.a)(He,Ne,qe),(function(e,t){var u=t.type,n=t.payload;return u===He.toString()?Le({},e,{global:Le({},e.global,{isLoading:!0,isLoaded:!1,isError:!1,error:null})}):u===Ne.toString()?Le({},e,{global:Le({},e.global,{isLoading:!1,isLoaded:!0,isError:!1,error:null},n)}):u===qe.toString()?Le({},e,{global:Le({},e.global,{isLoading:!1,isLoaded:!1,isError:!0},n)}):e})),Object(f.a)(Ce,Object(k.a)(Me,Ue,Ge),(function(e,t){var u=t.type,n=t.payload,r=n.channel;return u===Me.toString()?Le({},e,{channels:Le({},e.channels,Object(f.a)({},r,{isLoading:!0,isLoaded:!1,isError:!1,error:null}))}):u===Ue.toString()?Le({},e,{channels:Le({},e.channels,Object(f.a)({},r,{isLoading:!1,isLoaded:!0,isError:!1,error:null,items:n.items}))}):u===Ge.toString()?Le({},e,{channels:Le({},e.channels,Object(f.a)({},r,{isLoading:!1,isLoaded:!1,isError:!0,error:n.error}))}):e})),Ce),{global:{isLoading:!1,isLoaded:!1,isError:!1,error:null,items:[]},channels:{}}),We=Object(D.c)({twitch:he,bttv:_e,ffz:Ve}),Je=u(183),Ze=u(330),Ye=u(58),Ke=u(164),Xe=Object(Ye.a)(Object(L.a)([],["emotes","twitch","items"]),Object(xe.a)(Te.a,Re.a)),$e=Object(Ye.a)(Object(L.a)({},["emotes","bttv","channels"]),te,(function(e,t){return Object(L.a)([],[t,"items"],e)})),et=Object(Ye.a)(Object(L.a)([],["emotes","bttv","global","items"]),$e,(function(e,t){return[].concat(Object(pe.a)(e),Object(pe.a)(t))})),tt=Object(Ye.a)(Object(L.a)({},["emotes","ffz","channels"]),te,(function(e,t){return Object(L.a)([],[t,"items"],e)})),ut=Object(Ye.a)(Object(L.a)([],["emotes","ffz","global","items"]),tt,(function(e,t){return[].concat(Object(pe.a)(e),Object(pe.a)(t))})),nt=function(e){return{twitch:Xe(e),bttv:et(e),ffz:ut(e)}},rt=function(e){var t=te(e),u=e.emotes.bttv.global.isLoaded||e.emotes.bttv.global.isError,n=Object(Ke.a)(["emotes","bttv","channels",t,"isLoaded"],e)||Object(Ke.a)(["emotes","bttv","channels",t,"isError"],e);return u&&n},at=function(e){var t=te(e),u=e.emotes.ffz.global.isLoaded||e.emotes.ffz.global.isError,n=Object(Ke.a)(["emotes","ffz","channels",t,"isLoaded"],e)||Object(Ke.a)(["emotes","ffz","channels",t,"isError"],e);return u&&n},ct=function(e){return e.emotes.twitch.isLoaded||e.emotes.twitch.isError},ot=function(e){return e.badges.global.items},it=function(e){return Object(L.a)({},["badges","channels",te(e),"items"])},st=function(e){return function(e){return e.badges.global.isLoaded||e.badges.global.isError}(e)&&function(e){var t=te(e);return Object(L.a)(!1,["badges","channels",t,"isLoaded"],e)||Object(L.a)(!1,["badges","channels",t,"isError"],e)}(e)},Dt="MESSAGE",lt="NOTICE_MESSAGE",ft="USER_NOTICE_MESSAGE",bt=u(8),Et=u(1),gt=u.n(Et),dt=u(166),ht=u(84),pt=u(167),mt=u.n(pt),Ot=u(327),Ct=u(339),Ft=u(334),At=u(328),vt=u(180),jt=u(27),yt=u(340),Bt=/^(?:(?:[a-z]+:)?\/\/)/,St=function(e){return Bt.test(e)?e:"//".concat(e)};function wt(e,t){var u=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),u.push.apply(u,n)}return u}var _t="//static-cdn.jtvnw.net/emoticons/v1",xt=/^@((?:[0-9A-Z_a-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BA\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D])+)/,Tt=mt()({strict:!1}),Pt=Object(xe.a)(Ot.a,Object(Pe.a)((function(e){var t=Object(bt.a)(e,2),u=t[0],n=t[1];return Object(Pe.a)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var u=null!=arguments[t]?arguments[t]:{};t%2?wt(u,!0).forEach((function(t){Object(f.a)(e,t,u[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(u)):wt(u).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(u,t))}))}return e}({id:u},e)}),n)})),Re.a),Rt=Object(xe.a)(Ot.a,Object(Pe.a)((function(e){var t=Object(bt.a)(e,2),u=t[0],n=t[1];return"".concat(n," ").concat(u,"x")})),Object(Ct.a)(", ")),kt=function(e,t){return{type:"twitch-emote",alt:e,src:"".concat(_t,"/").concat(t,"/1.0"),srcSet:"".concat(_t,"/").concat(t,"/1.0 1x, ").concat(_t,"/").concat(t,"/2.0 2x, ").concat(_t,"/").concat(t,"/3.0 4x")}},Lt=function(e,t){return{type:"mention",text:e,target:t}},It=gt.a.shape({type:gt.a.oneOf(["twitch-emote"]).isRequired,alt:gt.a.string.isRequired,src:gt.a.string.isRequired,srcSet:gt.a.string.isRequired}),Ht=gt.a.shape({type:gt.a.oneOf(["bttv-emote"]).isRequired,alt:gt.a.string.isRequired,src:gt.a.string.isRequired,srcSet:gt.a.string.isRequired}),Nt=gt.a.shape({type:gt.a.oneOf(["ffz-emote"]).isRequired,alt:gt.a.string.isRequired,src:gt.a.string.isRequired,srcSet:gt.a.string.isRequired}),qt=gt.a.shape({type:gt.a.oneOf(["emoji"]).isRequired,alt:gt.a.string.isRequired,src:gt.a.string.isRequired,srcSet:gt.a.string}),Mt=gt.a.shape({type:gt.a.oneOf(["mention"]).isRequired,text:gt.a.string.isRequired,target:gt.a.string.isRequired}),Ut=gt.a.shape({type:gt.a.oneOf(["link"]).isRequired,text:gt.a.string.isRequired,href:gt.a.string.isRequired}),Gt=function(e,t,u){var n=t.twitch,r=t.bttv,a=t.ffz,c=u.parseTwitch;if(void 0!==c&&c){var o=function(e,t){return Object(Ft.a)(Object(At.a)("code",e),t)}(e,n);if(o)return kt(e,o.id)}var i=function(e,t){return Object(Ft.a)(Object(At.a)("code",e),t)}(e,r);if(i)return function(e,t){var u=t.id;return{type:"bttv-emote",alt:e,src:"".concat("//cdn.betterttv.net/emote","/").concat(u,"/1x"),srcSet:"".concat("//cdn.betterttv.net/emote","/").concat(u,"/2x 2x, ").concat("//cdn.betterttv.net/emote","/").concat(u,"/3x 4x")}}(e,i);var s=function(e,t){return Object(Ft.a)(Object(At.a)("name",e),t)}(e,a);if(s)return function(e,t){var u=t.urls;return{type:"ffz-emote",alt:e,src:u[1],srcSet:Rt(u)}}(e,s);var D,l=Object(dt.parse)(e,{assetType:"png"});if(l&&1===l.length&&l[0].text.length===e.length){var f=(D=e,Object(xe.a)(Object(vt.a)(Object(At.a)("char",D)),jt.a,yt.a)(ht));if(f){var b=Object(bt.a)(l,1)[0].url;return{type:"emoji",alt:f,src:b,srcSet:null}}}var E=e.match(xt);if(E){var g=Object(bt.a)(E,2),d=g[0],h=g[1];return[Lt(d,h.toLowerCase()),e.length-d.length]}var p,m=e.match(Tt);return m&&m[0].length===e.length?{type:"link",text:p=e,href:St(p)}:null},zt=function(e,t,u){var n=void 0===t||null===t,r=t&&Object.keys(t).length>0,a=Pt(t),c=[],o=0,i=0;do{var s=e.indexOf(" ",o+1),D=0===o?o:o+1,l=-1===s?e.length:s,f=e.substring(D,l);if(f){var b=null;if(r){var E=Object(Ft.a)(Object(At.a)("start",D),a);E&&(b=kt(f,E.id))}if(b||(b=Gt(f,u,{parseTwitch:n})),b){if(i!==D){var g=e.substring(i,D);c.push(g)}if(Array.isArray(b)){var d=b,h=Object(bt.a)(d,2),p=h[0],m=h[1];c.push(p),i=l-m}else c.push(b),i=l}}if(-1===s&&i!==l){var O=e.substring(i,l);c.push(O)}o=s}while(-1!==o);return c},Qt=function(e,t,u){return Object(xe.a)(Ot.a,Object(Pe.a)((function(e){var n=Object(bt.a)(e,2),r=n[0],a=n[1],c=Object(L.a)(!1,[r,"versions",a],u)||Object(L.a)(!1,[r,"versions",a],t);return!!c&&function(e){var t=e.title,u=e.description,n=e.image_url_1x,r=e.image_url_2x,a=e.image_url_4x;return{alt:t,label:u,src:n,srcSet:"".concat(n," 1x, ").concat(r," 2x, ").concat(a," 4x")}}(c)})),Object(vt.a)(Boolean))(e)},Vt=u(44),Wt=u(168),Jt=u(169),Zt=u(179),Yt=u(170),Kt=u(181),Xt=u(329),$t=u(66),eu=u(171),tu=u.n(eu),uu=u(85),nu=u.n(uu);function ru(e,t){var u=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),u.push.apply(u,n)}return u}function au(e){for(var t=1;t<arguments.length;t++){var u=null!=arguments[t]?arguments[t]:{};t%2?ru(u,!0).forEach((function(t){Object(f.a)(e,t,u[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(u)):ru(u).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(u,t))}))}return e}var cu,ou=["CAP","002","003","004","353","366","375","372","376"],iu=["mod","emote-only","r9k","rituals","subs-only","msg-param-should-share-streak"],su=["ban-duration","bits","msg-param-cumulative-months","msg-param-months","msg-param-promo-gift-total","msg-param-streak-months","msg-param-viewerCount","msg-param-threshold"],Du=["subscriber","turbo","user-type"],lu=["msg_banned","msg_bad_characters","msg_channel_blocked","msg_channel_suspended","msg_duplicate","msg_emoteonly","msg_facebook","msg_followersonly","msg_followersonly_followed","msg_followersonly_zero","msg_r9k","msg_ratelimit","msg_rejected","msg_rejected_mandatory","msg_room_not_found","msg_slowmode","msg_subsonly","msg_suspended","msg_timedout","msg_verified_email"],fu=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e?e.split(",").reduce((function(e,t){var u=t.split("/"),n=Object(bt.a)(u,2),r=n[0],a=n[1];return au({},e,Object(f.a)({},r,a))}),{}):{}},bu=function(e,t){if("emotes"===e)return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e?e.split("/").reduce((function(e,t){var u=t.split(":"),n=Object(bt.a)(u,2),r=n[0],a=n[1];return au({},e,Object(f.a)({},r,a.split(",").map((function(e){var t=e.split("-"),u=Object(bt.a)(t,2),n=u[0],r=u[1];return{start:Number.parseInt(n,10),end:Number.parseInt(r,10)}}))))}),{}):{}}(t);if("badges"===e)return fu(t);if("badge-info"===e)return fu(t);if("followers-only"===e){var u=!1;return"-1"===t?u=!1:"0"===t?u=!0:"string"===typeof t&&(u=parseInt(t,10)),u}if("slow"===e){var n=!1;return"0"===t?n=!1:"string"===typeof t&&(n=parseInt(t,10)),n}return iu.includes(e)?"1"===t:su.includes(e)?parseInt(t,10):"string"===typeof t?t.replace("\\s"," "):t},Eu=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.entries(e).filter((function(e){var t=Object(bt.a)(e,1)[0];return!Du.includes(t)})).reduce((function(e,t){var u=Object(bt.a)(t,2),n=u[0],r=u[1];return au({},e,Object(f.a)({},tu()(n),bu(n,r)))}),{})},gu=function(e){return e.startsWith("\x01ACTION ")&&e.endsWith("\x01")},du=function(e){return e.slice(8,-1)},hu=function(e){return{tags:e.tags,channel:Object(bt.a)(e.params,1)[0].slice(1)}},pu=hu,mu=hu,Ou=function(e){return{message:e.message,tags:e.tags,channel:Object(bt.a)(e.params,1)[0].slice(1)}},Cu=Ou,Fu=Ou,Au=Ou,vu=Ou,ju=Ou,yu=function(e){function t(){var e,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(Wt.a)(this,t),(e=Object(Zt.a)(this,Object(Yt.a)(t).call(this))).socket=null,e.channels={},e.options=Object(I.a)({identity:{}},u),e.user=null,e._queue=[],e._messagesQueue={},e}return Object(Kt.a)(t,e),Object(Jt.a)(t,[{key:"_onConnect",value:function(){var e=this.options.identity,t=e.name,u=e.auth,n=t||"justinfan".concat(Math.floor(8e4*Math.random()+1e3)),r=u?"oauth:".concat(u):"SCHMOOPIIE";this.sendRaw(["CAP REQ :twitch.tv/tags twitch.tv/commands","PASS ".concat(r),"NICK ".concat(n)]),this.emit("connected")}},{key:"_onClose",value:function(e){this.emit("disconnected",{willReconnect:!1,hadError:e})}},{key:"_onError",value:function(e){this.emit("error",e)}},{key:"_onData",value:function(e){var t=this;e.trim().split("\r\n").forEach((function(e){return t._handleMessage(e)}))}},{key:"_emmitOwnMessage",value:function(e,t){var u=Object(L.a)([],["_messagesQueue",t],this).shift();if("string"===typeof u){var n=u.startsWith("/me "),r={message:n?u.slice(4):u,tags:au({},e,{id:nu()(),tmiSentTs:(new Date).getTime(),userId:this.user.userId}),user:this.options.identity.name,channel:t,isAction:n};this.emit("ownmessage",r)}}},{key:"_handleMessage",value:function(e){var t=Object(Vt.parse)(e);t.raw=e;var u=t.command;if("PING"===u)return this.sendRaw("PONG :tmi.twitch.tv"),void this.emit("ping");if(!t.prefix||"jtv"!==t.prefix.user)if("001"!==u){if(!ou.includes(u)){var n=function(e){var t=e.raw,u=e.command,n=e.tags,r=e.middle,a=e.trailing,c=e.prefix;return{raw:t,command:u,tags:Eu(n),params:r,message:a,prefix:c}}(t),r=Object(L.a)("",["params",0],n).slice(1);if("PRIVMSG"!==u){if("USERSTATE"===u){var a=pu(n);return this.channels=Object(I.a)(this.channels,Object(f.a)({},r,{userState:a.tags})),Object(L.a)(0,["_messagesQueue",r,"length"],this)>0&&this._emmitOwnMessage(a.tags,r),void this.emit("userstate",a)}if("JOIN"===u){var c={channel:r};return this.channels=Object(I.a)(this.channels,Object(f.a)({},r,{})),void this.emit("join",c)}if("PART"===u){var o={channel:r};return this.channels=Object(X.a)([r],this.channels),void this.emit("part",o)}if("ROOMSTATE"===u){var i=mu(n);return this.channels=Object(I.a)(this.channels,Object(f.a)({},r,{roomState:i.tags})),void this.emit("roomstate",i)}if("NOTICE"===u){var s=Cu(n);return lu.includes(n.tags.msgId)&&Object(L.a)([],["_messagesQueue",r],this).shift(),void this.emit("notice",s)}if("USERNOTICE"!==u)if("CLEARCHAT"!==u)if("CLEARMSG"!==u)if("HOSTTARGET"!==u)if("WHISPER"!==u){var D;if("GLOBALUSERSTATE"===u){var l={tags:n.tags};return this.user=l.tags,void this.emit("globaluserstate",l)}this.emit("unhandled-command",n)}else{var b={message:(D=n).message,tags:D.tags,channel:Object(bt.a)(D.params,1)[0],user:D.prefix.user};this.emit("whisper",b)}else{var E=ju(n);this.emit("hosttarget",E)}else{var g=Au(n);this.emit("clearmsg",g)}else{var d=vu(n);this.emit("clearchat",d)}else{var h=Fu(n);this.emit("usernotice",h)}}else{var p=function(e){var t=e.message,u=e.tags,n=e.params,r=e.prefix.user,a=gu(t);return{message:a?du(t):t,tags:u,user:r,channel:n[0].slice(1),isAction:a}}(n);this.emit("message",p)}}}else{var m=t.params[0];for(this.options.identity.name=m;this._queue.length;){var O=this._queue.shift();this.sendRaw(O)}}}},{key:"sendRaw",value:function(e){var t=this,u=function(e){e&&t.emit("error",e)};Array.isArray(e)?e.forEach((function(e){return t.socket.send("".concat(e,"\r\n"),u)})):this.socket.send("".concat(e,"\r\n"),u)}},{key:"connect",value:function(){var e=this;this.socket=new WebSocket("wss://irc-ws.chat.twitch.tv:443");var t=this.socket;t.addEventListener("open",(function(){return e._onConnect()})),t.addEventListener("close",(function(t){return e._onClose(t)})),t.addEventListener("error",(function(t){return e._onError(t)})),t.addEventListener("message",(function(t){return e._onData(t.data)}))}},{key:"say",value:function(e,t){if(t){var u=Object(Vt.format)({command:"PRIVMSG",middle:["#".concat(e)],trailing:t});this.sendRaw(u),this._messagesQueue=Object(Xt.a)(Ze.a,this._messagesQueue,Object(f.a)({},e,[t]))}}},{key:"sendCommand",value:function(e,t,u){var n=Array.isArray(u)?u.join(" "):u,r=Object(Vt.format)({command:"PRIVMSG",middle:["#".concat(e)],trailing:"/".concat(t," ").concat(n)});this.sendRaw(r)}},{key:"join",value:function(e){var t=Object(Vt.format)({command:"JOIN",middle:["#".concat(e)]});this.user?this.sendRaw(t):this._queue.push(t)}},{key:"part",value:function(e){var t=Object(Vt.format)({command:"PART",middle:["#".concat(e)]});this.user?this.sendRaw(t):this._queue.push(t)}}]),t}($t.EventEmitter),Bu=function(e,t){var u=ot(e),n=it(e),r=nt(e);return t.map((function(e){return Object(Vt.parse)(e)})).filter((function(e){return"PRIVMSG"===e.command})).map((function(e){var t=e.tags,a=Object(bt.a)(e.params,2),c=a[0],o=a[1],i=e.prefix.user,s=gu(o),D=s?du(o):o,l=Eu(t);return{type:Dt,message:D,messageArray:zt(D,l.emotes,r),tags:l,badges:Qt(l.badges,u,n),user:i,channel:c.slice(1),isAction:s,isHistory:!0}}))};function Su(e,t){var u=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),u.push.apply(u,n)}return u}function wu(e){for(var t=1;t<arguments.length;t++){var u=null!=arguments[t]?arguments[t]:{};t%2?Su(u,!0).forEach((function(t){Object(f.a)(e,t,u[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(u)):Su(u).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(u,t))}))}return e}var _u=Object(R.a)("ADD_MESSAGE_ENTITY","FETCH_RECENT_MESSAGES_REQUEST","FETCH_RECENT_MESSAGES_SUCCESS","FETCH_RECENT_MESSAGES_FAILURE"),xu=_u.addMessageEntity,Tu=_u.fetchRecentMessagesRequest,Pu=_u.fetchRecentMessagesSuccess,Ru=_u.fetchRecentMessagesFailure,ku=Object(d.a)("CLEAR_CHAT"),Lu=Object(d.a)("ADD_RECENT_MESSAGES"),Iu=function(e){var t=e.length-500;return t>0?e.slice(t):e},Hu=function(e,t,u){return u&&t%2?!e:e},Nu=Object(h.a)((cu={},Object(f.a)(cu,xu,(function(e,t){var u=t.payload,n=u.channel,r=Object(L.a)([],[n,"items"],e),a=[].concat(Object(pe.a)(r),[u]),c=Iu(a),o=a.length>c.length,i=Object(L.a)(!1,[n,"isEven"],e);return wu({},e,Object(f.a)({},n,wu({},e[n],{isEven:Hu(i,1,o),items:c})))})),Object(f.a)(cu,Lu,(function(e,t){var u=t.payload,n=u.channel,r=u.items,a=Object(Ze.a)(r,Object(L.a)([],[n,"items"],e)),c=Iu(a),o=a.length>c.length,i=Object(L.a)(!1,[n,"isEven"],e);return Object(I.a)(e,Object(f.a)({},n,{history:{items:[]},items:a,isEven:Hu(i,r.length,o)}))})),Object(f.a)(cu,Object(k.a)(Tu,Pu,Ru),(function(e,t){var u=t.type,n=t.payload,r=n.channel;return u===Tu.toString()?Object(I.a)(e,Object(f.a)({},r,{history:wu({},H.request)})):u===Pu.toString()?Object(I.a)(e,Object(f.a)({},r,{history:wu({},H.success,{items:n.items})})):u===Ru.toString()?Object(I.a)(e,Object(f.a)({},r,{history:wu({},H.failure,{error:n.error})})):e})),Object(f.a)(cu,ku,(function(e,t){var u=t.payload,n=u.channel,r=u.tags.targetUserId,a=e[n].items.map((function(e){return e.tags.userId!==r||e.isHistory?e:wu({},e,{isDeleted:!0})}));return wu({},e,Object(f.a)({},n,wu({},e[n],{items:a})))})),cu),{}),qu=Object(D.c)({auth:P,badges:K,chat:se,emotes:We,messages:Nu}),Mu=Object(D.a)(l.a),Uu=Object(D.d)(qu,{},Mu),Gu=u(13),zu=u(67),Qu=u(43),Vu=function(){var e=Object(r.useState)(window.location.hash),t=Object(bt.a)(e,2),u=t[0],n=t[1];return Object(r.useEffect)((function(){var e=function(){return n(window.location.hash)};return window.addEventListener("hashchange",e),function(){return window.removeEventListener("hashchange",e)}}),[]),u},Wu=function(e){Object(r.useEffect)((function(){document.title=e?"#".concat(e," - ").concat("Honey Chat"," "):"Honey Chat"}),[e])},Ju=function(e){return Object(L.a)([],["messages",te(e),"items"],e)},Zu=function(e){return Object(L.a)(!1,["messages",te(e),"history","isLoaded"])(e)},Yu=function(e){return Object(L.a)(null,["chat","channels",te(e),"roomState","roomId"],e)},Ku=function(e){return Object(L.a)(!1,["messages",te(e),"isEven"],e)},Xu=function(e){return e.split(" ").map((function(e){if(":"!==e[0]||":"!==e[e.length-1])return e;var t=e.slice(1,-1),u=ht[t];return u&&u.char?u.char:e})).join(" ")},$u=u(6),en=u(7),tn=u(172);function un(){var e=Object($u.a)(["\n  color: #bf94ff;\n  text-decoration: none;\n\n  &:focus,\n  &:hover {\n    color: #a970ff;\n    text-decoration: underline;\n  }\n\n  &:visited {\n    color: #a970ff;\n  }\n"]);return un=function(){return e},e}function nn(){var e=Object($u.a)(["\n  display: block;\n  padding: 10px;\n  width: 100%;\n  height: 38px;\n  max-height: 91px;\n  min-height: 40px;\n  overflow: hidden;\n  border: 2px solid transparent;\n  background-color: rgba(255, 255, 255, 0.15);\n  font-family: inherit;\n  font-size: 12px;\n  line-height: 1.5;\n  border-radius: 4px;\n  outline: none;\n  color: #fff;\n  resize: none;\n  transition-duration: 0.1s;\n  transition-timing-function: ease-in;\n  transition-property: box-shadow, border, background-color;\n\n  &:focus {\n    background-color: #000;\n    border-color: #9147ff;\n  }\n\n  &[disabled] {\n    opacity: 0.5;\n    pointer-events: none;\n  }\n"]);return nn=function(){return e},e}function rn(){var e=Object($u.a)(["\n  padding: 0 10px;\n  height: 30px;\n  border: none;\n  color: #fff;\n  background-color: #9147ff;\n  outline: none;\n  font-size: 12px;\n  border-radius: 4px;\n  cursor: pointer;\n\n  &:hover {\n    background-color: #772ce8;\n  }\n\n  &:active {\n    background-color: #5c16c5;\n  }\n\n  &:focus {\n    box-shadow: 0 0 6px 0 #772ce8;\n  }\n\n  &[disabled] {\n    background-color: rgba(255, 255, 255, 0.26);\n    color: rgba(255, 255, 255, 0.8);\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n"]);return rn=function(){return e},e}function an(){var e=Object($u.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n  align-items: center;\n\n  & > :not(:last-child) {\n    margin-right: 20px;\n  }\n"]);return an=function(){return e},e}function cn(){var e=Object($u.a)(["\n  padding-left: 10px;\n  padding-right: 10px;\n  padding-bottom: 10px;\n  background-color: #18181b;\n\n  & > :not(:last-child) {\n    margin-bottom: 10px;\n  }\n"]);return cn=function(){return e},e}var on=en.c.form(cn()),sn=en.c.div(an()),Dn=en.c.button(rn()),ln=en.c.textarea(nn()),fn=Object(en.c)(zu.b)(un()),bn=function(e){var t=e.isAuth,u=e.isDisabled,n=e.onSubmit,c=Object(r.useRef)(null),o=Object(r.useState)(""),i=Object(bt.a)(o,2),s=i[0],D=i[1],l=Object(r.useCallback)((function(e){if("Enter"===e.key){e.preventDefault();var t=s.trim();t&&(n(t),D(""))}}),[n,D,s]);return Object(r.useEffect)((function(){var e=c.current;return e.addEventListener("keydown",l,!1),function(){e.removeEventListener("keydown",l,!1)}}),[l]),a.a.createElement(on,{onSubmit:function(e){e.preventDefault(),n(s),D("")}},a.a.createElement(ln,{placeholder:"Send a message",ref:c,maxLength:500,disabled:u,onChange:function(e){return D(e.target.value)},value:s}),a.a.createElement(sn,null,!t&&a.a.createElement(fn,{to:"/chat/auth"},"Sign in with Twitch"),a.a.createElement(Dn,{disabled:u,type:"submit"},"Chat")))};bn.defaultProps={isDisabled:!1};var En=bn;gt.a.shape({type:gt.a.oneOf([Dt]).isRequired,message:gt.a.string.isRequired,messageArray:gt.a.arrayOf(gt.a.oneOfType([gt.a.string,It,Ht,Nt,qt,Mt,Ut])).isRequired,tags:gt.a.shape({badgeInfo:gt.a.shape({subscriber:gt.a.string}),badges:gt.a.shape({}),color:gt.a.string,displayName:gt.a.string.isRequired,emotes:gt.a.shape({}),flags:gt.a.string,id:gt.a.string,mod:gt.a.bool,roomId:gt.a.string,tmiSentId:gt.a.oneOfType([gt.a.string,gt.a.number]),userId:gt.a.string}).isRequired,badges:gt.a.arrayOf(gt.a.shape({alt:gt.a.string,label:gt.a.string,src:gt.a.string.isRequired,srcSet:gt.a.string})),user:gt.a.string.isRequired,isHistory:gt.a.bool,isAction:gt.a.bool,isDeleted:gt.a.bool}),gt.a.shape({type:gt.a.oneOf([lt]).isRequired,message:gt.a.string.isRequired,channel:gt.a.string.isRequired,tags:gt.a.shape({msgId:gt.a.string.isRequired}).isRequired}),gt.a.shape({type:gt.a.oneOf([ft]).isRequired,message:gt.a.string,channel:gt.a.string.isRequired,tags:gt.a.shape({badgeInfo:gt.a.shape({subscriber:gt.a.string}),badges:gt.a.shape({}),color:gt.a.string,displayName:gt.a.string.isRequired,emotes:gt.a.shape({}),id:gt.a.string,login:gt.a.string,mod:gt.a.bool,msgId:gt.a.string,systemMsg:gt.a.string,tmiSentId:gt.a.oneOfType([gt.a.string,gt.a.number]),userId:gt.a.string,msgParamCumulativeMonths:gt.a.number,msgParamDisplayName:gt.a.string,msgParamLogin:gt.a.string,msgParamMonths:gt.a.number,msgParamPromoGiftTotal:gt.a.number,msgParamPromoName:gt.a.string,msgParamRecipientDisplayName:gt.a.string,msgParamRecipientId:gt.a.string,msgParamRecipientUserName:gt.a.string,msgParamSenderLogin:gt.a.string,msgParamSenderName:gt.a.string,msgParamShouldShareStreak:gt.a.bool,msgParamStreakMonths:gt.a.number,msgParamSubPlan:gt.a.string,msgParamSubPlanName:gt.a.string,msgParamViewerCount:gt.a.number,msgParamRitualName:gt.a.string,msgParamThreshold:gt.a.number}).isRequired});function gn(){var e=Object($u.a)(["\n  margin-bottom: 2px;\n  margin-right: 3px;\n  max-width: 100%;\n  vertical-align: middle;\n  border-radius: 3px;\n"]);return gn=function(){return e},e}function dn(){var e=Object($u.a)(["\n  color: #bf94ff;\n  text-decoration: none;\n  cursor: pointer;\n\n  &:focus,\n  &:hover {\n    color: #a970ff;\n    text-decoration: underline;\n  }\n\n  &:visited {\n    color: #a970ff;\n  }\n"]);return dn=function(){return e},e}function hn(){var e=Object($u.a)(["\n      padding: 2px 4px;\n      background-color: #fafafa;\n      color: #18181b;\n    "]);return hn=function(){return e},e}function pn(){var e=Object($u.a)(["\n  ","\n"]);return pn=function(){return e},e}function mn(){var e=Object($u.a)(["\n  display: inline-block;\n  margin-top: -5px;\n  margin-bottom: -4px;\n  width: 20px;\n  height: auto;\n  vertical-align: middle;\n"]);return mn=function(){return e},e}function On(){var e=Object($u.a)(["\n  display: inline-block;\n  margin: -5px 0;\n  vertical-align: middle;\n"]);return On=function(){return e},e}function Cn(){var e=Object($u.a)(["\n  font-weight: bold;\n  color: ",";\n"]);return Cn=function(){return e},e}function Fn(){var e=Object($u.a)(["\n  padding: 5px 20px;\n  color: ",";\n  opacity: ",";\n  line-height: 20px;\n  word-wrap: break-word;\n  background-color: ",";\n"]);return Fn=function(){return e},e}var An=en.c.div(Fn(),(function(e){return e.isAction?e.color:"#fff"}),(function(e){return e.isHistory||e.isDeleted?"0.5":"1"}),(function(e){return e.isMention?"rgba(255, 0, 0, 0.3)":e.isEven?"#1f1925":"transparent"})),vn=en.c.span(Cn(),(function(e){return e.color})),jn=en.c.img(On()),yn=en.c.img(mn()),Bn=en.c.span(pn(),(function(e){return e.isActive&&Object(en.b)(hn())})),Sn=en.c.a(dn()),wn=en.c.img(gn()),_n=function(e){var t=e.message,u=t.message,n=t.messageArray,c=t.tags,o=c.color,i=c.displayName,s=t.badges,D=t.user,l=t.isHistory,f=t.isAction,b=t.isDeleted,E=e.login,g=e.isEven,d=Object(r.useState)(!1),h=Object(bt.a)(d,2),p=h[0],m=h[1],O=D!==E&&RegExp(E,"gi").test(u);return a.a.createElement(An,{isHistory:l,isAction:f,isEven:g,isMention:O,isDeleted:b,color:o},s.length>0&&function(e){return e.map((function(e,t){var u=e.alt,n=e.label,r=e.src,c=e.srcSet;return a.a.createElement(wn,{key:t,alt:u,"aria-label":n,src:r,srcSet:c})}))}(s),a.a.createElement(vn,{color:o},i),f?" ":": ",b&&!p?a.a.createElement(Sn,{onClick:function(){return m(!0)}},"<message deleted>"):n.map(function(e,t){return function(u,n){if("object"!==typeof u)return u;if("twitch-emote"===u.type||"bttv-emote"===u.type||"ffz-emote"===u.type)return a.a.createElement(jn,{key:n,src:u.src,srcSet:u.srcSet,alt:u.alt});if("emoji"===u.type)return a.a.createElement(yn,{key:n,src:u.src,srcSet:u.srcSet,alt:u.alt});if("mention"===u.type){var r=u.target===t||e===t;return a.a.createElement(Bn,{key:n,isActive:r},u.text)}return"link"===u.type?a.a.createElement(Sn,{key:n,href:u.href,rel:"noreferrer noopener",target:"_blank"},u.text):null}}(D,E)))};_n.defaultProps={login:"",isEven:!1};var xn=_n;function Tn(){var e=Object($u.a)(["\n  padding: 5px 20px;\n  color: rgba(255, 255, 255, 0.6);\n  line-height: 20px;\n  word-wrap: break-word;\n  background-color: ",";\n"]);return Tn=function(){return e},e}var Pn=en.c.div(Tn(),(function(e){return e.isEven?"#1f1925":"transparent"})),Rn=function(e){var t=e.message.message,u=e.isEven;return a.a.createElement(Pn,{isEven:u},t)};Rn.defaultProps={isEven:!1};var kn=Rn;function Ln(){var e=Object($u.a)(["\n  padding: 5px 20px 5px 16px;\n  line-height: 20px;\n  word-wrap: break-word;\n  border-left: 4px solid #9147ff;\n  color: #fff;\n"]);return Ln=function(){return e},e}var In=en.c.div(Ln()),Hn=function(e){var t=e.message.tags.systemMsg;return a.a.createElement(In,null,t)},Nn=function(e){var t=e.message,u=e.login,n=e.isEven;return t.type===Dt?a.a.createElement(xn,{message:t,login:u,isEven:n}):t.type===lt?a.a.createElement(kn,{message:t,isEven:n}):t.type===ft?a.a.createElement(Hn,{message:t}):null};Nn.defaultProps={isEven:!1,login:""};var qn=Nn;function Mn(){var e=Object($u.a)(["\n  position: absolute;\n  left: 50%;\n  bottom: 10px;\n  display: ",";\n  padding: 5px 20px;\n  background: rgba(0, 0, 0, 0.6);\n  color: #fff;\n  border-radius: 4px;\n  border: none;\n  outline: none;\n  cursor: pointer;\n  transform: translateX(-50%);\n"]);return Mn=function(){return e},e}function Un(){var e=Object($u.a)(["\n  overflow-y: auto;\n\n  .ScrollbarsCustom-TrackY {\n    background: none !important;\n  }\n\n  .ScrollbarsCustom-ThumbY {\n    margin-left: auto;\n    margin-right: auto;\n    width: 6px !important;\n  }\n\n  .ScrollbarsCustom-Content {\n    padding-bottom: 10px !important;\n  }\n"]);return Un=function(){return e},e}function Gn(){var e=Object($u.a)(["\n  position: relative;\n  flex-grow: 1;\n"]);return Gn=function(){return e},e}function zn(){var e=Object($u.a)(["\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  background-color: #18181b;\n"]);return zn=function(){return e},e}function Qn(){var e=Object($u.a)(["\n  height: 100vh;\n  font-size: 12px;\n"]);return Qn=function(){return e},e}var Vn=en.c.div(Qn()),Wn=en.c.div(zn()),Jn=en.c.div(Gn()),Zn=Object(en.c)(tn.a).attrs({disableTracksWidthCompensation:!0})(Un()),Yn=en.c.button(Mn(),(function(e){return e.visible?"block":"none"})),Kn=function(e){var t=e.onSendMessage,u=Object(Gu.c)((function(e){return e.auth.isAuth})),n=Object(Gu.c)(Ju),c=Object(Gu.c)((function(e){return e.chat.isConnected})),o=Object(Gu.c)(Ku),i=Object(Gu.c)((function(e){return e.auth.user.login})),s=Object(r.useState)(!1),D=Object(bt.a)(s,2),l=D[0],f=D[1],b=Object(r.useRef)(null),E=function(){b.current&&b.current.scrollToBottom&&b.current.scrollToBottom()};Object(r.useEffect)((function(){l||E()}),[n]);return a.a.createElement(Vn,null,a.a.createElement(Wn,null,a.a.createElement(Jn,null,a.a.createElement(Zn,{onUpdate:function(e){var t=e.clientHeight,u=e.contentScrollHeight,n=e.scrollTop;f(n+100<u-t)},ref:b},n.map((function(e,t){return a.a.createElement(qn,{key:e.tags.id,message:e,login:i,isEven:o?t%2===1:t%2===0})}))),a.a.createElement(Yn,{onClick:E,visible:l},"More messages below")),a.a.createElement(En,{onSubmit:t,isDisabled:!u||!c,isAuth:u})))};function Xn(e,t){var u=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),u.push.apply(u,n)}return u}function $n(e){for(var t=1;t<arguments.length;t++){var u=null!=arguments[t]?arguments[t]:{};t%2?Xn(u,!0).forEach((function(t){Object(f.a)(e,t,u[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(u)):Xn(u).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(u,t))}))}return e}var er=null,tr=function(){var e=Object(Gu.b)(),t=Object(Gu.c)((function(e){return e.auth.isAuth})),u=Object(Gu.c)((function(e){return e.auth.user.login})),n=Object(Gu.c)((function(e){return e.auth.user.id})),c=Object(Gu.c)(te),o=Object(Gu.c)(Yu),i=Object(Gu.c)(ct),s=Object(Gu.c)(rt),D=Object(Gu.c)(at),l=Object(Gu.c)(st),f=Object(Gu.c)(Zu),b=Vu();Wu(c),Object(r.useEffect)((function(){var t=localStorage.getItem("user");if(t){var u=JSON.parse(t);e(w({isAuth:!0,user:u}))}}),[e]),Object(r.useEffect)((function(){if(b&&b.length>1){var t=b.slice(1);e(ne(t)),localStorage.setItem("lastChannel",t)}}),[e,b]),Object(r.useEffect)((function(){if(c){var n={identity:{name:u,auth:localStorage.accessToken}},r=function(t){return e(function(e){var t=e.message,u=e.tags,n=Object(Je.a)(e,["message","tags"]);return function(e,r){var a=r(),c=ot(a),o=it(a),i=nt(a),s=wu({type:Dt,message:t,messageArray:zt(t,u.emotes,i),tags:u,badges:Qt(u.badges,c,o)},n);e(xu(s))}}(t))};er||((er=new yu(t?n:{})).connect(),er.on("connected",(function(){return e(re(!0))})),er.on("disconnected",(function(){return e(re(!1))})),er.on("globaluserstate",(function(t){return e(ae(t))})),er.on("userstate",(function(t){return e(ce(t))})),er.on("roomstate",(function(t){return e(oe(t))})),er.on("clearchat",(function(t){t.tags.targetUserId&&e(ku(t))})),er.on("message",r),er.on("ownmessage",r),er.on("notice",(function(t){var u,n=$n({},t,{tags:$n({},t.tags,{id:nu()()})});e((u=n,function(e){var t=wu({},u,{type:lt});e(xu(t))}))})),er.on("usernotice",(function(t){return e((u=t,function(e){var t=wu({},u,{type:ft});e(xu(t))}));var u}))),er.join(c)}}),[e,u,c,t]),Object(r.useEffect)((function(){e(function(){var e=Object(g.a)(E.a.mark((function e(t){var u;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(Ae()),e.prev=1,e.next=4,p("https://api.betterttv.net/3/cached/emotes/global");case 4:u=e.sent,t(ve({items:u})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t(je({error:e.t0}));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()),e(function(){var e=Object(g.a)(E.a.mark((function e(t){var u,n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(He()),e.prev=1,e.next=4,p("https://api.frankerfacez.com/v1/set/global");case 4:u=e.sent,n={items:ze(u)},t(Ne(n)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t(qe({error:e.t0}));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()),e(function(){var e=Object(g.a)(E.a.mark((function e(t){var u,n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(z()),e.prev=1,e.next=4,v();case 4:u=e.sent,n={items:Y(u)},t(Q(n)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t(V({error:e.t0}));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}())}),[e]),Object(r.useEffect)((function(){var t;c&&e((t=c,function(){var e=Object(g.a)(E.a.mark((function e(u){var n,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(Tu({channel:t})),e.prev=1,e.next=4,A(t);case 4:n=e.sent,r={channel:t,items:n.messages},u(Pu(r)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),u(Ru({channel:t,error:e.t0}));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()))}),[e,c]),Object(r.useEffect)((function(){var u;c&&(!t||i)&&s&&D&&l&&f&&e((u=c,function(e,t){var n=t(),r=Object(L.a)([],["messages",u,"history","items"],n),a={channel:u,items:Bu(n,r)};e(Lu(a))}))}),[e,t,c,i,s,D,l,f]),Object(r.useEffect)((function(){n&&e(function(e){return function(){var t=Object(g.a)(E.a.mark((function t(u){var n,r;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u(Ee),t.prev=1,t.next=4,O(e);case 4:n=t.sent,r={items:n.emoticon_sets},u(ge(r)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),u(de(t.t0));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()}(n))}),[e,n]),Object(r.useEffect)((function(){var t,u;c&&o&&(e((t=o,u=c,function(){var e=Object(g.a)(E.a.mark((function e(n){var r,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(ye({channel:u})),e.prev=1,e.next=4,C(t);case 4:r=e.sent,a={channel:u,items:we(r)},n(Be(a)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),n(Se({channel:u,error:e.t0}));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}())),e(function(e,t){return function(){var u=Object(g.a)(E.a.mark((function u(n){var r,a;return E.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return n(Me({channel:t})),u.prev=1,u.next=4,F(e);case 4:r=u.sent,a={channel:t,items:Qe(r)},n(Ue(a)),u.next=12;break;case 9:u.prev=9,u.t0=u.catch(1),n(Ge({channel:t,error:u.t0}));case 12:case"end":return u.stop()}}),u,null,[[1,9]])})));return function(e){return u.apply(this,arguments)}}()}(o,c)),e(function(e,t){return function(){var u=Object(g.a)(E.a.mark((function u(n){var r,a;return E.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return n(W({channel:t})),u.prev=1,u.next=4,j(e);case 4:r=u.sent,a={channel:t,items:Y(r)},n(J(a)),u.next=12;break;case 9:u.prev=9,u.t0=u.catch(1),n(Z({channel:t,error:u.t0}));case 12:case"end":return u.stop()}}),u,null,[[1,9]])})));return function(e){return u.apply(this,arguments)}}()}(o,c)))}),[e,c,o]);return a.a.createElement(Kn,{onSendMessage:function(e){var t=Xu(e.trim());er.say(c,t)}})},ur={client_id:"4e66w1po1tzf645r9vutn9qus05vg9x",redirect_uri:"https://honeykingdom.github.io/chat/",response_type:"token+id_token",scope:["openid","channel:moderate","chat:edit","chat:read","whispers:read","whispers:edit","user_blocks_read","user_blocks_edit","user_subscriptions"].join("+"),claims:JSON.stringify({id_token:{email_verified:null,picture:null,preferred_username:null}})},nr=function(){var e=Object.entries(ur).map((function(e){var t=Object(bt.a)(e,2),u=t[0],n=t[1];return"".concat(u,"=").concat(n)})).join("&");return"".concat("https://id.twitch.tv/oauth2/authorize","?").concat(e)},rr=function(){return window.location.href=nr(),null},ar=u(178),cr=u.n(ar),or=function(){var e=Object(Gu.b)(),t=Object(Qu.f)();if(!window.location.hash)return null;var u=new URLSearchParams(window.location.hash.slice(1)),n=u.get("access_token"),r=u.get("id_token");if(!n||!r)return null;localStorage.setItem("accessToken",n),localStorage.setItem("idToken",r),e(function(e){return function(){var t=Object(g.a)(E.a.mark((function t(u){var n,r,a,c,o;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u(_()),t.prev=1,t.next=4,m(e);case 4:n=t.sent,r=n.data[0],a=r.login,c=r.display_name,o={id:e,login:a,displayName:c},localStorage.setItem("user",JSON.stringify(o)),u(x(o)),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),u(T(t.t0));case 14:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}()}(cr.a.decode(r).sub));var a=localStorage.getItem("lastChannel");return t.push(a?"/chat/#".concat(a):"/chat/"),null};function ir(){var e=Object($u.a)(["\n  * {\n    box-sizing: border-box;\n  }\n  body {\n    margin: 0;\n    font-family: Roobert, Helvetica Neue, Helvetica, Arial, sans-serif;\n  }\n"]);return ir=function(){return e},e}var sr=Object(en.b)(ir());function Dr(){var e=Object($u.a)([""]);return Dr=function(){return e},e}var lr=Object(en.b)(Dr());function fr(){var e=Object($u.a)([""]);return fr=function(){return e},e}var br=Object(en.b)(fr());function Er(){var e=Object($u.a)(["\n  :root {\n    ",";\n    ",";\n  }\n  ",";\n"]);return Er=function(){return e},e}var gr=Object(en.a)(Er(),lr,br,sr),dr=function(e){var t=e.store;return a.a.createElement(a.a.Fragment,null,a.a.createElement(Gu.a,{store:t},a.a.createElement(zu.a,null,a.a.createElement(Qu.c,null,a.a.createElement(Qu.a,{exact:!0,path:"/chat/",component:s(window.location.hash)?or:tr}),a.a.createElement(Qu.a,{exact:!0,path:"/chat/auth",component:rr})))),a.a.createElement(gr,null))};if(i.a.initialize("UA-139550930-3"),!s(window.location.hash)){var hr=window.location.pathname+window.location.search+window.location.hash;i.a.pageview(hr)}o.a.render(a.a.createElement(dr,{store:Uu}),document.getElementById("root"))}},[[184,1,2]]]);
//# sourceMappingURL=main.5ca3d073.chunk.js.map