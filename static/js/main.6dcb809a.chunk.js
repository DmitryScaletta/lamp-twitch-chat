(this["webpackJsonphoney-chat"]=this["webpackJsonphoney-chat"]||[]).push([[0],{184:function(e,t,n){e.exports=n(323)},225:function(e,t){},227:function(e,t){},266:function(e,t){},267:function(e,t){},323:function(e,t,n){"use strict";n.r(t);var r,a=n(0),c=n.n(a),o=n(65),i=n.n(o),s=n(113),u=function(e){return e.startsWith("#access_token=")},l=n(37),f=n(163),b=n(2),g=n(12),d=n.n(g),p=n(17),h=n(114),m=n(332),O=function(e){return fetch(e).then((function(e){return e.json()}))},v=function(e){return t="/users?id=".concat(e),fetch("".concat("https://api.twitch.tv/helix").concat(t),{headers:{Authorization:"Bearer ".concat(localStorage.accessToken)}}).then((function(e){return e.json()}));var t},j=function(e){return t="/users/".concat(e,"/emotes"),fetch("".concat("https://api.twitch.tv/kraken").concat(t),{headers:{Accept:"application/vnd.twitchtv.v5+json","Client-ID":"4e66w1po1tzf645r9vutn9qus05vg9x",Authorization:"OAuth ".concat(localStorage.accessToken)}}).then((function(e){return e.json()}));var t},E=function(e){return O("https://api.betterttv.net/3/cached/users/twitch/".concat(e))},y=function(e){return O("https://api.frankerfacez.com/v1/room/id/".concat(e))},S=function(e){return O("https://recent-messages.robotty.de/api/v2/recent-messages/".concat(e,"?clearchatToNotice=true"))},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en";return O("https://badges.twitch.tv/v1/badges/global/display?language=".concat(e))},_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en";return O("https://badges.twitch.tv/v1/badges/channels/".concat(e,"/display?language=").concat(t))};function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(n,!0).forEach((function(t){Object(b.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var C,P=Object(h.a)("SET_IS_AUTH"),R=Object(h.a)("FETCH_USER_REQUEST"),k=Object(h.a)("FETCH_USER_SUCCESS"),L=Object(h.a)("FETCH_USER_FAILURE"),A=Object(m.a)((r={},Object(b.a)(r,P,(function(e,t){var n=t.payload,r=n.isAuth,a=n.user;return x({},e,{isAuth:void 0===r?e.isAuth:r,user:x({},e.user,{},a)})})),Object(b.a)(r,R,(function(e){return x({},e,{isLoading:!0})})),Object(b.a)(r,k,(function(e,t){return x({},e,{isAuth:!0,isLoading:!1,user:t.payload})})),Object(b.a)(r,L,(function(e,t){return x({},e,{isAuth:!1,isLoading:!1,error:t.payload})})),r),{isAuth:!1,isLoading:!1,user:{id:null,login:null,displayName:null}}),D=n(331),F=n(336),I=n(335),N=n(324),H={default:{isLoading:!1,isLoaded:!1,isError:!1,error:null},request:{isLoading:!0,isLoaded:!1,isError:!1,error:null},success:{isLoading:!1,isLoaded:!0,isError:!1,error:null},failure:{isLoading:!1,isLoaded:!1,isError:!0}};function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(n,!0).forEach((function(t){Object(b.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var U,G={global:M({},H.default,{items:{}}),channels:{}},B=Object(D.a)("FETCH_GLOBAL_BADGES_REQUEST","FETCH_GLOBAL_BADGES_SUCCESS","FETCH_GLOBAL_BADGES_FAILURE","FETCH_CHANNEL_BADGES_REQUEST","FETCH_CHANNEL_BADGES_SUCCESS","FETCH_CHANNEL_BADGES_FAILURE"),z=B.fetchGlobalBadgesRequest,Q=B.fetchGlobalBadgesSuccess,V=B.fetchGlobalBadgesFailure,W=B.fetchChannelBadgesRequest,J=B.fetchChannelBadgesSuccess,Z=B.fetchChannelBadgesFailure,Y=Object(I.a)({},["badge_sets"]),K=Object(m.a)((C={},Object(b.a)(C,Object(F.a)(z,Q,V),(function(e,t){var n=t.type,r=t.payload;return n===z.toString()?Object(N.a)(e,{global:M({},H.request)}):n===Q.toString()?Object(N.a)(e,{global:M({},H.success,{items:r.items})}):n===V.toString()?Object(N.a)(e,{global:M({},H.failure,{error:r.error})}):e})),Object(b.a)(C,Object(F.a)(W,J,Z),(function(e,t){var n=t.type,r=t.payload,a=r.channel;return n===W.toString()?Object(N.a)(e,{channels:Object(b.a)({},a,M({},H.request))}):n===J.toString()?Object(N.a)(e,{channels:Object(b.a)({},a,M({},H.success,{items:r.items}))}):n===Z.toString()?Object(N.a)(e,{channels:Object(b.a)({},a,M({},H.failure,{error:r.error}))}):e})),C),G),X=n(325);function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(n,!0).forEach((function(t){Object(b.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var te=Object(I.a)("",["chat","currentChannel"]),ne=Object(D.a)("SET_CURRENT_CHANNEL","SET_IS_CONNECTED","UPDATE_GLOBAL_USER_STATE","UPDATE_USER_STATE","UPDATE_ROOM_STATE","REMOVE_CHANNEL"),re=ne.setCurrentChannel,ae=ne.setIsConnected,ce=ne.updateGlobalUserState,oe=ne.updateUserState,ie=ne.updateRoomState,se=ne.removeChannel,ue=Object(m.a)((U={},Object(b.a)(U,re,(function(e,t){return ee({},e,{currentChannel:t.payload})})),Object(b.a)(U,ae,(function(e,t){return ee({},e,{isConnected:t.payload})})),Object(b.a)(U,ce,(function(e,t){var n=t.payload.tags;return ee({},e,{globalState:ee({},e.globalState,{},n)})})),Object(b.a)(U,oe,(function(e,t){var n=t.payload,r=n.channel,a=n.tags;return ee({},e,{channels:ee({},e.channels,Object(b.a)({},r,ee({},e.channels[r],{userState:a})))})})),Object(b.a)(U,ie,(function(e,t){var n=t.payload,r=n.channel,a=n.tags;return ee({},e,{channels:ee({},e.channels,Object(b.a)({},r,ee({},e.channels[r],{roomState:a})))})})),Object(b.a)(U,se,(function(e,t){var n=t.payload;return ee({},e,{channels:Object(X.a)([n],e.channels)})})),U),{currentChannel:null,isConnected:!1,globalState:{},channels:{}});function le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?le(n,!0).forEach((function(t){Object(b.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):le(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var be,ge=Object(D.a)("FETCH_TWITCH_EMOTES_REQUEST","FETCH_TWITCH_EMOTES_SUCCESS","FETCH_TWITCH_EMOTES_FAILURE"),de=ge.fetchTwitchEmotesRequest,pe=ge.fetchTwitchEmotesSuccess,he=ge.fetchTwitchEmotesFailure,me=Object(m.a)(Object(b.a)({},Object(F.a)(de,pe,he),(function(e,t){var n=t.type,r=t.payload;return n===de.toString()?fe({},e,{isLoading:!0,isLoaded:!1,isError:!1,error:null}):n===pe.toString()?fe({},e,{isLoading:!1,isLoaded:!0,isError:!1},r):n===he.toString()?fe({},e,{isLoading:!1,isLoaded:!1,isError:!0,error:r}):e})),{isLoading:!1,isLoaded:!1,isError:!1,error:null,items:{}}),Oe=n(34);function ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ve(n,!0).forEach((function(t){Object(b.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ve(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ee,ye=Object(D.a)("FETCH_BTTV_GLOBAL_EMOTES_REQUEST","FETCH_BTTV_GLOBAL_EMOTES_SUCCESS","FETCH_BTTV_GLOBAL_EMOTES_FAILURE","FETCH_BTTV_CHANNEL_EMOTES_REQUEST","FETCH_BTTV_CHANNEL_EMOTES_SUCCESS","FETCH_BTTV_CHANNEL_EMOTES_FAILURE"),Se=ye.fetchBttvGlobalEmotesRequest,we=ye.fetchBttvGlobalEmotesSuccess,_e=ye.fetchBttvGlobalEmotesFailure,Te=ye.fetchBttvChannelEmotesRequest,xe=ye.fetchBttvChannelEmotesSuccess,Ce=ye.fetchBttvChannelEmotesFailure,Pe=function(e){var t=e.channelEmotes,n=e.sharedEmotes;return[].concat(Object(Oe.a)(t),Object(Oe.a)(n))},Re=Object(m.a)((be={},Object(b.a)(be,Object(F.a)(Se,we,_e),(function(e,t){var n=t.type,r=t.payload;return n===Se.toString()?je({},e,{global:je({},e.global,{isLoading:!0,isLoaded:!1,isError:!1,error:null})}):n===we.toString()?je({},e,{global:je({},e.global,{isLoading:!1,isLoaded:!0,isError:!1,error:null},r)}):n===_e.toString()?je({},e,{global:je({},e.global,{isLoading:!1,isLoaded:!1,isError:!0},r)}):e})),Object(b.a)(be,Object(F.a)(Te,xe,Ce),(function(e,t){var n=t.type,r=t.payload,a=r.channel;return n===Te.toString()?je({},e,{channels:je({},e.channels,Object(b.a)({},a,{isLoading:!0,isLoaded:!1,isError:!1,error:null}))}):n===xe.toString()?je({},e,{channels:je({},e.channels,Object(b.a)({},a,{isLoading:!1,isLoaded:!0,isError:!1,error:null,items:r.items}))}):n===Ce.toString()?je({},e,{channels:je({},e.channels,Object(b.a)({},a,{isLoading:!1,isLoaded:!1,isError:!0,error:r.error}))}):e})),be),{global:{isLoading:!1,isLoaded:!1,isError:!1,error:null,items:[]},channels:{}}),ke=n(333),Le=n(326),Ae=n(337),De=n(338);function Fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fe(n,!0).forEach((function(t){Object(b.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fe(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ne=Object(D.a)("FETCH_FFZ_GLOBAL_EMOTES_REQUEST","FETCH_FFZ_GLOBAL_EMOTES_SUCCESS","FETCH_FFZ_GLOBAL_EMOTES_FAILURE","FETCH_FFZ_CHANNEL_EMOTES_REQUEST","FETCH_FFZ_CHANNEL_EMOTES_SUCCESS","FETCH_FFZ_CHANNEL_EMOTES_FAILURE"),He=Ne.fetchFfzGlobalEmotesRequest,qe=Ne.fetchFfzGlobalEmotesSuccess,Me=Ne.fetchFfzGlobalEmotesFailure,Ue=Ne.fetchFfzChannelEmotesRequest,Ge=Ne.fetchFfzChannelEmotesSuccess,Be=Ne.fetchFfzChannelEmotesFailure,ze=Object(ke.a)(Object(I.a)({},["sets"]),Le.a,Object(Ae.a)(Object(I.a)([],["emoticons"])),De.a),Qe=ze,Ve=Object(m.a)((Ee={},Object(b.a)(Ee,Object(F.a)(He,qe,Me),(function(e,t){var n=t.type,r=t.payload;return n===He.toString()?Ie({},e,{global:Ie({},e.global,{isLoading:!0,isLoaded:!1,isError:!1,error:null})}):n===qe.toString()?Ie({},e,{global:Ie({},e.global,{isLoading:!1,isLoaded:!0,isError:!1,error:null},r)}):n===Me.toString()?Ie({},e,{global:Ie({},e.global,{isLoading:!1,isLoaded:!1,isError:!0},r)}):e})),Object(b.a)(Ee,Object(F.a)(Ue,Ge,Be),(function(e,t){var n=t.type,r=t.payload,a=r.channel;return n===Ue.toString()?Ie({},e,{channels:Ie({},e.channels,Object(b.a)({},a,{isLoading:!0,isLoaded:!1,isError:!1,error:null}))}):n===Ge.toString()?Ie({},e,{channels:Ie({},e.channels,Object(b.a)({},a,{isLoading:!1,isLoaded:!0,isError:!1,error:null,items:r.items}))}):n===Be.toString()?Ie({},e,{channels:Ie({},e.channels,Object(b.a)({},a,{isLoading:!1,isLoaded:!1,isError:!0,error:r.error}))}):e})),Ee),{global:{isLoading:!1,isLoaded:!1,isError:!1,error:null,items:[]},channels:{}}),We=Object(l.c)({twitch:me,bttv:Re,ffz:Ve}),Je=n(183),Ze=n(330),Ye=n(58),Ke=n(164),Xe=Object(Ye.a)(Object(I.a)([],["emotes","twitch","items"]),Object(ke.a)(Le.a,De.a)),$e=Object(Ye.a)(Object(I.a)({},["emotes","bttv","channels"]),te,(function(e,t){return Object(I.a)([],[t,"items"],e)})),et=Object(Ye.a)(Object(I.a)([],["emotes","bttv","global","items"]),$e,(function(e,t){return[].concat(Object(Oe.a)(e),Object(Oe.a)(t))})),tt=Object(Ye.a)(Object(I.a)({},["emotes","ffz","channels"]),te,(function(e,t){return Object(I.a)([],[t,"items"],e)})),nt=Object(Ye.a)(Object(I.a)([],["emotes","ffz","global","items"]),tt,(function(e,t){return[].concat(Object(Oe.a)(e),Object(Oe.a)(t))})),rt=function(e){return{twitch:Xe(e),bttv:et(e),ffz:nt(e)}},at=function(e){return function(e){return e.emotes.twitch.isLoaded||e.emotes.twitch.isError}(e)&&function(e){return e.emotes.bttv.global.isLoaded||e.emotes.bttv.global.isError}(e)&&function(e){var t=te(e);return Object(Ke.a)(["emotes","bttv","channels",t,"isLoaded"],e)||Object(Ke.a)(["emotes","bttv","channels",t,"isError"],e)}(e)&&function(e){return e.emotes.ffz.global.isLoaded||e.emotes.ffz.global.isError}(e)&&function(e){var t=te(e);return Object(Ke.a)(["emotes","ffz","channels",t,"isLoaded"],e)||Object(Ke.a)(["emotes","ffz","channels",t,"isError"],e)}(e)},ct=function(e){return e.badges.global.items},ot=function(e){return Object(I.a)({},["badges","channels",te(e),"items"])},it=function(e){return function(e){return e.badges.global.isLoaded||e.badges.global.isError}(e)&&function(e){var t=te(e);return Object(I.a)(!1,["badges","channels",t,"isLoaded"],e)||Object(I.a)(!1,["badges","channels",t,"isError"],e)}(e)},st=n(8),ut=n(1),lt=n.n(ut),ft=n(166),bt=n(84),gt=n(167),dt=n.n(gt),pt=n(327),ht=n(339),mt=n(334),Ot=n(328),vt=n(180),jt=n(27),Et=n(340),yt=/^(?:(?:[a-z]+:)?\/\/)/,St=function(e){return yt.test(e)?e:"//".concat(e)};function wt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var _t="//static-cdn.jtvnw.net/emoticons/v1",Tt=/^@([\w_]+)/,xt=dt()({strict:!1}),Ct=Object(ke.a)(pt.a,Object(Ae.a)((function(e){var t=Object(st.a)(e,2),n=t[0],r=t[1];return Object(Ae.a)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wt(n,!0).forEach((function(t){Object(b.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:n},e)}),r)})),De.a),Pt=Object(ke.a)(pt.a,Object(Ae.a)((function(e){var t=Object(st.a)(e,2),n=t[0],r=t[1];return"".concat(r," ").concat(n,"x")})),Object(ht.a)(", ")),Rt=function(e,t){return{type:"twitch-emote",alt:e,src:"".concat(_t,"/").concat(t,"/1.0"),srcSet:"".concat(_t,"/").concat(t,"/1.0 1x, ").concat(_t,"/").concat(t,"/2.0 2x, ").concat(_t,"/").concat(t,"/3.0 4x")}},kt=function(e,t){return{type:"mention",text:e,target:t}},Lt=lt.a.shape({type:lt.a.oneOf(["twitch-emote"]).isRequired,alt:lt.a.string.isRequired,src:lt.a.string.isRequired,srcSet:lt.a.string.isRequired}),At=lt.a.shape({type:lt.a.oneOf(["bttv-emote"]).isRequired,alt:lt.a.string.isRequired,src:lt.a.string.isRequired,srcSet:lt.a.string.isRequired}),Dt=lt.a.shape({type:lt.a.oneOf(["ffz-emote"]).isRequired,alt:lt.a.string.isRequired,src:lt.a.string.isRequired,srcSet:lt.a.string.isRequired}),Ft=lt.a.shape({type:lt.a.oneOf(["emoji"]).isRequired,alt:lt.a.string.isRequired,src:lt.a.string.isRequired,srcSet:lt.a.string.isRequired}),It=lt.a.shape({type:lt.a.oneOf(["mention"]).isRequired,text:lt.a.string.isRequired,target:lt.a.string.isRequired}),Nt=lt.a.shape({type:lt.a.oneOf(["link"]).isRequired,text:lt.a.string.isRequired,href:lt.a.string.isRequired}),Ht=function(e,t,n){var r=t.twitch,a=t.bttv,c=t.ffz,o=n.parseTwitch;if(void 0!==o&&o){var i=function(e,t){return Object(mt.a)(Object(Ot.a)("code",e),t)}(e,r);if(i)return Rt(e,i.id)}var s=function(e,t){return Object(mt.a)(Object(Ot.a)("code",e),t)}(e,a);if(s)return function(e,t){var n=t.id;return{type:"bttv-emote",alt:e,src:"".concat("//cdn.betterttv.net/emote","/").concat(n,"/1x"),srcSet:"".concat("//cdn.betterttv.net/emote","/").concat(n,"/2x 2x, ").concat("//cdn.betterttv.net/emote","/").concat(n,"/3x 4x")}}(e,s);var u=function(e,t){return Object(mt.a)(Object(Ot.a)("name",e),t)}(e,c);if(u)return function(e,t){var n=t.urls;return{type:"ffz-emote",alt:e,src:n[1],srcSet:Pt(n)}}(e,u);var l,f=Object(ft.parse)(e,{assetType:"png"});if(f&&1===f.length&&f[0].text.length===e.length){var b=(l=e,Object(ke.a)(Object(vt.a)(Object(Ot.a)("char",l)),jt.a,Et.a)(bt));if(b){var g=Object(st.a)(f,1)[0].url;return{type:"emoji",alt:b,src:g,srcSet:null}}}var d=e.match(Tt);if(d){var p=Object(st.a)(d,2),h=p[0],m=p[1];return[kt(h,m.toLowerCase()),e.length-h.length]}var O,v=e.match(xt);return v&&v[0].length===e.length?{type:"link",text:O=e,href:St(O)}:null},qt=function(e,t,n){var r=void 0===t||null===t,a=t&&Object.keys(t).length>0,c=Ct(t),o=[],i=0,s=0;do{var u=e.indexOf(" ",i+1),l=0===i?i:i+1,f=-1===u?e.length:u,b=e.substring(l,f);if(b){var g=null;if(a){var d=Object(mt.a)(Object(Ot.a)("start",l),c);d&&(g=Rt(b,d.id))}if(g||(g=Ht(b,n,{parseTwitch:r})),g){if(s!==l){var p=e.substring(s,l);o.push(p)}if(Array.isArray(g)){var h=g,m=Object(st.a)(h,2),O=m[0],v=m[1];o.push(O),s=f-v}else o.push(g),s=f}}if(-1===u&&s!==f){var j=e.substring(s,f);o.push(j)}i=u}while(-1!==i);return o},Mt=function(e,t,n){return Object(ke.a)(pt.a,Object(Ae.a)((function(e){var r=Object(st.a)(e,2),a=r[0],c=r[1],o=Object(I.a)(!1,[a,"versions",c],n)||Object(I.a)(!1,[a,"versions",c],t);return!!o&&function(e){var t=e.title,n=e.description,r=e.image_url_1x,a=e.image_url_2x,c=e.image_url_4x;return{alt:t,label:n,src:r,srcSet:"".concat(r," 1x, ").concat(a," 2x, ").concat(c," 4x")}}(o)})),Object(vt.a)(Boolean))(e)},Ut=n(44),Gt=n(168),Bt=n(169),zt=n(179),Qt=n(170),Vt=n(181),Wt=n(329),Jt=n(66),Zt=n(171),Yt=n.n(Zt),Kt=n(85),Xt=n.n(Kt);function $t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function en(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$t(n,!0).forEach((function(t){Object(b.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$t(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var tn,nn=["CAP","002","003","004","353","366","375","372","376"],rn=["mod","emote-only","r9k","rituals","subs-only","msg-param-should-share-streak"],an=["ban-duration","bits","msg-param-cumulative-months","msg-param-months","msg-param-promo-gift-total","msg-param-streak-months","msg-param-viewerCount","msg-param-threshold"],cn=["subscriber","turbo","user-type"],on=["msg_banned","msg_bad_characters","msg_channel_blocked","msg_channel_suspended","msg_duplicate","msg_emoteonly","msg_facebook","msg_followersonly","msg_followersonly_followed","msg_followersonly_zero","msg_r9k","msg_ratelimit","msg_rejected","msg_rejected_mandatory","msg_room_not_found","msg_slowmode","msg_subsonly","msg_suspended","msg_timedout","msg_verified_email"],sn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e?e.split(",").reduce((function(e,t){var n=t.split("/"),r=Object(st.a)(n,2),a=r[0],c=r[1];return en({},e,Object(b.a)({},a,c))}),{}):{}},un=function(e,t){if("emotes"===e)return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e?e.split("/").reduce((function(e,t){var n=t.split(":"),r=Object(st.a)(n,2),a=r[0],c=r[1];return en({},e,Object(b.a)({},a,c.split(",").map((function(e){var t=e.split("-"),n=Object(st.a)(t,2),r=n[0],a=n[1];return{start:Number.parseInt(r,10),end:Number.parseInt(a,10)}}))))}),{}):{}}(t);if("badges"===e)return sn(t);if("badge-info"===e)return sn(t);if("followers-only"===e){var n=!1;return"-1"===t?n=!1:"0"===t?n=!0:"string"===typeof t&&(n=parseInt(t,10)),n}if("slow"===e){var r=!1;return"0"===t?r=!1:"string"===typeof t&&(r=parseInt(t,10)),r}return rn.includes(e)?"1"===t:an.includes(e)?parseInt(t,10):"string"===typeof t?t.replace("\\s"," "):t},ln=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.entries(e).filter((function(e){var t=Object(st.a)(e,1)[0];return!cn.includes(t)})).reduce((function(e,t){var n=Object(st.a)(t,2),r=n[0],a=n[1];return en({},e,Object(b.a)({},Yt()(r),un(r,a)))}),{})},fn=function(e){return e.startsWith("\x01ACTION ")&&e.endsWith("\x01")},bn=function(e){return e.slice(8,-1)},gn=function(e){return{tags:e.tags,channel:Object(st.a)(e.params,1)[0].slice(1)}},dn=gn,pn=gn,hn=function(e){return{message:e.message,tags:e.tags,channel:Object(st.a)(e.params,1)[0].slice(1)}},mn=hn,On=hn,vn=hn,jn=hn,En=hn,yn=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(Gt.a)(this,t),(e=Object(zt.a)(this,Object(Qt.a)(t).call(this))).socket=null,e.channels={},e.options=n,e.user=null,e._queue=[],e._messagesQueue={},e}return Object(Vt.a)(t,e),Object(Bt.a)(t,[{key:"_onConnect",value:function(){var e=this.options.identity,t=e.name,n=e.auth;this.sendRaw(["CAP REQ :twitch.tv/tags twitch.tv/commands","PASS oauth:".concat(n),"NICK ".concat(t)]),this.emit("connected")}},{key:"_onClose",value:function(e){this.emit("disconnected",{willReconnect:!1,hadError:e})}},{key:"_onError",value:function(e){this.emit("error",e)}},{key:"_onData",value:function(e){var t=this;e.trim().split("\r\n").forEach((function(e){return t._handleMessage(e)}))}},{key:"_emmitOwnMessage",value:function(e,t){var n=Object(I.a)([],["_messagesQueue",t],this).shift();if("string"===typeof n){var r=n.startsWith("/me "),a={message:r?n.slice(4):n,tags:en({},e,{id:Xt()(),tmiSentTs:(new Date).getTime(),userId:this.user.userId}),user:this.options.identity.name,channel:t,isAction:r};this.emit("ownmessage",a)}}},{key:"_handleMessage",value:function(e){var t=Object(Ut.parse)(e);t.raw=e;var n=t.command;if("PING"===n)return this.sendRaw("PONG :tmi.twitch.tv"),void this.emit("ping");if(!t.prefix||"jtv"!==t.prefix.user)if("001"!==n){if(!nn.includes(n)){var r=function(e){var t=e.raw,n=e.command,r=e.tags,a=e.middle,c=e.trailing,o=e.prefix;return{raw:t,command:n,tags:ln(r),params:a,message:c,prefix:o}}(t),a=Object(I.a)("",["params",0],r).slice(1);if("PRIVMSG"!==n){if("USERSTATE"===n){var c=dn(r);return this.channels=Object(N.a)(this.channels,Object(b.a)({},a,{userState:c.tags})),Object(I.a)(0,["_messagesQueue",a,"length"],this)>0&&this._emmitOwnMessage(c.tags,a),void this.emit("userstate",c)}if("JOIN"===n){var o={channel:a};return this.channels=Object(N.a)(this.channels,Object(b.a)({},a,{})),void this.emit("join",o)}if("PART"===n){var i={channel:a};return this.channels=Object(X.a)([a],this.channels),void this.emit("part",i)}if("ROOMSTATE"===n){var s=pn(r);return this.channels=Object(N.a)(this.channels,Object(b.a)({},a,{roomState:s.tags})),void this.emit("roomstate",s)}if("NOTICE"===n){var u=mn(r);return on.includes(r.tags.msgId)&&Object(I.a)([],["_messagesQueue",a],this).shift(),void this.emit("notice",u)}if("USERNOTICE"!==n)if("CLEARCHAT"!==n)if("CLEARMSG"!==n)if("HOSTTARGET"!==n)if("WHISPER"!==n){var l;if("GLOBALUSERSTATE"!==n){this.emit("unhandled-command",r)}else{var f={tags:r.tags};for(this.user=f.tags;this._queue.length;){var g=this._queue.shift();this.sendRaw(g)}this.emit("globaluserstate",f)}}else{var d={message:(l=r).message,tags:l.tags,channel:Object(st.a)(l.params,1)[0],user:l.prefix.user};this.emit("whisper",d)}else{var p=En(r);this.emit("hosttarget",p)}else{var h=vn(r);this.emit("clearmsg",h)}else{var m=jn(r);this.emit("clearchat",m)}else{var O=On(r);this.emit("usernotice",O)}}else{var v=function(e){var t=e.message,n=e.tags,r=e.params,a=e.prefix.user,c=fn(t);return{message:c?bn(t):t,tags:n,user:a,channel:r[0].slice(1),isAction:c}}(r);this.emit("message",v)}}}else{var j=t.params[0];this.options.identity.name=j}}},{key:"sendRaw",value:function(e){var t=this,n=function(e){e&&t.emit("error",e)};Array.isArray(e)?e.forEach((function(e){return t.socket.send("".concat(e,"\r\n"),n)})):this.socket.send("".concat(e,"\r\n"),n)}},{key:"connect",value:function(){var e=this;this.socket=new WebSocket("wss://irc-ws.chat.twitch.tv:443");var t=this.socket;t.addEventListener("open",(function(){return e._onConnect()})),t.addEventListener("close",(function(t){return e._onClose(t)})),t.addEventListener("error",(function(t){return e._onError(t)})),t.addEventListener("message",(function(t){return e._onData(t.data)}))}},{key:"say",value:function(e,t){if(t){var n=Object(Ut.format)({command:"PRIVMSG",middle:["#".concat(e)],trailing:t});this.sendRaw(n),this._messagesQueue=Object(Wt.a)(Ze.a,this._messagesQueue,Object(b.a)({},e,[t]))}}},{key:"sendCommand",value:function(e,t,n){var r=Array.isArray(n)?n.join(" "):n,a=Object(Ut.format)({command:"PRIVMSG",middle:["#".concat(e)],trailing:"/".concat(t," ").concat(r)});this.sendRaw(a)}},{key:"join",value:function(e){var t=Object(Ut.format)({command:"JOIN",middle:["#".concat(e)]});this.user?this.sendRaw(t):this._queue.push(t)}},{key:"part",value:function(e){var t=Object(Ut.format)({command:"PART",middle:["#".concat(e)]});this.user?this.sendRaw(t):this._queue.push(t)}}]),t}(Jt.EventEmitter),Sn=function(e,t){var n=ct(e),r=ot(e);return t.map((function(e){return Object(Ut.parse)(e)})).filter((function(e){return"PRIVMSG"===e.command})).map((function(t){var a=t.tags,c=Object(st.a)(t.params,2),o=c[0],i=c[1],s=t.prefix.user,u=fn(i),l=u?bn(i):i,f=ln(a);return{type:"MESSAGE",message:l,messageArray:qt(l,f.emotes,rt(e)),tags:f,badges:Mt(f.badges,n,r),user:s,channel:o.slice(1),isAction:u,isHistory:!0}}))};function wn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wn(n,!0).forEach((function(t){Object(b.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wn(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Tn="MESSAGE",xn="NOTICE_MESSAGE",Cn="USER_NOTICE_MESSAGE",Pn=Object(D.a)("ADD_MESSAGE_ENTITY","FETCH_RECENT_MESSAGES_REQUEST","FETCH_RECENT_MESSAGES_SUCCESS","FETCH_RECENT_MESSAGES_FAILURE"),Rn=Pn.addMessageEntity,kn=Pn.fetchRecentMessagesRequest,Ln=Pn.fetchRecentMessagesSuccess,An=Pn.fetchRecentMessagesFailure,Dn=Object(h.a)("CLEAR_CHAT"),Fn=Object(h.a)("ADD_RECENT_MESSAGES"),In=function(e){var t=e.length-500;return t>0?e.slice(t):e},Nn=function(e,t,n){return n&&t%2?!e:e},Hn=Object(m.a)((tn={},Object(b.a)(tn,Rn,(function(e,t){var n=t.payload,r=n.channel,a=Object(I.a)([],[r,"items"],e),c=[].concat(Object(Oe.a)(a),[n]),o=In(c),i=c.length>o.length,s=Object(I.a)(!1,[r,"isEven"],e);return _n({},e,Object(b.a)({},r,_n({},e[r],{isEven:Nn(s,1,i),items:o})))})),Object(b.a)(tn,Fn,(function(e,t){var n=t.payload,r=n.channel,a=n.items,c=Object(Ze.a)(a,Object(I.a)([],[r,"items"],e)),o=In(c),i=c.length>o.length,s=Object(I.a)(!1,[r,"isEven"],e);return Object(N.a)(e,Object(b.a)({},r,{history:{items:[]},items:c,isEven:Nn(s,a.length,i)}))})),Object(b.a)(tn,Object(F.a)(kn,Ln,An),(function(e,t){var n=t.type,r=t.payload,a=r.channel;return n===kn.toString()?Object(N.a)(e,Object(b.a)({},a,{history:_n({},H.request)})):n===Ln.toString()?Object(N.a)(e,Object(b.a)({},a,{history:_n({},H.success,{items:r.items})})):n===An.toString()?Object(N.a)(e,Object(b.a)({},a,{history:_n({},H.failure,{error:r.error})})):e})),Object(b.a)(tn,Dn,(function(e,t){var n=t.payload,r=n.channel,a=n.tags.targetUserId,c=e[r].items.map((function(e){return e.tags.userId!==a||e.isHistory?e:_n({},e,{isDeleted:!0})}));return _n({},e,Object(b.a)({},r,_n({},e[r],{items:c})))})),tn),{}),qn=Object(l.c)({auth:A,badges:K,chat:ue,emotes:We,messages:Hn}),Mn=Object(l.a)(f.a),Un=Object(l.d)(qn,{},Mn),Gn=n(16),Bn=n(67),zn=n(43),Qn=function(){var e=Object(a.useState)(window.location.hash),t=Object(st.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){var e=function(){return r(window.location.hash)};return window.addEventListener("hashchange",e),function(){return window.removeEventListener("hashchange",e)}}),[]),n},Vn=function(e){Object(a.useEffect)((function(){document.title=e?"#".concat(e," - ").concat("Honey Chat"," "):"Honey Chat"}),[e])},Wn=function(e){return Object(I.a)([],["messages",te(e),"items"],e)},Jn=function(e){return Object(I.a)(!1,["messages",te(e),"history","isLoaded"])(e)},Zn=function(e){return Object(I.a)(null,["chat","channels",te(e),"roomState","roomId"],e)},Yn=function(e){return Object(I.a)(!1,["messages",te(e),"isEven"],e)},Kn=function(e){return e.split(" ").map((function(e){if(":"!==e[0]||":"!==e[e.length-1])return e;var t=e.slice(1,-1),n=bt[t];return n&&n.char?n.char:e})).join(" ")},Xn=n(6),$n=n(7),er=n(172);function tr(){var e=Object(Xn.a)(["\n  color: #bf94ff;\n  text-decoration: none;\n\n  &:focus,\n  &:hover {\n    color: #a970ff;\n    text-decoration: underline;\n  }\n\n  &:visited {\n    color: #a970ff;\n  }\n"]);return tr=function(){return e},e}function nr(){var e=Object(Xn.a)(["\n  display: block;\n  padding: 10px;\n  width: 100%;\n  height: 38px;\n  max-height: 91px;\n  min-height: 40px;\n  overflow: hidden;\n  border: 2px solid transparent;\n  background-color: rgba(255, 255, 255, 0.15);\n  font-family: inherit;\n  font-size: 12px;\n  line-height: 1.5;\n  border-radius: 4px;\n  outline: none;\n  color: #fff;\n  resize: none;\n  transition-duration: 0.1s;\n  transition-timing-function: ease-in;\n  transition-property: box-shadow, border, background-color;\n\n  &:focus {\n    background-color: #000;\n    border-color: #9147ff;\n  }\n\n  &[disabled] {\n    opacity: 0.5;\n    pointer-events: none;\n  }\n"]);return nr=function(){return e},e}function rr(){var e=Object(Xn.a)(["\n  padding: 0 10px;\n  height: 30px;\n  border: none;\n  color: #fff;\n  background-color: #9147ff;\n  outline: none;\n  font-size: 12px;\n  border-radius: 4px;\n  cursor: pointer;\n\n  &:hover {\n    background-color: #772ce8;\n  }\n\n  &:active {\n    background-color: #5c16c5;\n  }\n\n  &:focus {\n    box-shadow: 0 0 6px 0 #772ce8;\n  }\n\n  &[disabled] {\n    background-color: rgba(255, 255, 255, 0.26);\n    color: rgba(255, 255, 255, 0.8);\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n"]);return rr=function(){return e},e}function ar(){var e=Object(Xn.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n  align-items: center;\n\n  & > :not(:last-child) {\n    margin-right: 20px;\n  }\n"]);return ar=function(){return e},e}function cr(){var e=Object(Xn.a)(["\n  padding-left: 10px;\n  padding-right: 10px;\n  padding-bottom: 10px;\n  background-color: #18181b;\n\n  & > :not(:last-child) {\n    margin-bottom: 10px;\n  }\n"]);return cr=function(){return e},e}var or=$n.c.form(cr()),ir=$n.c.div(ar()),sr=$n.c.button(rr()),ur=$n.c.textarea(nr()),lr=Object($n.c)(Bn.b)(tr()),fr=function(e){var t=e.isAuth,n=e.isDisabled,r=e.onSubmit,o=Object(a.useRef)(null),i=Object(a.useState)(""),s=Object(st.a)(i,2),u=s[0],l=s[1],f=Object(a.useCallback)((function(e){if("Enter"===e.key){e.preventDefault();var t=u.trim();t&&(r(t),l(""))}}),[r,l,u]);return Object(a.useEffect)((function(){var e=o.current;return e.addEventListener("keydown",f,!1),function(){e.removeEventListener("keydown",f,!1)}}),[f]),c.a.createElement(or,{onSubmit:function(e){e.preventDefault(),r(u),l("")}},c.a.createElement(ur,{placeholder:"Send a message",ref:o,maxLength:500,disabled:n,onChange:function(e){return l(e.target.value)},value:u}),c.a.createElement(ir,null,!t&&c.a.createElement(lr,{to:"/chat/auth"},"Sign in with Twitch"),c.a.createElement(sr,{disabled:n,type:"submit"},"Chat")))};fr.defaultProps={isDisabled:!1};var br=fr;lt.a.shape({type:lt.a.oneOf([Tn]).isRequired,message:lt.a.string.isRequired,messageArray:lt.a.arrayOf(lt.a.oneOfType([lt.a.string,lt.a.shape({}),Lt,At,Dt,Ft,It,Nt])).isRequired,tags:lt.a.shape({badgeInfo:lt.a.shape({subscriber:lt.a.string}),badges:lt.a.shape({}),color:lt.a.string,displayName:lt.a.string.isRequired,emotes:lt.a.shape({}),flags:lt.a.string,id:lt.a.string,mod:lt.a.bool,roomId:lt.a.string,tmiSentId:lt.a.oneOfType([lt.a.string,lt.a.number]),userId:lt.a.string}).isRequired,badges:lt.a.arrayOf(lt.a.shape({alt:lt.a.string,label:lt.a.string,src:lt.a.string.isRequired,srcSet:lt.a.string})),user:lt.a.string.isRequired,isHistory:lt.a.bool,isAction:lt.a.bool,isDeleted:lt.a.bool}),lt.a.shape({type:lt.a.oneOf([xn]).isRequired,message:lt.a.string.isRequired,channel:lt.a.string.isRequired,tags:lt.a.shape({msgId:lt.a.string.isRequired}).isRequired}),lt.a.shape({type:lt.a.oneOf([Cn]).isRequired,message:lt.a.string,channel:lt.a.string.isRequired,tags:lt.a.shape({badgeInfo:lt.a.shape({subscriber:lt.a.string}),badges:lt.a.shape({}),color:lt.a.string,displayName:lt.a.string.isRequired,emotes:lt.a.shape({}),id:lt.a.string,login:lt.a.string,mod:lt.a.bool,msgId:lt.a.string,systemMsg:lt.a.string,tmiSentId:lt.a.oneOfType([lt.a.string,lt.a.number]),userId:lt.a.string,msgParamCumulativeMonths:lt.a.number,msgParamDisplayName:lt.a.string,msgParamLogin:lt.a.string,msgParamMonths:lt.a.number,msgParamPromoGiftTotal:lt.a.number,msgParamPromoName:lt.a.string,msgParamRecipientDisplayName:lt.a.string,msgParamRecipientId:lt.a.string,msgParamRecipientUserName:lt.a.string,msgParamSenderLogin:lt.a.string,msgParamSenderName:lt.a.string,msgParamShouldShareStreak:lt.a.bool,msgParamStreakMonths:lt.a.number,msgParamSubPlan:lt.a.string,msgParamSubPlanName:lt.a.string,msgParamViewerCount:lt.a.number,msgParamRitualName:lt.a.string,msgParamThreshold:lt.a.number}).isRequired});function gr(){var e=Object(Xn.a)(["\n  margin-bottom: 2px;\n  margin-right: 3px;\n  max-width: 100%;\n  vertical-align: middle;\n  border-radius: 3px;\n"]);return gr=function(){return e},e}function dr(){var e=Object(Xn.a)(["\n  color: #bf94ff;\n  text-decoration: none;\n  cursor: pointer;\n\n  &:focus,\n  &:hover {\n    color: #a970ff;\n    text-decoration: underline;\n  }\n\n  &:visited {\n    color: #a970ff;\n  }\n"]);return dr=function(){return e},e}function pr(){var e=Object(Xn.a)(["\n      padding: 2px 4px;\n      background-color: #fafafa;\n      color: #18181b;\n    "]);return pr=function(){return e},e}function hr(){var e=Object(Xn.a)(["\n  ","\n"]);return hr=function(){return e},e}function mr(){var e=Object(Xn.a)(["\n  display: inline-block;\n  margin-top: -5px;\n  margin-bottom: -4px;\n  width: 20px;\n  height: auto;\n  vertical-align: middle;\n"]);return mr=function(){return e},e}function Or(){var e=Object(Xn.a)(["\n  display: inline-block;\n  margin: -5px 0;\n  vertical-align: middle;\n"]);return Or=function(){return e},e}function vr(){var e=Object(Xn.a)(["\n  font-weight: bold;\n  color: ",";\n"]);return vr=function(){return e},e}function jr(){var e=Object(Xn.a)(["\n  padding: 5px 20px;\n  color: ",";\n  opacity: ",";\n  line-height: 20px;\n  word-wrap: break-word;\n  background-color: ",";\n"]);return jr=function(){return e},e}var Er=$n.c.div(jr(),(function(e){return e.isAction?e.color:"#fff"}),(function(e){return e.isHistory||e.isDeleted?"0.5":"1"}),(function(e){return e.isMention?"rgba(255, 0, 0, 0.3)":e.isEven?"#1f1925":"transparent"})),yr=$n.c.span(vr(),(function(e){return e.color})),Sr=$n.c.img(Or()),wr=$n.c.img(mr()),_r=$n.c.span(hr(),(function(e){return e.isActive&&Object($n.b)(pr())})),Tr=$n.c.a(dr()),xr=$n.c.img(gr()),Cr=function(e){var t=e.message,n=t.message,r=t.messageArray,o=t.tags,i=o.color,s=o.displayName,u=t.badges,l=t.user,f=t.isHistory,b=t.isAction,g=t.isDeleted,d=e.login,p=e.isEven,h=Object(a.useState)(!1),m=Object(st.a)(h,2),O=m[0],v=m[1],j=l!==d&&RegExp(d,"gi").test(n);return c.a.createElement(Er,{isHistory:f,isAction:b,isEven:p,isMention:j,isDeleted:g,color:i},u.length>0&&function(e){return e.map((function(e,t){var n=e.alt,r=e.label,a=e.src,o=e.srcSet;return c.a.createElement(xr,{key:t,alt:n,"aria-label":r,src:a,srcSet:o})}))}(u),c.a.createElement(yr,{color:i},s),b?" ":": ",g&&!O?c.a.createElement(Tr,{onClick:function(){return v(!0)}},"<message deleted>"):r.map(function(e,t){return function(n,r){if("object"!==typeof n)return n;if("twitch-emote"===n.type||"bttv-emote"===n.type||"ffz-emote"===n.type)return c.a.createElement(Sr,{key:r,src:n.src,srcSet:n.srcSet,alt:n.alt});if("emoji"===n.type)return c.a.createElement(wr,{key:r,src:n.src,srcSet:n.srcSet,alt:n.alt});if("mention"===n.type){var a=n.target===t||e===t;return c.a.createElement(_r,{key:r,isActive:a},n.text)}return"link"===n.type?c.a.createElement(Tr,{key:r,href:n.href,rel:"noreferrer noopener",target:"_blank"},n.text):null}}(l,d)))};Cr.defaultProps={isEven:!1};var Pr=Cr;function Rr(){var e=Object(Xn.a)(["\n  padding: 5px 20px;\n  color: rgba(255, 255, 255, 0.6);\n  line-height: 20px;\n  word-wrap: break-word;\n  background-color: ",";\n"]);return Rr=function(){return e},e}var kr=$n.c.div(Rr(),(function(e){return e.isEven?"#1f1925":"transparent"})),Lr=function(e){var t=e.message.message,n=e.isEven;return c.a.createElement(kr,{isEven:n},t)};Lr.defaultProps={isEven:!1};var Ar=Lr;function Dr(){var e=Object(Xn.a)(["\n  padding: 5px 20px 5px 16px;\n  line-height: 20px;\n  word-wrap: break-word;\n  border-left: 4px solid #9147ff;\n  color: #fff;\n"]);return Dr=function(){return e},e}var Fr=$n.c.div(Dr()),Ir=function(e){var t=e.message.tags.systemMsg;return c.a.createElement(Fr,null,t)},Nr=function(e){var t=e.message,n=e.login,r=e.isEven;return t.type===Tn?c.a.createElement(Pr,{message:t,login:n,isEven:r}):t.type===xn?c.a.createElement(Ar,{message:t,isEven:r}):t.type===Cn?c.a.createElement(Ir,{message:t}):null};Nr.defaultProps={isEven:!1};var Hr=Nr;function qr(){var e=Object(Xn.a)(["\n  position: absolute;\n  left: 50%;\n  bottom: 10px;\n  display: ",";\n  padding: 5px 20px;\n  background: rgba(0, 0, 0, 0.6);\n  color: #fff;\n  border-radius: 4px;\n  border: none;\n  outline: none;\n  cursor: pointer;\n  transform: translateX(-50%);\n"]);return qr=function(){return e},e}function Mr(){var e=Object(Xn.a)(["\n  overflow-y: auto;\n\n  .ScrollbarsCustom-TrackY {\n    background: none !important;\n  }\n\n  .ScrollbarsCustom-ThumbY {\n    margin-left: auto;\n    margin-right: auto;\n    width: 6px !important;\n  }\n\n  .ScrollbarsCustom-Content {\n    padding-bottom: 10px !important;\n  }\n"]);return Mr=function(){return e},e}function Ur(){var e=Object(Xn.a)(["\n  position: relative;\n  flex-grow: 1;\n"]);return Ur=function(){return e},e}function Gr(){var e=Object(Xn.a)(["\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  background-color: #18181b;\n"]);return Gr=function(){return e},e}function Br(){var e=Object(Xn.a)(["\n  height: 100vh;\n  font-size: 12px;\n"]);return Br=function(){return e},e}var zr=$n.c.div(Br()),Qr=$n.c.div(Gr()),Vr=$n.c.div(Ur()),Wr=Object($n.c)(er.a).attrs({disableTracksWidthCompensation:!0})(Mr()),Jr=$n.c.button(qr(),(function(e){return e.visible?"block":"none"})),Zr=function(e){var t=e.onSendMessage,n=Object(Gn.c)((function(e){return e.auth.isAuth})),r=Object(Gn.c)(Wn),o=Object(Gn.c)((function(e){return e.chat.isConnected})),i=Object(Gn.c)(Yn),s=Object(Gn.c)((function(e){return e.auth.user.login})),u=Object(a.useState)(!1),l=Object(st.a)(u,2),f=l[0],b=l[1],g=Object(a.useRef)(null),d=function(){g.current&&g.current.scrollToBottom&&g.current.scrollToBottom()};Object(a.useEffect)((function(){f||d()}),[r]);return c.a.createElement(zr,null,c.a.createElement(Qr,null,c.a.createElement(Vr,null,c.a.createElement(Wr,{onUpdate:function(e){var t=e.clientHeight,n=e.contentScrollHeight,r=e.scrollTop;b(r+100<n-t)},ref:g},r.map((function(e,t){return c.a.createElement(Hr,{key:e.tags.id,message:e,login:s,isEven:i?t%2===1:t%2===0})}))),c.a.createElement(Jr,{onClick:d,visible:f},"More messages below")),c.a.createElement(br,{onSubmit:t,isDisabled:!n||!o,isAuth:n})))};function Yr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Kr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yr(n,!0).forEach((function(t){Object(b.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yr(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Xr=null,$r=function(){var e=Object(Gn.b)(),t=Object(Gn.c)((function(e){return e.auth.isAuth})),n=Object(Gn.c)((function(e){return e.auth.user.login})),r=Object(Gn.c)((function(e){return e.auth.user.id})),o=Object(Gn.c)(te),i=Object(Gn.c)(Zn),s=Object(Gn.c)(at),u=Object(Gn.c)(it),l=Object(Gn.c)(Jn),f=Qn();Vn(o),Object(a.useEffect)((function(){var t=localStorage.getItem("user");if(t){var n=JSON.parse(t);e(P({isAuth:!0,user:n}))}}),[e]),Object(a.useEffect)((function(){if(f&&f.length>1){var t=f.slice(1);e(re(t)),localStorage.setItem("lastChannel",t)}}),[e,f]),Object(a.useEffect)((function(){if(o&&t){var r={identity:{name:n,auth:localStorage.accessToken}},a=function(t){return e(function(e){var t=e.message,n=e.tags,r=Object(Je.a)(e,["message","tags"]);return function(e,a){var c=a(),o=ct(c),i=ot(c),s=rt(c),u=_n({type:Tn,message:t,messageArray:qt(t,n.emotes,s),tags:n,badges:Mt(n.badges,o,i)},r);e(Rn(u))}}(t))};Xr||((Xr=new yn(r)).connect(),Xr.on("connected",(function(){return e(ae(!0))})),Xr.on("disconnected",(function(){return e(ae(!1))})),Xr.on("globaluserstate",(function(t){return e(ce(t))})),Xr.on("userstate",(function(t){return e(oe(t))})),Xr.on("roomstate",(function(t){return e(ie(t))})),Xr.on("clearchat",(function(t){t.tags.targetUserId&&e(Dn(t))})),Xr.on("message",a),Xr.on("ownmessage",a),Xr.on("notice",(function(t){var n,r=Kr({},t,{tags:Kr({},t.tags,{id:Xt()()})});e((n=r,function(e){var t=_n({},n,{type:xn});e(Rn(t))}))})),Xr.on("usernotice",(function(t){return e((n=t,function(e){var t=_n({},n,{type:Cn});e(Rn(t))}));var n}))),Xr.join(o)}}),[e,n,o,t]),Object(a.useEffect)((function(){e(function(){var e=Object(p.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(Se()),e.prev=1,e.next=4,O("https://api.betterttv.net/3/cached/emotes/global");case 4:n=e.sent,t(we({items:n})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t(_e({error:e.t0}));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()),e(function(){var e=Object(p.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(He()),e.prev=1,e.next=4,O("https://api.frankerfacez.com/v1/set/global");case 4:n=e.sent,r={items:ze(n)},t(qe(r)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t(Me({error:e.t0}));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()),e(function(){var e=Object(p.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(z()),e.prev=1,e.next=4,w();case 4:n=e.sent,r={items:Y(n)},t(Q(r)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t(V({error:e.t0}));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}())}),[e]),Object(a.useEffect)((function(){var t;o&&e((t=o,function(){var e=Object(p.a)(d.a.mark((function e(n){var r,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(kn({channel:t})),e.prev=1,e.next=4,S(t);case 4:r=e.sent,a={channel:t,items:r.messages},n(Ln(a)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),n(An({channel:t,error:e.t0}));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()))}),[e,o]),Object(a.useEffect)((function(){var t;o&&s&&u&&l&&e((t=o,function(e,n){var r=n(),a=Object(I.a)([],["messages",t,"history","items"],r),c={channel:t,items:Sn(r,a)};e(Fn(c))}))}),[e,o,s,u,l]),Object(a.useEffect)((function(){r&&e(function(e){return function(){var t=Object(p.a)(d.a.mark((function t(n){var r,a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(de),t.prev=1,t.next=4,j(e);case 4:r=t.sent,a={items:r.emoticon_sets},n(pe(a)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),n(he(t.t0));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()}(r))}),[e,r]),Object(a.useEffect)((function(){var t,n;o&&i&&(e((t=i,n=o,function(){var e=Object(p.a)(d.a.mark((function e(r){var a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(Te({channel:n})),e.prev=1,e.next=4,E(t);case 4:a=e.sent,c={channel:n,items:Pe(a)},r(xe(c)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),r(Ce({channel:n,error:e.t0}));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}())),e(function(e,t){return function(){var n=Object(p.a)(d.a.mark((function n(r){var a,c;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(Ue({channel:t})),n.prev=1,n.next=4,y(e);case 4:a=n.sent,c={channel:t,items:Qe(a)},r(Ge(c)),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),r(Be({channel:t,error:n.t0}));case 12:case"end":return n.stop()}}),n,null,[[1,9]])})));return function(e){return n.apply(this,arguments)}}()}(i,o)),e(function(e,t){return function(){var n=Object(p.a)(d.a.mark((function n(r){var a,c;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(W({channel:t})),n.prev=1,n.next=4,_(e);case 4:a=n.sent,c={channel:t,items:Y(a)},r(J(c)),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),r(Z({channel:t,error:n.t0}));case 12:case"end":return n.stop()}}),n,null,[[1,9]])})));return function(e){return n.apply(this,arguments)}}()}(i,o)))}),[e,o,i]);return c.a.createElement(Zr,{onSendMessage:function(e){var t=Kn(e.trim());Xr.say(o,t)}})},ea={client_id:"4e66w1po1tzf645r9vutn9qus05vg9x",redirect_uri:"https://honeykingdom.github.io/chat/",response_type:"token+id_token",scope:["openid","channel:moderate","chat:edit","chat:read","whispers:read","whispers:edit","user_blocks_read","user_blocks_edit","user_subscriptions"].join("+"),claims:JSON.stringify({id_token:{email_verified:null,picture:null,preferred_username:null}})},ta=function(){var e=Object.entries(ea).map((function(e){var t=Object(st.a)(e,2),n=t[0],r=t[1];return"".concat(n,"=").concat(r)})).join("&");return"".concat("https://id.twitch.tv/oauth2/authorize","?").concat(e)},na=function(){return window.location.href=ta(),null},ra=n(178),aa=n.n(ra),ca=function(){var e=Object(Gn.b)(),t=Object(zn.f)();if(!window.location.hash)return null;var n=new URLSearchParams(window.location.hash.slice(1)),r=n.get("access_token"),a=n.get("id_token");if(!r||!a)return null;localStorage.setItem("accessToken",r),localStorage.setItem("idToken",a),e(function(e){return function(){var t=Object(p.a)(d.a.mark((function t(n){var r,a,c,o,i;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(R()),t.prev=1,t.next=4,v(e);case 4:r=t.sent,a=r.data[0],c=a.login,o=a.display_name,i={id:e,login:c,displayName:o},localStorage.setItem("user",JSON.stringify(i)),n(k(i)),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),n(L(t.t0));case 14:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}()}(aa.a.decode(a).sub));var c=localStorage.getItem("lastChannel");return t.push(c?"/chat/#".concat(c):"/chat/"),null};function oa(){var e=Object(Xn.a)(["\n  * {\n    box-sizing: border-box;\n  }\n  body {\n    margin: 0;\n    font-family: Roobert, Helvetica Neue, Helvetica, Arial, sans-serif;\n  }\n"]);return oa=function(){return e},e}var ia=Object($n.b)(oa());function sa(){var e=Object(Xn.a)([""]);return sa=function(){return e},e}var ua=Object($n.b)(sa());function la(){var e=Object(Xn.a)([""]);return la=function(){return e},e}var fa=Object($n.b)(la());function ba(){var e=Object(Xn.a)(["\n  :root {\n    ",";\n    ",";\n  }\n  ",";\n"]);return ba=function(){return e},e}var ga=Object($n.a)(ba(),ua,fa,ia),da=function(e){var t=e.store;return c.a.createElement(c.a.Fragment,null,c.a.createElement(Gn.a,{store:t},c.a.createElement(Bn.a,null,c.a.createElement(zn.c,null,c.a.createElement(zn.a,{exact:!0,path:"/chat/",component:u(window.location.hash)?ca:$r}),c.a.createElement(zn.a,{exact:!0,path:"/chat/auth",component:na})))),c.a.createElement(ga,null))};if(s.a.initialize("UA-139550930-3"),!u(window.location.hash)){var pa=window.location.pathname+window.location.search+window.location.hash;s.a.pageview(pa)}i.a.render(c.a.createElement(da,{store:Un}),document.getElementById("root"))}},[[184,1,2]]]);
//# sourceMappingURL=main.6dcb809a.chunk.js.map